(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[443],{21020:(c,f,o)=>{var a={"./encrypted-input.svg":83482,"./eye.svg":86566,"./eye_crossed.svg":9716};function l(u){var m=d(u);return o(m)}function d(u){if(!o.o(a,u)){var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}return a[u]}l.keys=function(){return Object.keys(a)},l.resolve=d,c.exports=l,l.id=21020},443:(c,f,o)=>{o.r(f),o.d(f,{CrtEncryptedInputModule:()=>h});var a=o(5960),l=o(40297),d=o(52989),u=o(71252),m=o(55642),I=o(79772),V=o(76260),D=o(57274),U=o(12841),r=o(59131),A=o(34760),S=o(77592),x=o(1034),R=o(96677),N=o(75456),T=o(10098),B=o(86464),P=o(61886),j=o(36169),F=o(19344);const L=y=>({"crt-encrypted-input-unmask-icon-disabled":y});function H(y,t){if(y&1){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"mat-icon",2),r.\u0275\u0275pipe(1,"translate"),r.\u0275\u0275listener("click",function(s){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(i.unmaskValue(s))})("keydown.enter",function(s){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(i.unmaskValue(s))})("keydown.space",function(s){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(i.unmaskValue(s))}),r.\u0275\u0275elementEnd()}if(y&2){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(5,L,e.unmaskingDisabled))("crtAccessibleAttributes",r.\u0275\u0275pipeBind1(1,3,"Components.EncryptedInput.EyeButtonCaption"))("tabIndex",e.getUnmaskingButtonTabIndex())}}let p=class v extends P.S{constructor(){super(...arguments),this.showUnmaskValue=new r.EventEmitter}unmaskValue(t){t?.preventDefault(),t?.stopPropagation(),this.unmaskingDisabled||this.showUnmaskValue.emit()}onBlur(){this.blurred.emit()}onFocus(){this.focused.emit()}onKeyUp(t){this.keyUp.next(t)}onKeyDown(t){this.keyDown.next(t)}getUnmaskingButtonTabIndex(){return this.unmaskingDisabled?-1:0}static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=r.\u0275\u0275getInheritedFactory(v)))(n||v)}})()}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:v,selectors:[["crt-encrypted-input"]],inputs:{unmaskingDisabled:"unmaskingDisabled"},outputs:{showUnmaskValue:"showUnmaskValue"},features:[r.\u0275\u0275ProvidersFeature([{provide:j.P,useValue:0}]),r.\u0275\u0275InheritDefinitionFeature],decls:2,vars:18,consts:[[3,"blurred","focused","keyUp","keydown","value","control","name","loading","tabIndex","styles","classes","shape","autofocus","autocomplete","label","labelPosition","ariaLabel","placeholder","tooltip","disabled","readonly"],["class","crt-input-icon crt-encrypted-input-unmask-icon","svgIcon","eye",3,"ngClass","crtAccessibleAttributes","tabIndex","click","keydown.enter","keydown.space",4,"ngIf"],["svgIcon","eye",1,"crt-input-icon","crt-encrypted-input-unmask-icon",3,"click","keydown.enter","keydown.space","ngClass","crtAccessibleAttributes","tabIndex"]],template:function(e,n){e&1&&(r.\u0275\u0275elementStart(0,"crt-input",0),r.\u0275\u0275listener("blurred",function(){return n.onBlur()})("focused",function(){return n.onFocus()})("keyUp",function(i){return n.onKeyUp(i)})("keydown",function(i){return n.onKeyDown(i)}),r.\u0275\u0275template(1,H,2,7,"mat-icon",1),r.\u0275\u0275elementEnd()),e&2&&(r.\u0275\u0275property("value",n.value)("control",n.control)("name",n.name)("loading",n.loading)("tabIndex",n.tabIndex)("styles",n.styles)("classes",n.classes)("shape",n.shape)("autofocus",n.autofocus)("autocomplete",n.autocomplete)("label",n.label)("labelPosition",n.labelPosition)("ariaLabel",n.ariaLabel)("placeholder",n.placeholder)("tooltip",n.tooltip)("disabled",n.control==null?null:n.control.disabled)("readonly",n.readonly),r.\u0275\u0275advance(),r.\u0275\u0275property("ngIf",!(n.control!=null&&n.control.disabled)))},dependencies:[l.NgClass,l.NgIf,F.j,d.MatIcon,V.X,I.TranslatePipe],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.crt-encrypted-input-unmask-icon[_ngcontent-%COMP%]{width:16px;height:16px;padding:2px}.crt-encrypted-input-unmask-icon[_ngcontent-%COMP%]:not(.crt-encrypted-input-unmask-icon-disabled):hover{cursor:pointer}.crt-encrypted-input-unmask-icon[_ngcontent-%COMP%]:not(.crt-encrypted-input-unmask-icon-disabled):focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}"],changeDetection:0})}};(0,a.__decorate)([(0,A.j)(),(0,a.__metadata)("design:type",Object)],p.prototype,"showUnmaskValue",void 0),(0,a.__decorate)([(0,S.k)({defaultValue:!1}),(0,a.__metadata)("design:type",Boolean)],p.prototype,"unmaskingDisabled",void 0),p=(0,a.__decorate)([(0,x.v)({type:"crt.EncryptedInput",formControlConfig:{relatesTo:"control"},reuseStrategy:R.B.Reuse}),(0,N.f)({toolbarConfig:{requiredFeatures:{EnableSecureTextMasking:!0},position:60,icon:o(83482),defaultPropertyValues:{label:"",labelPosition:"auto"},defaultLocalizableStrings:{label:"Components.EncryptedInput.Caption"}},propertiesPanelComponentTypeName:"crt.EncryptedInputPropertiesPanel",typeCaption:"Components.EncryptedInput.Caption",viewElementGroupType:T.J.Inputs,dataValueTypes:[B.r.SECURE_TEXT]})],p);var _=o(6530),Z=o(61541),O=o(4164);let b=class{_isValidRecordId(t){return(0,_.n7)(t)&&!(0,_.gZ)(t)}_findRecordModelConfigByRecordId(t,e){return t.modelInitConfigs?.find(s=>s.recordId===e)}convert(t,e){if(!this._isValidRecordId(t))return!0;const n=this._findRecordModelConfigByRecordId(e,t);return!(n&&n.action===Z.n.Edit)}};b=(0,a.__decorate)([(0,O.a)({type:"crt.EncryptedUnmaskingDisabledAttributeConverter"})],b);var E=o(73308),$=o(41287),z=o(844),K=o(7471),M=o(62278),G=o(63721);class C{constructor(){this._httpClient=(0,r.inject)(G.HttpClient),this._serviceEndpoint="ServiceModel/ValueUnmaskingService.svc"}unmaskRecord(t,e,n){const s=[this._serviceEndpoint,"GetUnmaskedValue"].join("/");return this._httpClient.post(s,{schemaName:t,columnName:e,recordId:n}).pipe((0,M.catchError)(i=>this._catchErrorResponse(i)))}_catchErrorResponse(t){return(0,M.of)({success:!1,errorInfo:{message:t.message}})}static{this.\u0275fac=function(e){return new(e||C)}}static{this.\u0275prov=r.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}let k=class extends $.l{constructor(t,e){super(),this._encryptedInputService=t,this._dialogService=e}_showErrorMessage(t){const e=t?.errorInfo?.message||"EncryptedInput.EncryptedInputUnmaskValueHandler.ErrorMessage";this._dialogService.openInfoDialog(e)}_getUnmaskResult(t){var e=this;return(0,E.A)(function*(){const n=t.$context,{schemaName:s,columnName:i}=e._getAttributesDataFromDataSchema(t,n),W=yield n[n.primaryAttributeName];return(0,M.lastValueFrom)(e._encryptedInputService.unmaskRecord(s,i,W))})()}_getAttributesDataFromDataSchema(t,e){const n=e.getBoundDataSchemaByAttributePath(t.attributeName)?.name,s=e.getBoundDataSchemaAttributeByAttributePath(t.attributeName)?.name;return{schemaName:n,columnName:s}}_getAttributeModel(t,e){const n=e.getBoundDataSourceNameByAttributePath(t.attributeName);return e.getModelByName(n)}_setViewModelAttributeValue(t,e){var n=this;return(0,E.A)(function*(){yield t.$context.set(t.attributeName,e,{preventStateChange:!0}),n._resetModelAttributeState(t)})()}_resetModelAttributeState(t){const e=t.$context,{columnName:n}=this._getAttributesDataFromDataSchema(t,e);this._getAttributeModel(t,e).setLoadedState([n])}handle(t){var e=this;return(0,E.A)(function*(){const n=yield e._getUnmaskResult(t);n?.success?yield e._setViewModelAttributeValue(t,n.unmaskedValue):e._showErrorMessage(n)})()}};k=(0,a.__decorate)([(0,z.l)({type:"crt.EncryptedInputUnmaskValueHandler",requestType:"crt.EncryptedInputUnmaskValueRequest",scopes:[]}),(0,a.__metadata)("design:paramtypes",[C,K.o])],k);var J=o(74368),X=o(52439),Q=o(1499);class g{_getEncryptedInputViewConfigs(t){return J.u.getViewConfigInfoByProperty("type","crt.EncryptedInput",t.viewConfig).map(e=>e?.viewConfig).filter(Boolean)}_processEncryptedInput(t,e){this._setupInputs(t,e),this._setupRequests(e)}_setupInputs(t,e){this._setupUnmaskingDisabledAttribute(t,e)}_setupRequests(t){this._setShowUnmaskValueRequest(t)}_setShowUnmaskValueRequest(t){if(t.showUnmaskValue)return;const e=(0,X.QV)(t.control);t.showUnmaskValue={request:"crt.EncryptedInputUnmaskValueRequest",params:{attributeName:e}}}_setupUnmaskingDisabledAttribute(t,e){if(e.unmaskingDisabled)return;const n=`${e.name}_UnmaskingDisabled`,s=this._getUnmaskingDisabledAttribute(t);s&&(this._addViewModelConfigAttribute(t,n,s),e.unmaskingDisabled=`$${n}`)}_getUnmaskingDisabledAttribute(t){const e=this._getPrimaryColumnName(t);return e?{from:e,converter:"crt.EncryptedUnmaskingDisabledAttributeConverter"}:null}_getPrimaryColumnName(t){return(0,Q.h)(t)?"Id":null}_addViewModelConfigAttribute(t,e,n){!t?.viewModelConfig?.attributes||t.viewModelConfig.attributes[e]||(t.viewModelConfig.attributes[e]=n)}crtOnMetaDataInit(t){const e=t;return this._getEncryptedInputViewConfigs(e).forEach(s=>this._processEncryptedInput(e,s)),Promise.resolve(t)}static{this.\u0275fac=function(e){return new(e||g)}}static{this.\u0275prov=r.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac})}}let h=class w{constructor(t,e){this._matIconRegistry=t,this._domSanitizer=e,this._registerIcons()}_registerIcons(){["eye","eye_crossed"].forEach(e=>{const n=o(21020)("./"+e+".svg");this._matIconRegistry.addSvgIconLiteral(e,this._domSanitizer.bypassSecurityTrustHtml(n))})}static{this.\u0275fac=function(e){return new(e||w)(r.\u0275\u0275inject(d.MatIconRegistry),r.\u0275\u0275inject(u.DomSanitizer))}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:w})}static{this.\u0275inj=r.\u0275\u0275defineInjector({providers:[C,{provide:U.m,useClass:g,multi:!0}],imports:[l.CommonModule,D.u,d.MatIconModule,I.TranslateModule]})}};h=(0,a.__decorate)([(0,m.g)({viewElements:[p],converters:[b],requestHandlers:[k]}),(0,a.__metadata)("design:paramtypes",[d.MatIconRegistry,u.DomSanitizer])],h),function(){(typeof ngJitMode>"u"||ngJitMode)&&r.\u0275\u0275setNgModuleScope(h,{declarations:[p],imports:[l.CommonModule,D.u,d.MatIconModule,V.X,I.TranslateModule],exports:[p]})}()},83482:c=>{c.exports=`<svg width="72" height="40" viewBox="0 0 72 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="8.5" y="8.51465" width="55" height="23" rx="0.5" fill="white" stroke="#0D2E4E"/>
<path d="M37 17.0146H19C17.3431 17.0146 16 18.3578 16 20.0146C16 21.6715 17.3431 23.0146 19 23.0146H37C38.6569 23.0146 40 21.6715 40 20.0146C40 18.3578 38.6569 17.0146 37 17.0146Z" fill="#D1D1D1"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M49.14 18.1946C49.1378 18.7918 49.2526 19.3836 49.478 19.9366L45.5 23.9146V26.5146H48.1V24.9546H49.66V23.3946H51.22L52.078 22.5366C52.631 22.7621 53.2228 22.8769 53.82 22.8746C54.7456 22.8746 55.6504 22.6002 56.4201 22.0859C57.1897 21.5717 57.7895 20.8408 58.1438 19.9856C58.498 19.1304 58.5907 18.1895 58.4101 17.2816C58.2295 16.3738 57.7838 15.5399 57.1293 14.8854C56.4747 14.2309 55.6409 13.7852 54.733 13.6046C53.8252 13.424 52.8842 13.5167 52.029 13.8709C51.1739 14.2251 50.443 14.825 49.9287 15.5946C49.4145 16.3642 49.14 17.269 49.14 18.1946ZM56.4832 17.2374C56.4832 18.1324 55.7577 18.8579 54.8628 18.8579C53.9679 18.8579 53.2424 18.1324 53.2424 17.2374C53.2424 16.3425 53.9679 15.617 54.8628 15.617C55.7577 15.617 56.4832 16.3425 56.4832 17.2374Z" fill="#FF4013"/>
</svg>
`},86566:c=>{c.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M7.85949 6.4763C7.75553 6.29959 7.80141 6 8 6C9.05962 6 9.91497 6.89333 9.91497 8C9.91497 9.10667 9.05962 10 8 10C6.94038 10 6.08503 9.10667 6.08503 8C6.08503 7.79214 6.3726 7.74425 6.54224 7.85295C6.68785 7.94625 6.85935 8 7.04314 8C7.57295 8 8.00062 7.55333 8.00062 7C8.00062 6.80782 7.94903 6.62851 7.85949 6.4763Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1.02076 8.10977C0.993079 8.03952 0.993079 7.96048 1.02076 7.89023C2.15121 5.02162 4.84843 3 8 3C11.1516 3 13.8488 5.02162 14.9792 7.89023C15.0069 7.96048 15.0069 8.03952 14.9792 8.10977C13.8488 10.9784 11.1516 13 8 13C4.84843 13 2.15121 10.9784 1.02076 8.10977ZM4.80838 8C4.80838 9.84 6.23822 11.3333 8 11.3333C9.76178 11.3333 11.1916 9.84 11.1916 8C11.1916 6.16 9.76178 4.66667 8 4.66667C6.23822 4.66667 4.80838 6.16 4.80838 8Z" fill="currentColor"/>
</svg>
`},9716:c=>{c.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M14.4448 2.23116C14.7514 2.53938 14.7514 3.0391 14.4448 3.34732L4.07752 13.7688C3.7709 14.0771 3.27378 14.0771 2.96716 13.7688C2.66055 13.4606 2.66055 12.9609 2.96716 12.6527L13.3345 2.23116C13.6411 1.92295 14.1382 1.92295 14.4448 2.23116Z" fill="currentColor"/>
<path d="M9.68346 4.90213C9.59319 4.99286 9.45473 5.01158 9.33891 4.95765C8.93167 4.76804 8.47805 4.66221 8 4.66221C6.23823 4.66221 4.80838 6.09953 4.80838 7.87052C4.80838 8.35107 4.91366 8.80706 5.10229 9.21643C5.15594 9.33286 5.13731 9.47204 5.04705 9.56278L3.63945 10.9777C3.5381 11.0796 3.37715 11.0913 3.2657 11.0007C2.28581 10.2041 1.50783 9.16578 1.02074 7.97608C0.993059 7.90846 0.993097 7.83248 1.02078 7.76486C2.15123 5.00386 4.84844 3.05806 8 3.05806C8.88769 3.05806 9.73933 3.21243 10.5301 3.49591C10.7221 3.56475 10.7701 3.80982 10.6259 3.95473L9.68346 4.90213Z" fill="currentColor"/>
<path d="M8.55968 6.03164C8.36543 6.12049 8.20617 6.27261 8.10775 6.46199C8.0918 6.49268 8.07244 6.52157 8.04809 6.54605L6.50662 8.09557C6.35337 8.24963 6.09737 8.18064 6.08719 7.96302C6.08576 7.93237 6.08503 7.90153 6.08503 7.87052C6.08503 6.80536 6.94038 5.94554 8 5.94554C8.19474 5.94554 8.38258 5.97458 8.55948 6.0286L8.55968 6.03164Z" fill="currentColor"/>
<path d="M6.70106 12.1264C6.54111 12.2872 6.62086 12.5598 6.84442 12.5944C7.22111 12.6527 7.60702 12.683 8 12.683C11.1516 12.683 13.8488 10.7372 14.9792 7.97617C15.0069 7.90855 15.0069 7.83258 14.9793 7.76496C14.6499 6.96041 14.1874 6.22508 13.6195 5.58694C13.5124 5.46665 13.3274 5.46542 13.2139 5.57955L11.2756 7.52802C11.2163 7.58761 11.1866 7.67024 11.1896 7.75446C11.1909 7.79298 11.1916 7.83167 11.1916 7.87052C11.1916 9.6415 9.76177 11.0788 8 11.0788C7.96135 11.0788 7.92286 11.0781 7.88455 11.0768C7.80076 11.0738 7.71856 11.1036 7.65928 11.1632L6.70106 12.1264Z" fill="currentColor"/>
</svg>
`}}]);
