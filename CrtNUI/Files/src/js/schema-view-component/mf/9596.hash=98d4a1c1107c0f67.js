(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[9596],{61430:(S,F,n)=>{n.d(F,{T:()=>e});var t=n(59131),c=n.n(t),o=n(27252);class e extends o.Z{constructor(){super(...arguments),this.readMoreClick=new t.EventEmitter}set hasExternalLoadMore(f){this._hasExternalLoadMore=f,f&&this._addButtonIfNotExists()}get hasExternalLoadMore(){return this._hasExternalLoadMore}_addButtonIfNotExists(){const f=this.nativeElement?.querySelector(".read-more-button");if(!this.nativeElement||f)return;const y=this.createButton();this.nativeElement.appendChild(y)}onReadMoreClick(f){this.hasExternalLoadMore?this.readMoreClick.emit():super.onReadMoreClick(f)}foldContent(){this.nativeElement?.classList.add(this.wrapperClassName)}static{this.\u0275fac=(()=>{let f;return function(B){return(f||(f=t.\u0275\u0275getInheritedFactory(e)))(B||e)}})()}static{this.\u0275dir=t.\u0275\u0275defineDirective({type:e,selectors:[["","crtQuotedReadMore",""]],inputs:{hasExternalLoadMore:"hasExternalLoadMore"},outputs:{readMoreClick:"readMoreClick"},features:[t.\u0275\u0275InheritDefinitionFeature]})}}},27252:(S,F,n)=>{n.d(F,{Z:()=>U});var t=n(59131),c=n.n(t),o=n(79772),e=n.n(o),w=n(4659),f=n(62278),y=n.n(f),B=n(36486),V=n.n(B);class U{get inLines(){return this._inLines}set inLines(r){this._inLines=r}get inUnits(){return this._inUnits}set inUnits(r){this._inUnits=r}constructor(r,C){this._elRef=r,this._translateService=C,this._fontScale=1.2,this._linesDefault=5,this._paddingTop=8,this._attributeName="oldHeight",this._blockquoteSelectors=["blockquote","blockquote.gmail_quote","div#appendonsend","div#divRplyFwdMsg",'[id*="yahoo_quoted_"]','div[name="quote"]','blockquote[id*="quote_zmail"]'],this._readMoreButtonClicked$=new f.Subject,this._destroyed$=new f.Subject,this.wrapperClassName="read-more-wrapper",this.fitToBlockquote=!1}_isNeedToShowButton(){if(this.nativeElement.querySelector(".read-more-button"))return!1;let r=0;return this.inLines&&(r=this._calculateLinesHeightInPx()),this.inUnits&&(r=parseInt(this.inUnits)||0),r>0&&this._nativeElementHeight>r}_calculateLinesHeightInPx(){let r=0;const C=window.getComputedStyle(this.nativeElement),I=C.getPropertyValue("line-height");return I==="normal"?r=parseInt(C.getPropertyValue("font-size"))*this._fontScale:r=parseInt(I)||0,r*(this.inLines+1)+this._paddingTop}_wrapElement(){this.nativeElement.classList.add(this.wrapperClassName);const r=this.nativeElement.style.getPropertyValue("height");r&&this.nativeElement.setAttribute(this._attributeName,r),this.nativeElement.style.setProperty("height",this._getWrapperHeight())}_getWrapperHeight(){return this.inLines?this._calculateLinesHeightInPx()+"px":this.inUnits}_findBlockquote(){let r=null;for(const C of this._blockquoteSelectors){const I=this.nativeElement.querySelector(C);I&&(r==null||r.innerHTML.length>I.innerHTML.length)&&(r=I)}return r}_blockqouteFit(){const r=this._findBlockquote();if(r){const C=window.getComputedStyle(r),I=parseInt(C.getPropertyValue("margin-top"))||0,L=parseInt(C.getPropertyValue("padding-top"))||0,A=r.offsetTop+I+L+this._paddingTop;this.nativeElement.style.setProperty("height",A+"px")}}_recalculateAfterAllImagesLoaded(){const r=[];this.nativeElement.querySelectorAll("img").forEach(C=>{r.push(new Promise(I=>{C.onload=I}))}),r.length>0&&Promise.all(r).then(this.addButton.bind(this))}_resizeObservable(r){return new f.Observable(C=>{const I=new w.A(L=>{C.next(L)});return I.observe(r),()=>I.unobserve(r)})}_fixFocusPosition(){this.focusTrapEl.setAttribute("tabindex","0"),this.focusTrapEl.addEventListener("blur",()=>this.nativeElement.removeChild(this.focusTrapEl)),this.focusTrapEl.focus()}onReadMoreClick(r){this._readMoreButtonClicked$.next(!0),this.nativeElement.classList.remove(this.wrapperClassName);const C=this.nativeElement.getAttribute(this._attributeName);C?(this.nativeElement.style.setProperty("height",C),this.nativeElement.removeAttribute(this._attributeName)):this.nativeElement.style.removeProperty("height"),this.nativeElement.removeChild(r.target.parentElement),this._fixFocusPosition()}createButton(){const r=document.createElement("div");r.classList.add("read-more-button-wrap");const C=document.createElement("div");return C.innerText=this._translateService.instant("ReadMoreDirective.Label"),C.classList.add("read-more-button"),C.tabIndex=0,C.role="button",C.addEventListener("click",this.onReadMoreClick.bind(this)),C.addEventListener("keydown",I=>{(I.key==="Enter"||I.key==="Space")&&this.onReadMoreClick(I)}),r.appendChild(C),r}addFocusTrapElement(){this.focusTrapEl=document.createElement("div"),this.nativeElement.appendChild(this.focusTrapEl)}addButton(){this._nativeElementHeight=this.nativeElement.getBoundingClientRect().height,window.requestAnimationFrame(()=>{if(this._nativeElementHeight=this._nativeElementHeight===0?this.nativeElement.getBoundingClientRect().height:this._nativeElementHeight,this._isNeedToShowButton()){const r=this.createButton();this.nativeElement.appendChild(r),this.addFocusTrapElement(),this.foldContent()}})}foldContent(){this._wrapElement(),this.fitToBlockquote&&this._blockqouteFit()}ngAfterViewInit(){this.nativeElement=this._elRef?.nativeElement,this.nativeElement&&this._resizeObservable(this.nativeElement).pipe((0,B.filter)(r=>r[0]?.contentRect.height>0),(0,B.takeUntil)((0,f.merge)(this._destroyed$,this._readMoreButtonClicked$))).subscribe(()=>{!this.inLines&&!this.inUnits&&(this.inLines=this._linesDefault),this.addButton(),this._recalculateAfterAllImagesLoaded()})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(C){return new(C||U)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(o.TranslateService))}}static{this.\u0275dir=t.\u0275\u0275defineDirective({type:U,selectors:[["","crtReadMore",""]],inputs:{inLines:"inLines",inUnits:"inUnits",fitToBlockquote:"fitToBlockquote"}})}}},92527:(S,F,n)=>{n.d(F,{Q:()=>y});var t=n(40297),c=n.n(t),o=n(61430),e=n(27252),w=n(59131),f=n.n(w);class y{static{this.\u0275fac=function(U){return new(U||y)}}static{this.\u0275mod=w.\u0275\u0275defineNgModule({type:y})}static{this.\u0275inj=w.\u0275\u0275defineInjector({imports:[t.CommonModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&w.\u0275\u0275setNgModuleScope(y,{declarations:[e.Z,o.T],imports:[t.CommonModule],exports:[e.Z,o.T]})})()},50524:(S,F,n)=>{n.d(F,{N:()=>A});var t=n(59131),c=n.n(t),o=n(6530),e=n(49973),w=n(58504),f=n(64429),y=n(91065),B=n(62278),V=n.n(B),U=n(64171),z=n(23092),r=n(72882),C=n(65751);const I=["commentComposer"];function L(m,d){if(m&1){const l=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"crt-feed-item",6),t.\u0275\u0275listener("messageDeleted",function(v){t.\u0275\u0275restoreView(l);const P=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(P.onCommentDeleted(v))})("messageEdited",function(v){t.\u0275\u0275restoreView(l);const P=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(P.onCommentEdited(v))})("selectionChange",function(v){t.\u0275\u0275restoreView(l);const P=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(P.onSelectionChange(v))}),t.\u0275\u0275elementEnd()()}if(m&2){const l=d.$implicit,h=d.last,v=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("item",l)("feedType",v.feedType)("isTheLastComment",h)("allowExternalPost",v.allowExternalPost)("disableSelectionOptions",v.disableSelectionOptions)("readingMode",v.readingMode)}}class A{constructor(d,l,h,v,P){this._feedMessageService=d,this._changeDetectorRef=l,this._userInfoService=h,this._queryExecutor=v,this._feedNotificationService=P,this.feedMessageComments=[],this.currentUserContact$=new B.Subject,this.newComment=new t.EventEmitter,this.removeComment=new t.EventEmitter,this.selectionChange=new t.EventEmitter,this.readingMode=f.w.All}_getMessageComments(){!this.messageId||!this.schemaUId||!this.entityId||!this.isVisible||(this.feedMessageComments=[],this._feedMessageService.getMessageComments(this.schemaUId,this.entityId,this.messageId,this.readingMode).subscribe(d=>this._onMessageCommentsLoaded(d)))}_onMessageCommentsLoaded(d){d.length>0&&(this.feedMessageComments=this.feedMessageComments.concat(d),this._changeDetectorRef.markForCheck())}_initializeCurrentUserInfo(){this._userInfoService.loadCurrentUserInfo().subscribe(d=>{const l=d?.userInfo.photoId;this._usrContactInfo={value:d?.userInfo.contactId,displayValue:d?.userInfo.contactName,primaryImageValue:(0,o.gZ)(l)?null:l},this.currentUserContact$.next(this._usrContactInfo),d&&this._getCurrentUserPhoto(d.userInfo.contactId)})}_getCurrentUserPhoto(d){const l=new e.s("Contact");l.addSchemaColumn("Photo"),l.filters.addSchemaColumnFilterWithParameter(w.H.Equal,"Id",d),this._queryExecutor.executeSelectQuery(l).pipe((0,B.map)(h=>{const P=h[0]?.Photo?.value;this._usrContactInfo.primaryImageValue=(0,o.gZ)(P)?null:P,this.currentUserContact$.next(this._usrContactInfo)})).subscribe()}_onMessageNotification(d){if(d.ParentId===this.messageId)switch(d.Operation){case y.x.Insert:this.feedMessageComments.some(l=>l.Id===d.MessageId)||this.onCommentPosted(d.MessageId);break;case y.x.Delete:this._onCommentDeleted(d.MessageId);break}}_onCommentDeleted(d){const l=this.feedMessageComments.find(h=>h.Id===d);l&&this.onCommentDeleted(l)}ngOnChanges(){this._getMessageComments()}onCommentPosted(d){this._feedMessageService.getComment(this.schemaUId,this.entityId,d,this.readingMode).subscribe(l=>{const h=l.filter(v=>!this.feedMessageComments.some(P=>P.Id===v.Id));h.length>0&&this.newComment.emit(d),this._onMessageCommentsLoaded(h)})}onCommentDeleted(d){const l=this.feedMessageComments.indexOf(d);l!==-1&&(this.feedMessageComments.splice(l,1),this.removeComment.emit(),this._changeDetectorRef.markForCheck())}onCommentEdited(d){this._feedMessageService.getComment(this.schemaUId,this.entityId,d,this.readingMode).subscribe(l=>{if(l.length>0){const h=l[0],v=this.feedMessageComments.findIndex(P=>P.Id===h.Id);v!==-1&&(this.feedMessageComments[v]=h,this._changeDetectorRef.markForCheck())}})}ngOnInit(){this._initializeCurrentUserInfo(),this._feedNotificationService.newMessageEvent.subscribe(d=>{this._onMessageNotification(d)})}onSelectionChange(d){this.selectionChange.next(d)}getForExternalDefault(){return this.readingMode===f.w.External}static{this.\u0275fac=function(l){return new(l||A)(t.\u0275\u0275directiveInject(U.t),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(z.fv),t.\u0275\u0275directiveInject(C.w),t.\u0275\u0275directiveInject(r.Z))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:A,selectors:[["crt-feed-comments"]],viewQuery:function(l,h){if(l&1&&t.\u0275\u0275viewQuery(I,5),l&2){let v;t.\u0275\u0275queryRefresh(v=t.\u0275\u0275loadQuery())&&(h.commentComposer=v.first)}},inputs:{schemaName:"schemaName",feedType:"feedType",allowExternalPost:"allowExternalPost",entityId:"entityId",schemaUId:"schemaUId",messageId:"messageId",isVisible:"isVisible",disableSelectionOptions:"disableSelectionOptions",readingMode:"readingMode"},outputs:{newComment:"newComment",removeComment:"removeComment",selectionChange:"selectionChange"},features:[t.\u0275\u0275NgOnChangesFeature],decls:7,vars:10,consts:[["commentComposer",""],[1,"feed-item-comments"],[4,"ngFor","ngForOf"],[1,"feed-item-comments-input"],[3,"contact"],[3,"messagePosted","selectionChange","primaryColumnValue","parentMessageId","schemaUId","allowExternalPost","disableSelectionOptions","forExternalDefault"],[3,"messageDeleted","messageEdited","selectionChange","item","feedType","isTheLastComment","allowExternalPost","disableSelectionOptions","readingMode"]],template:function(l,h){if(l&1){const v=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,L,2,6,"div",2),t.\u0275\u0275elementStart(2,"div",3),t.\u0275\u0275element(3,"crt-feed-user-img",4),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275elementStart(5,"crt-feed-composer",5,0),t.\u0275\u0275listener("messagePosted",function(D){return t.\u0275\u0275restoreView(v),t.\u0275\u0275resetView(h.onCommentPosted(D))})("selectionChange",function(D){return t.\u0275\u0275restoreView(v),t.\u0275\u0275resetView(h.onSelectionChange(D))}),t.\u0275\u0275elementEnd()()()}l&2&&(t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",h.feedMessageComments),t.\u0275\u0275advance(2),t.\u0275\u0275property("contact",t.\u0275\u0275pipeBind1(4,8,h.currentUserContact$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("primaryColumnValue",h.entityId)("parentMessageId",h.messageId)("schemaUId",h.schemaUId)("allowExternalPost",h.allowExternalPost)("disableSelectionOptions",h.disableSelectionOptions)("forExternalDefault",h.getForExternalDefault()))},styles:[`.feed-item-comments{margin-inline-start:15px}.feed-item-comments-input{display:flex}.feed-item-comments-input crt-feed-user-img .feed-user-img{margin-top:7px}.feed-item-comments-input crt-feed-composer{width:calc(100% - 47px);margin-inline-start:15px}
`],encapsulation:2})}}},94404:(S,F,n)=>{n.d(F,{G:()=>J});var t=n(73308),c=n(5960),o=n.n(c),e=n(59131),w=n.n(e),f=n(91775),y=n(77592),B=n(34760),V=n(1034),U=n(96677),z=n(79772),r=n.n(z),C=n(88033),I=n(59969),L=n(60575),A=n(73270),m=n(65001),d=n(48693),l=n(31774),h=n(64429),v=n(4092),P=n(90983),D=n(26594),_=n(23092),E=n(97842),O=n(28399),N=n.n(O),Y=n(64171),se=n(23854),ne=n(40297),ee=n.n(ne),a=n(52989),T=n.n(a),R=n(62115),j=n(4227),Q=n(54653),oe=n(53703),re=n(27252),ce=n(61430),_e=n(70362),fe=n(76556),W=n(80615),$=n(45667),K=n(50524),M=n(33652),Z=n(5680),k=n(8017),G=n(38914),he=n(78027);const de=["composerItem"],ue=["composerItemComment"],Ce=["feedComments"],ve=["feedItem"],le=["feedItemContent"],xe=["itemMessage"],b=["feedItemActionsButton"],x=[[["","customBody",""]],[["","userPhoto",""]],[["","customHead",""]],[["","skeletonLoader",""]]],X=["[customBody]","[userPhoto]","[customHead]","[skeletonLoader]"],q=p=>({"feed-item-post":p}),te=(p,g)=>({"feed-comment":p,"actions-visible":g}),ie=(p,g,s,i,u,H)=>({"post-vertical-line":p,"post-vertical-line-dashed":g,"comment-vertical-line":s,"comment-vertical-line-dashed":i,"comment-horizontal-bottom-line-dashed":u,"comment-horizontal-line":H}),me=p=>({$implicit:p}),ae=()=>({mode:"default"}),Ee=p=>({"feed-item-content-btn-group-post":p}),Pe=p=>({"feed-item-content-btn-active":p});function ge(p,g){p&1&&e.\u0275\u0275projection(0,1,["*ngIf","useCustomPhoto; else defaultPhoto"])}function Oe(p,g){if(p&1&&e.\u0275\u0275element(0,"crt-feed-user-img",33),p&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("contact",s.item.CreatedBy)}}function De(p,g){p&1&&(e.\u0275\u0275elementStart(0,"div",34),e.\u0275\u0275projection(1,2),e.\u0275\u0275elementEnd())}function Te(p,g){p&1&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),p&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Feed.Post.PostedInLabel")," "))}function Re(p,g){if(p&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-link",35),e.\u0275\u0275pipe(1,"lowercase"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(s);const u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.onLinkClick(u.item.EntitySchemaName,u.item.EntityId))}),e.\u0275\u0275elementEnd()}if(p&2){const s=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("caption",e.\u0275\u0275pipeBind1(1,2,s.item.EntitySchemaCaption)),e.\u0275\u0275property("href",s.buildEntityLink(s.item.EntitySchemaName,s.item.EntityId))}}function Le(p,g){if(p&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34)(1,"crt-link",35),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(s);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.onLinkClick("Contact",u.item.CreatedBy.value))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Te,3,3,"span",25)(3,Re,2,4,"crt-link",36),e.\u0275\u0275elementEnd()}if(p&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("caption",s.item.CreatedBy.displayValue),e.\u0275\u0275property("href",s.buildEntityLink("Contact",s.item.CreatedBy.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!s.isComment()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!s.isComment())}}function Se(p,g){if(p&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-button",37,5),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275listener("menuOpened",function(){e.\u0275\u0275restoreView(s);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.isMenuOpened=!0)})("menuClosed",function(){e.\u0275\u0275restoreView(s);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.isMenuOpened=!1)}),e.\u0275\u0275element(4,"crt-menu",38,6),e.\u0275\u0275elementEnd()}if(p&2){const s=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(3,4,"Feed.ActionsButtonCaption")),e.\u0275\u0275property("crtMenuTriggerFor",s)("crtMenuTriggerData",e.\u0275\u0275pureFunction1(6,me,i.itemActionItems)),e.\u0275\u0275advance(4),e.\u0275\u0275property("items",i.itemActionItems)}}function Ae(p,g){p&1&&(e.\u0275\u0275elementStart(0,"div",39)(1,"crt-chip",40),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),p&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"Feed.DraftItemTagCaption")))}function Be(p,g){p&1&&e.\u0275\u0275element(0,"div",41)}function Ue(p,g){p&1&&(e.\u0275\u0275elementStart(0,"div",42),e.\u0275\u0275element(1,"mat-icon",43),e.\u0275\u0275elementStart(2,"div",44)(3,"span"),e.\u0275\u0275text(4,"External"),e.\u0275\u0275elementEnd()()())}function be(p,g){p&1&&e.\u0275\u0275element(0,"div",41)}function Fe(p,g){p&1&&e.\u0275\u0275projection(0,3,["*ngIf","!item.Message"])}function we(p,g){if(p&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-feed-composer",45,7),e.\u0275\u0275listener("messageChangesCanceled",function(u){e.\u0275\u0275restoreView(s);const H=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(H.onMessageChangesCanceled(u))})("messagePosted",function(u){e.\u0275\u0275restoreView(s);const H=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(H.onMessageEdited(u))})("selectionChange",function(u){e.\u0275\u0275restoreView(s);const H=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(H.onSelectionChange(u))}),e.\u0275\u0275elementEnd()}if(p&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("messageId",s.item.Id)("message",s.item.Message)("entitySchemaName",s.item.EntitySchemaName)("primaryColumnValue",s.item.EntityId)("schemaUId",s.item.EntitySchemaUId)("forExternal",s.forExternal)("allowExternalPost",s.allowExternalPost)("selection",s.selection)}}function We(p,g){if(p&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-feed-composer",46,8),e.\u0275\u0275listener("messageChangesCanceled",function(u){e.\u0275\u0275restoreView(s);const H=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(H.onMessageChangesCanceled(u))})("messagePosted",function(u){e.\u0275\u0275restoreView(s);const H=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(H.onMessageEdited(u))})("selectionChange",function(u){e.\u0275\u0275restoreView(s);const H=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(H.onSelectionChange(u))}),e.\u0275\u0275elementEnd()}if(p&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("messageId",s.item.Id)("message",s.item.Message)("primaryColumnValue",s.item.EntityId)("schemaUId",s.item.EntitySchemaUId)("parentMessageId",s.item.Parent.value)("forExternal",s.forExternal)("allowExternalPost",s.allowExternalPost)("selection",s.selection)}}function Ke(p,g){if(p&1&&(e.\u0275\u0275element(0,"div",47,9),e.\u0275\u0275pipe(2,"sanitizeHtml"),e.\u0275\u0275pipe(3,"bypassSecurityTrust")),p&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("fitToBlockquote",!0)("innerHTML",e.\u0275\u0275pipeBind2(3,5,e.\u0275\u0275pipeBind2(2,2,s.item.Message,e.\u0275\u0275pureFunction0(8,ae)),"html"),e.\u0275\u0275sanitizeHtml)}}function Ve(p,g){if(p&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",48,9),e.\u0275\u0275pipe(2,"sanitizeHtml"),e.\u0275\u0275pipe(3,"bypassSecurityTrust"),e.\u0275\u0275listener("readMoreClick",function(){e.\u0275\u0275restoreView(s);const u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.readMoreClick.emit(u))}),e.\u0275\u0275elementEnd()}if(p&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("hasExternalLoadMore",s.hasExternalLoadMore)("fitToBlockquote",!0)("innerHTML",e.\u0275\u0275pipeBind2(3,6,e.\u0275\u0275pipeBind2(2,3,s.item.Message,e.\u0275\u0275pureFunction0(9,ae)),"html"),e.\u0275\u0275sanitizeHtml)}}function Ne(p,g){if(p&1&&(e.\u0275\u0275elementStart(0,"crt-expansion-panel",49),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"crt-gallery",50),e.\u0275\u0275elementEnd()),p&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,6,"Components.Attachment.Caption")),e.\u0275\u0275property("expanded",!1)("fullWidthHeader",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",s.files)("itemConfig",s.galleryItemConfig)("selectable",!1)}}function je(p,g){if(p&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-button",55),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(s);const u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.comment())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}p&2&&(e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,2,"Feed.Post.AddCommentButtonCaption")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"Feed.Post.AddCommentButtonCaption")," "))}function ke(p,g){if(p&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-button",56),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(s);const u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.toggleComments())}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()}if(p&2){const s=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,3,s.areCommentsShown?"Feed.Post.ExpandedCommentsButtonHint":"Feed.Post.CommentsButtonHint")),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,Pe,s.areCommentsShown===!0)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",s.commentsButtonCaption," ")}}function He(p,g){if(p&1&&(e.\u0275\u0275elementStart(0,"div",51),e.\u0275\u0275template(1,je,4,6,"crt-button",52)(2,ke,3,7,"crt-button",53),e.\u0275\u0275element(3,"crt-feed-reactions",54),e.\u0275\u0275elementEnd()),p&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,Ee,!s.isComment())),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!s.isComment()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.hasInnerComments()),e.\u0275\u0275advance(),e.\u0275\u0275property("narrowMode",s.narrowMode)("messageId",s.item.Id)("reactionsCounters",s.item.ReactionsCounters)}}let J=class Me{set composerItem(g){g?.focus()}set composerItemComment(g){g?.focus()}constructor(g,s,i,u,H,pe,ze,Qe,$e){this._googleTagManager=g,this._messageService=s,this._messageDialogProvider=i,this._maskService=u,this._userInfo=H,this._changeDetector=pe,this._translateService=ze,this._featureValues=Qe,this._window=$e,this._deleteActionCode="Delete",this._editActionCode="Edit",this._maskDelay=0,this._maxNarrowWidth=370,this._updateIsHoveredDebounceFn=(0,O.debounce)(this._updateIsHovered,50),this.areCommentsShown=!1,this.isHovered=!1,this.isMenuOpened=!1,this.galleryItemConfig={defaultImage:A.k.DEFAULT,componentClassFactory:()=>d.U,itemKeyProperty:"fileId",defaultSize:m.Z.Small},this.isEditMode=!1,this.messageDeleted=new e.EventEmitter,this.messageEdited=new e.EventEmitter,this.readMoreClick=new e.EventEmitter,this.hasExternalLoadMore=!1,this.isQuotationMode=!1,this.isTheLastComment=!1,this.useCustomPhoto=!1,this.useCustomHead=!1,this.disableLikesComments=!1,this.showMenuActionItems=!0,this.isDraftItem=!1,this.itemActionItems=[{caption:this._translateService.instant("Feed.Item.Edit"),type:"crt.MenuItem",name:this._editActionCode,icon:"feed-edit",handleItemClick:()=>this.menuItemSelected(this._editActionCode)},{caption:this._translateService.instant("Feed.Item.Delete"),type:"crt.MenuItem",name:this._deleteActionCode,icon:"feed-delete",handleItemClick:()=>this.menuItemSelected(this._deleteActionCode)}],this.selectionChange=new e.EventEmitter,this.readingMode=h.w.All}customVisibleItemActionsMenu(){return this._userInfo&&this.item&&this._userInfo.contactId===this.item.CreatedBy?.value}ngOnInit(){this._messageService.loadAttachments(this.item).subscribe(g=>{this.files=g,this._changeDetector.detectChanges()})}_onDeletionError(g=null){g&&console.error(g),this._messageDialogProvider.error("Feed.Item.DeletionErrorMsg"),this._maskService.hideBodyMask()}_onDeleted(g){g?(this.messageDeleted.emit(this.item),this._maskService.hideBodyMask()):this._onDeletionError()}_deleteCurrentItem(){const g=this.item;this._maskService.showBodyMask({delay:this._maskDelay}),this.isComment()?this._messageService.deleteMessageComment(g).subscribe({next:s=>this._onDeleted(s),error:s=>this._onDeletionError(s)}):this._messageService.deleteFeedMessage(g).subscribe({next:s=>this._onDeleted(s),error:s=>this._onDeletionError(s)})}_updateIsHovered(g,s=!1){this.isHovered!==g&&(this.isHovered=g,this._changeDetector.detectChanges(),s&&(this.isMenuOpened=!0,this.feedItemActionsButton.focus()))}get narrowMode(){return this.feedItem?.nativeElement?.offsetWidth<this._maxNarrowWidth}get commentsButtonCaption(){return this.narrowMode?this.item.CommentCount.toString():`${this._translateService.instant("Feed.Post.CommentsButtonCaption")} (${this.item.CommentCount})`}get forExternal(){return this.item.UserAccess===v.U.External}get externalTagVisible(){return this.forExternal&&!this._userInfo.isSSP}get visibleItemActionsMenu(){return(this.isHovered||this.isMenuOpened)&&this.showMenuActionItems&&this.customVisibleItemActionsMenu()}menuItemSelected(g){g===this._deleteActionCode?this._messageDialogProvider.confirmation("Feed.Item.DeletionConfirmation").subscribe(s=>{this._updateIsHovered(!0,!0),this._window.requestAnimationFrame(()=>{s&&this._deleteCurrentItem()})}):g===this._editActionCode&&(this.isEditMode=!0)}_sendGTMData(){const g={moduleName:"Feed",schemaName:"FeedComments",action:"FeedCommentsToggled"};this._googleTagManager.track(g)}_handleAnchorClick(g){var s=this;return(0,t.A)(function*(){const i=g?.target&&(g?.target).getAttribute("data-value");(0,O.isEmpty)(i)||(g?.preventDefault(),g?.stopPropagation(),yield s.onLinkClick("Contact",i))})()}buildEntityLink(g,s){return(0,P.TX)(g,s)}toggleComments(){this.areCommentsShown=!this.areCommentsShown,this._sendGTMData()}comment(){this.areCommentsShown||this.toggleComments(),setTimeout(()=>{this.feedComments?.commentComposer?.focus()},10)}isComment(){return!(0,O.isEmpty)(this.item.Parent)}hasInnerComments(){return this.item.CommentCount&&this.item.CommentCount!==0}onNewComment(g){this.item.CommentCount=this.item.CommentCount?this.item.CommentCount+1:1}onRemoveComment(){this.item.CommentCount=this.item.CommentCount>0?this.item.CommentCount-1:0}onMessageEdited(g){this.messageEdited.emit(g),this.onMessageChangesCanceled()}onMessageChangesCanceled(){this.isEditMode=!1,this.selectionChange.next("")}onLinkClick(g,s){return(0,t.A)(function*(){const i={type:"crt.UpdateRecordRequest",entityName:g,recordId:s,$context:null};yield f.t.instance.process(i)})()}ngAfterViewInit(){(this.itemMessage?.nativeElement?.querySelectorAll('a[data-link="mention"]')||[]).forEach(s=>{s.addEventListener("click",this._handleAnchorClick.bind(this))})}useQuotedMessages(){return!this._featureValues["LargeEmailsInTimeline.DisableEmailPreviewLoader"]&&this.isQuotationMode}onSelectionChange(g){this.selectionChange.next(g)}onFocusChange(){this._updateIsHoveredDebounceFn(this.feedItemContent?.nativeElement.contains(document.activeElement))}static{this.\u0275fac=function(s){return new(s||Me)(e.\u0275\u0275directiveInject(L.A),e.\u0275\u0275directiveInject(Y.t),e.\u0275\u0275directiveInject(l.r),e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(_.oq),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(z.TranslateService),e.\u0275\u0275directiveInject(D.G),e.\u0275\u0275directiveInject(I.ZP))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Me,selectors:[["crt-feed-item"]],viewQuery:function(s,i){if(s&1&&(e.\u0275\u0275viewQuery(de,5),e.\u0275\u0275viewQuery(ue,5),e.\u0275\u0275viewQuery(Ce,5),e.\u0275\u0275viewQuery(ve,5),e.\u0275\u0275viewQuery(le,5),e.\u0275\u0275viewQuery(xe,5),e.\u0275\u0275viewQuery(b,5)),s&2){let u;e.\u0275\u0275queryRefresh(u=e.\u0275\u0275loadQuery())&&(i.composerItem=u.first),e.\u0275\u0275queryRefresh(u=e.\u0275\u0275loadQuery())&&(i.composerItemComment=u.first),e.\u0275\u0275queryRefresh(u=e.\u0275\u0275loadQuery())&&(i.feedComments=u.first),e.\u0275\u0275queryRefresh(u=e.\u0275\u0275loadQuery())&&(i.feedItem=u.first),e.\u0275\u0275queryRefresh(u=e.\u0275\u0275loadQuery())&&(i.feedItemContent=u.first),e.\u0275\u0275queryRefresh(u=e.\u0275\u0275loadQuery())&&(i.itemMessage=u.first),e.\u0275\u0275queryRefresh(u=e.\u0275\u0275loadQuery())&&(i.feedItemActionsButton=u.first)}},inputs:{feedType:"feedType",isEditMode:"isEditMode",schemaName:"schemaName",item:"item",allowExternalPost:"allowExternalPost",hasExternalLoadMore:"hasExternalLoadMore",isQuotationMode:"isQuotationMode",isTheLastComment:"isTheLastComment",useCustomPhoto:"useCustomPhoto",useCustomHead:"useCustomHead",disableLikesComments:"disableLikesComments",showMenuActionItems:"showMenuActionItems",isDraftItem:"isDraftItem",itemActionItems:"itemActionItems",disableSelectionOptions:"disableSelectionOptions",readingMode:"readingMode",customVisibleItemActionsMenu:"customVisibleItemActionsMenu"},outputs:{messageDeleted:"messageDeleted",messageEdited:"messageEdited",readMoreClick:"readMoreClick",selectionChange:"selectionChange"},ngContentSelectors:X,decls:35,vars:45,consts:[["feedItem",""],["defaultPhoto",""],["feedItemContent",""],["defaultHead",""],["feedComments",""],["feedItemActionsButton","","trigger","crtMenuTrigger"],["itemActionsMenu",""],["composerItem",""],["composerItemComment",""],["itemMessage",""],[1,"feed-item",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"inner"],["crtFullSizeImage","",1,"feed-item-content",3,"mouseenter","mouseleave","focusin","focusout","ngClass"],[3,"ngClass"],[1,"feed-item-content-user"],[1,"feed-item-content-user-head"],["class","feed-item-content-user-head-posted",4,"ngIf","ngIfElse"],["data-qa","feed-item-actions-button","class","feed-item-content-user-head-actions-button","icon","kebab","iconSize","extra-large","iconPosition","only-icon","displayType","text",3,"crtMenuTriggerFor","crtMenuTriggerData","title","menuOpened","menuClosed",4,"ngIf"],[1,"feed-item-content-user-job"],[1,"feed-item-content-user-desc"],["class","feed-item-content-user-desc-draft",4,"ngIf"],["class","feed-item-content-user-desc-divider",4,"ngIf"],["class","feed-item-content-user-desc-external",4,"ngIf"],[1,"feed-item-content-user-desc-date"],[4,"ngIf"],[3,"messageId","message","entitySchemaName","primaryColumnValue","schemaUId","forExternal","allowExternalPost","selection","messageChangesCanceled","messagePosted","selectionChange",4,"ngIf"],[3,"messageId","message","primaryColumnValue","schemaUId","parentMessageId","forExternal","allowExternalPost","selection","messageChangesCanceled","messagePosted","selectionChange",4,"ngIf"],["tabindex","-1","crtReadMore","","class","feed-item-content-desc",3,"fitToBlockquote","innerHTML",4,"ngIf"],["crtQuotedReadMore","","class","feed-item-content-desc",3,"hasExternalLoadMore","fitToBlockquote","innerHTML","readMoreClick",4,"ngIf"],["togglePosition","after","toggleType","material","class","feed-item-attachments",3,"expanded","fullWidthHeader","title",4,"ngIf"],["class","feed-item-content-btn-group",3,"ngClass",4,"ngIf"],[3,"newComment","removeComment","selectionChange","hidden","isVisible","entityId","schemaUId","messageId","feedType","schemaName","allowExternalPost","disableSelectionOptions","readingMode"],[3,"contact"],[1,"feed-item-content-user-head-posted"],["mode","'preventDefault'",1,"feed-item-content-user-link",3,"clicked","href","caption"],["mode","'preventDefault'","class","feed-item-content-user-link",3,"href","caption","clicked",4,"ngIf"],["data-qa","feed-item-actions-button","icon","kebab","iconSize","extra-large","iconPosition","only-icon","displayType","text",1,"feed-item-content-user-head-actions-button",3,"menuOpened","menuClosed","crtMenuTriggerFor","crtMenuTriggerData","title"],[3,"items"],[1,"feed-item-content-user-desc-draft"],["color","var(--crt-palette-navigation-primary-500)"],[1,"feed-item-content-user-desc-divider"],[1,"feed-item-content-user-desc-external"],["svgIcon","external-user-icon"],[1,"feed-item-content-user-desc-external-caption"],[3,"messageChangesCanceled","messagePosted","selectionChange","messageId","message","entitySchemaName","primaryColumnValue","schemaUId","forExternal","allowExternalPost","selection"],[3,"messageChangesCanceled","messagePosted","selectionChange","messageId","message","primaryColumnValue","schemaUId","parentMessageId","forExternal","allowExternalPost","selection"],["tabindex","-1","crtReadMore","",1,"feed-item-content-desc",3,"fitToBlockquote","innerHTML"],["crtQuotedReadMore","",1,"feed-item-content-desc",3,"readMoreClick","hasExternalLoadMore","fitToBlockquote","innerHTML"],["togglePosition","after","toggleType","material",1,"feed-item-attachments",3,"expanded","fullWidthHeader","title"],[1,"file-list-gallery",3,"items","itemConfig","selectable"],[1,"feed-item-content-btn-group",3,"ngClass"],["icon","feed-add-comment","iconPosition","left-icon","displayType","text","data-qa","feed-add-comments-button",3,"title","clicked",4,"ngIf"],["class","feed-item-content-btn","icon","feed-comment","iconPosition","left-icon","displayType","text","data-qa","feed-comments-button",3,"ngClass","title","clicked",4,"ngIf"],[3,"narrowMode","messageId","reactionsCounters"],["icon","feed-add-comment","iconPosition","left-icon","displayType","text","data-qa","feed-add-comments-button",3,"clicked","title"],["icon","feed-comment","iconPosition","left-icon","displayType","text","data-qa","feed-comments-button",1,"feed-item-content-btn",3,"clicked","ngClass","title"]],template:function(s,i){if(s&1){const u=e.\u0275\u0275getCurrentView();e.\u0275\u0275projectionDef(x),e.\u0275\u0275elementStart(0,"div",10,0),e.\u0275\u0275template(2,ge,1,0,"ng-content",11)(3,Oe,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(5,"div",12)(6,"div",13,2),e.\u0275\u0275listener("mouseenter",function(){return e.\u0275\u0275restoreView(u),e.\u0275\u0275resetView(i.isHovered=!0)})("mouseleave",function(){return e.\u0275\u0275restoreView(u),e.\u0275\u0275resetView(i.isHovered=!1)})("focusin",function(){return e.\u0275\u0275restoreView(u),e.\u0275\u0275resetView(i.onFocusChange())})("focusout",function(){return e.\u0275\u0275restoreView(u),e.\u0275\u0275resetView(i.onFocusChange())}),e.\u0275\u0275element(8,"div",14),e.\u0275\u0275elementStart(9,"div",15)(10,"div",16),e.\u0275\u0275template(11,De,2,0,"div",17)(12,Le,4,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(14,Se,6,8,"crt-button",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"div",19),e.\u0275\u0275elementStart(16,"div",20),e.\u0275\u0275template(17,Ae,4,3,"div",21)(18,Be,1,0,"div",22)(19,Ue,5,0,"div",23)(20,be,1,0,"div",22),e.\u0275\u0275elementStart(21,"div",24)(22,"span"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"smartDateTimeFormat"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275projection(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,Fe,1,0,"ng-content",25)(27,we,2,8,"crt-feed-composer",26)(28,We,2,8,"crt-feed-composer",27)(29,Ke,4,9,"div",28)(30,Ve,4,10,"div",29)(31,Ne,3,8,"crt-expansion-panel",30)(32,He,4,8,"div",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"crt-feed-comments",32,4),e.\u0275\u0275listener("newComment",function(pe){return e.\u0275\u0275restoreView(u),e.\u0275\u0275resetView(i.onNewComment(pe))})("removeComment",function(){return e.\u0275\u0275restoreView(u),e.\u0275\u0275resetView(i.onRemoveComment())})("selectionChange",function(pe){return e.\u0275\u0275restoreView(u),e.\u0275\u0275resetView(i.onSelectionChange(pe))}),e.\u0275\u0275elementEnd()()()}if(s&2){const u=e.\u0275\u0275reference(4),H=e.\u0275\u0275reference(13);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(33,q,!i.isComment())),e.\u0275\u0275attribute("data-qa","feed_"+i.item.Id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.useCustomPhoto)("ngIfElse",u),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(35,te,i.isComment()||i.areCommentsShown===!0,i.visibleItemActionsMenu)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction6(38,ie,!i.isComment()&&i.areCommentsShown,!i.isComment()&&i.areCommentsShown&&!i.hasInnerComments(),i.isComment()&&!i.isTheLastComment,i.isTheLastComment,i.isTheLastComment||!i.isComment()&&i.areCommentsShown&&!i.hasInnerComments(),i.isComment())),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.useCustomHead)("ngIfElse",H),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.customVisibleItemActionsMenu()),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.isDraftItem),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isDraftItem),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.externalTagVisible),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.externalTagVisible),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,31,i.item.CreatedOn)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!i.item.Message),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isEditMode&&!i.isComment()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isEditMode&&i.isComment()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isEditMode&&!i.useQuotedMessages()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isEditMode&&i.useQuotedMessages()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isEditMode&&i.files&&i.files.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.disableLikesComments),e.\u0275\u0275advance(),e.\u0275\u0275property("hidden",!i.areCommentsShown)("isVisible",i.areCommentsShown)("entityId",i.item.EntityId)("schemaUId",i.item.EntitySchemaUId)("messageId",i.item.Id)("feedType",i.feedType)("schemaName",i.schemaName)("allowExternalPost",i.allowExternalPost)("disableSelectionOptions",i.disableSelectionOptions)("readingMode",i.readingMode)}},dependencies:[se.r,ne.NgClass,ne.NgIf,a.MatIcon,R.B,j.IK,Q.O,oe.h,re.Z,ce.T,_e.D,fe.o,W.j,$.w,K.N,M.D,Z.B,k.b,ne.LowerCasePipe,G.O,he.v,z.TranslatePipe],styles:[`body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}[dir=rtl] .feed-item .post-vertical-line{right:-31px;border-left:none;border-right:1px solid var(--crt-palette-border-500)}[dir=rtl] .feed-item .post-vertical-line-dashed{border-left:none;border-right:1px dashed var(--crt-palette-border-500)}[dir=rtl] .feed-item .comment-vertical-line{border-left:none;border-right:1px solid var(--crt-palette-border-500)}[dir=rtl] .feed-item .comment-vertical-line-dashed{border-left:none;border-right:1px dashed var(--crt-palette-border-500)}[dir=rtl] .feed-item .comment-horizontal-line{right:-78px}.feed-item{display:flex;container-type:inline-size}.feed-item.feed-item-post{margin-bottom:4px}.feed-item .post-vertical-line{left:-31px;top:24px;height:100%;width:31px;position:absolute;border-left:1px solid var(--crt-palette-border-500)}.feed-item .post-vertical-line-dashed{border-left:1px dashed var(--crt-palette-border-500)}.feed-item .comment-vertical-line{border-left:1px solid var(--crt-palette-border-500)}.feed-item .comment-vertical-line-dashed{border-left:1px dashed var(--crt-palette-border-500)}.feed-item .comment-horizontal-bottom-line-dashed{border-bottom:1px dashed var(--crt-palette-border-500)}.feed-item .comment-horizontal-line{left:-78px;top:8px;width:30px;height:calc(100% + 15px);position:absolute;border-top:1px solid var(--crt-palette-border-500)}.feed-item .inner{width:calc(100% - 32px)}.feed-item .inner .feed-item-content{position:relative;margin-top:8px;margin-inline-start:15px;width:auto}.feed-item .inner .feed-item-content-user-head{display:flex;justify-content:flex-start}.feed-item .inner .feed-item-content-user-head-posted{font-family:var(--crt-body-1-font-family);font-size:var(--crt-body-1-font-size);line-height:var(--crt-body-1-line-height);font-weight:var(--crt-body-1-font-weight);letter-spacing:var(--crt-body-1-letter-spacing);text-transform:var(--crt-body-1-text-transform);-webkit-font-smoothing:antialiased;margin-right:16px}.feed-item .inner .feed-item-content-user-head-posted crt-link{display:inline-flex}.feed-item .inner .feed-item-content-user-head-actions-button{height:18px;position:relative;bottom:8px;visibility:hidden}.feed-item .inner .feed-item-content-user-head-actions-button mat-icon{transform:rotate(90deg)}.feed-item .inner .feed-item-content-user-job{display:none}.feed-item .inner .feed-item-content-user-desc{display:flex;gap:8px}.feed-item .inner .feed-item-content-user-desc-external{display:flex;gap:2px;max-height:20px;border-radius:16px;background-color:#d2eed0;color:#11560a}.feed-item .inner .feed-item-content-user-desc-external mat-icon{height:16px;width:16px;padding:2px 2px 0}.feed-item .inner .feed-item-content-user-desc-external-caption,.feed-item .inner .feed-item-content-user-desc-draft{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;align-self:center}.feed-item .inner .feed-item-content-user-desc-draft crt-chip .crt-chip-focus-overlay{background-color:var(--crt-palette-navigation-primary-500);opacity:.2}.feed-item .inner .feed-item-content-user-desc-divider{margin-top:4px;width:0px;height:12px;border-left:1px solid var(--crt-palette-foreground-100)}.feed-item .inner .feed-item-content-user-desc-date{font-family:var(--crt-body-2-font-family);font-size:var(--crt-body-2-font-size);line-height:var(--crt-body-2-line-height);font-weight:var(--crt-body-2-font-weight);letter-spacing:var(--crt-body-2-letter-spacing);text-transform:var(--crt-body-2-text-transform);-webkit-font-smoothing:antialiased;display:inline-flex;color:var(--crt-palette-label-500)}.feed-item .inner .feed-item-content-desc{font-family:var(--crt-body-2-font-family);font-size:var(--crt-body-2-font-size);line-height:var(--crt-body-2-line-height);font-weight:var(--crt-body-2-font-weight);letter-spacing:var(--crt-body-2-letter-spacing);text-transform:var(--crt-body-2-text-transform);-webkit-font-smoothing:antialiased;margin-top:8px;overflow-wrap:anywhere;overflow-x:auto}@-moz-document url-prefix(){.feed-item .inner .feed-item-content-desc{scrollbar-width:thin}}.feed-item .inner .feed-item-content-desc p{margin:0;max-width:calc(100% - 32px)}.feed-item .inner .feed-item-content-desc *:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}.feed-item .inner .feed-item-content-btn-group{display:flex;flex-wrap:wrap}.feed-item .inner .feed-item-content-btn-group .crt-button{margin-inline-end:16px}.feed-item .inner .feed-item-content-btn-group .crt-button.feed-item-content-btn-active{color:var(--crt-palette-primary-500);stroke:var(--crt-palette-primary-500)}.feed-item .inner .feed-item-content .feed-item-attachments{padding:0}.feed-item .inner .feed-item-content .feed-item-attachments crt-expansion-panel-header .expansion-panel-title{width:auto}.feed-item .inner .feed-item-content .feed-item-attachments crt-expansion-panel-header .expansion-panel-title .expansion-panel-tools{padding-inline-start:0}.feed-item .inner .feed-item-content .feed-item-attachments crt-expansion-panel-header .expansion-panel-header{justify-content:flex-end}.feed-item .inner .feed-item-content .feed-item-attachments crt-gallery .crt-gallery-items-wrap{padding:0}.feed-item .inner .feed-item-content.actions-visible .feed-item-content-user-head-actions-button,.feed-item .inner .feed-item-content:focus-within .feed-item-content-user-head-actions-button{visibility:unset}.feed-item .inner .feed-item-content.feed-comment{padding-bottom:24px}.feed-item .inner .feed-item-content-btn-group{margin-bottom:-8px}@container (max-width: 370px){.inner .feed-item-content .feed-item-content-user-desc-external-caption{display:none}}@container (min-width: 370px){.feed-item-content-user-desc-external{padding:0 6px}}
`],encapsulation:2})}};(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",String)],J.prototype,"feedType",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Object)],J.prototype,"isEditMode",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",String)],J.prototype,"schemaName",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Object)],J.prototype,"item",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Boolean)],J.prototype,"allowExternalPost",void 0),(0,c.__decorate)([(0,B.j)(),(0,c.__metadata)("design:type",e.EventEmitter)],J.prototype,"messageDeleted",void 0),(0,c.__decorate)([(0,B.j)(),(0,c.__metadata)("design:type",e.EventEmitter)],J.prototype,"messageEdited",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Object)],J.prototype,"isTheLastComment",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Object)],J.prototype,"useCustomPhoto",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Object)],J.prototype,"useCustomHead",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Object)],J.prototype,"disableLikesComments",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Object)],J.prototype,"showMenuActionItems",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Object)],J.prototype,"isDraftItem",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Array)],J.prototype,"itemActionItems",void 0),(0,c.__decorate)([(0,B.j)(),(0,c.__metadata)("design:type",Object)],J.prototype,"selectionChange",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Boolean)],J.prototype,"disableSelectionOptions",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Number)],J.prototype,"readingMode",void 0),(0,c.__decorate)([(0,y.k)(),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[]),(0,c.__metadata)("design:returntype",Boolean)],J.prototype,"customVisibleItemActionsMenu",null),J=(0,c.__decorate)([(0,V.v)({type:"crt.FeedItem",reuseStrategy:U.B.Reuse}),(0,c.__metadata)("design:paramtypes",[L.A,Y.t,l.r,C.s,_.oq,e.ChangeDetectorRef,z.TranslateService,E.x,Window])],J)},57134:(S,F,n)=>{n.d(F,{G:()=>ne});var t=n(59131),c=n.n(t),o=n(6530),e=n(67159),w=n(64429),f=n(91065),y=n(28399),B=n.n(y),V=n(62278),U=n.n(V),z=n(36486),r=n.n(z),C=n(86575),I=n(72882),L=n(64171),A=n(60575),m=n(40297),d=n.n(m),l=n(58433),h=n(79111),v=n(41571),P=n(86432),D=n(94404),_=n(79772),E=n.n(_);function O(ee,a){if(ee&1&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275element(1,"crt-lottie",6)(2,"crt-label",7),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),ee&2){const T=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("config",T.noDataAnimationOptions),t.\u0275\u0275advance(),t.\u0275\u0275property("caption",t.\u0275\u0275pipeBind1(3,2,"Feed.NoDataContainerLabel"))}}function N(ee,a){if(ee&1){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"crt-feed-item",8),t.\u0275\u0275listener("messageDeleted",function(j){t.\u0275\u0275restoreView(T);const Q=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Q.onMessageDeleted(j))})("messageEdited",function(j){t.\u0275\u0275restoreView(T);const Q=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Q.onMessageEdited(j))})("selectionChange",function(j){t.\u0275\u0275restoreView(T);const Q=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Q.onSelectionChange(j))}),t.\u0275\u0275elementEnd()()}if(ee&2){const T=a.$implicit,R=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("item",T)("feedType",R.feedType)("schemaName",R.schemaName)("allowExternalPost",R.allowExternalPost)("disableSelectionOptions",R.disableSelectionOptions)("readingMode",R.readingMode)}}function Y(ee,a){if(ee&1){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275listener("crtObserveElementInViewportStateChange",function(j){t.\u0275\u0275restoreView(T);const Q=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Q.onLastTableRowInViewportStateChange(j))}),t.\u0275\u0275elementEnd()}}function se(ee,a){if(ee&1&&t.\u0275\u0275element(0,"crt-skeleton-loader",10),ee&2){const T=t.\u0275\u0275nextContext();t.\u0275\u0275property("styles",T.skeletonStyles)}}class ne{get feedMessages(){return this.feedType===e.Q.User?this._feedMessages:this._feedMessages.filter(a=>a.EntityId===this.masterRecordId)}set feedMessages(a){a&&(this._feedMessages=a)}set feedOffsetDate(a){this._offsetDate=a}set feedMessagesPage(a){a&&this._onMessagesLoaded(a,!1,!1)}constructor(a,T,R,j){this._feedNotificationService=a,this._feedMessageService=T,this._changeDetectorRef=R,this._googleTagManager=j,this._destroyed$=new V.Subject,this._newMessageDebounce=2e3,this._newMessageDebounceFn=(0,y.debounce)(this._onNewMessage,this._newMessageDebounce),this._feedSortColumn=C.K.CreatedOn,this._feedMessages=[],this.loading=!1,this.noDataAnimationOptions=null,this.feedMessagesChange=new t.EventEmitter,this.feedSortColumnChange=new t.EventEmitter,this.showBlankSlate=!0,this.offsetDateChange=new t.EventEmitter,this.selectionChange=new t.EventEmitter,this.readingMode=w.w.All}_onNewMessage(a,T,R){this._feedMessageService.getMessage(a,T,R,this.readingMode).subscribe(j=>this._onMessagesLoaded(j,!0,!0))}_onMessagesLoaded(a,T,R){if(this.loading=!1,this._offsetDate||(this._feedMessages=[]),a.length>0){const j=a.filter(Q=>!this._feedMessages.some(oe=>oe.Id===Q.Id));if(j.length===0){const Q=this._feedMessages.filter(oe=>!a.some(re=>oe.Id===re.Id));this._feedMessages=this._concatFeedMessages(T,a,Q)}else this._feedMessages=this._concatFeedMessages(T,j,this._feedMessages);this.feedMessagesChange.emit(this.feedMessages),(R||!this._offsetDate)&&this._setOffsetDate()}this._changeDetectorRef.markForCheck()}_onFeedPostPublished(a){this._isInsertOperation(a)&&this._isUserNotificationByRecordId(a)&&this._newMessageDebounceFn(this.schemaName,this.masterRecordId,a.MessageId)}_onMessageNotification(a){if(this._isUserNotificationByRecordId(a)&&this._isNotComment(a))switch(a.Operation){case f.x.Insert:this._feedMessages.some(T=>T.Id===a.MessageId)||this._newMessageDebounceFn(a.EntityName,a.EntityId,a.MessageId);break;case f.x.ForceUpdate:this._newMessageDebounceFn(a.EntityName,a.EntityId,a.MessageId);break;case f.x.Delete:this._onMessageDeleted(a.MessageId);break}}_onMessageDeleted(a){const T=this._feedMessages.find(R=>R.Id===a);T&&this.onMessageDeleted(T)}_concatFeedMessages(a,T,R){return a?T.concat(R):R.concat(T)}_isUserNotificationByRecordId(a){return this.feedType===e.Q.User||a.EntityId===this.masterRecordId}_isInsertOperation(a){return a.Operation===f.x.Insert}_isNotComment(a){return(0,y.isEmpty)(a.ParentId)||a.ParentId===o.To}_sendGTMData(){const a={moduleName:"Feed",schemaName:"FeedPosts",action:"FeedContentScrolled"};this._googleTagManager.track(a)}_setOffsetDate(){const a=this._feedMessages[this._feedMessages.length-1];this._offsetDate=this._feedSortColumn===C.K.CreatedOn?a?.CreatedOn:a?.LastActionOn,this.offsetDateChange.emit(this._offsetDate)}onLastTableRowInViewportStateChange(a){if(a.visible===!1||a.visible===this._scrolledToEnd){this._scrolledToEnd=a.visible;return}this._scrolledToEnd=a.visible,this._sendGTMData(),!(this.loading||!this._feedMessages||this._feedMessages.length===0)&&this._setOffsetDate()}ngOnInit(){this.noDataAnimationOptions={animationData:()=>n.e(4772).then(n.t.bind(n,24772,19)),autoplay:!0,loop:!1},this._feedNotificationService.feedPostPublishedEvent.pipe((0,z.takeUntil)(this._destroyed$)).subscribe(a=>this._onFeedPostPublished(a)),this._feedNotificationService.newMessageEvent.pipe((0,z.takeUntil)(this._destroyed$)).subscribe(a=>this._onMessageNotification(a)),this.feedSortColumn?.pipe((0,z.takeUntil)(this._destroyed$))?.subscribe(a=>{this._feedSortColumn!==a&&(this._feedSortColumn=a,this.feedSortColumnChange.emit(a),this.reloadFeed())})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}reloadFeed(){this._offsetDate=null,this.offsetDateChange.emit(null)}onMessageDeleted(a){const T=this._feedMessages.indexOf(a);T!==-1&&(this._feedMessages.splice(T,1),this.feedMessagesChange.emit(this._feedMessages),this._changeDetectorRef.markForCheck())}onMessageEdited(a){const T=this._feedMessages.find(R=>R.Id===a);T&&this._feedMessageService.getMessage(T.EntitySchemaName,T.EntityId,a,this.readingMode).subscribe(R=>{if(R.length>0){const j=R[0],Q=this._feedMessages.findIndex(oe=>oe.Id===j.Id);Q!==-1&&(this._feedMessages[Q]=j,this.feedMessagesChange.emit(this._feedMessages),this._changeDetectorRef.markForCheck())}})}onSelectionChange(a){this.selectionChange.next(a)}static{this.\u0275fac=function(T){return new(T||ne)(t.\u0275\u0275directiveInject(I.Z),t.\u0275\u0275directiveInject(L.t),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(A.A))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:ne,selectors:[["crt-feed-posts"]],inputs:{feedMessages:"feedMessages",feedOffsetDate:"feedOffsetDate",feedMessagesPage:"feedMessagesPage",schemaName:"schemaName",masterRecordId:"masterRecordId",feedType:"feedType",feedSortColumn:"feedSortColumn",allowExternalPost:"allowExternalPost",showBlankSlate:"showBlankSlate",disableSelectionOptions:"disableSelectionOptions",readingMode:"readingMode"},outputs:{feedMessagesChange:"feedMessagesChange",feedSortColumnChange:"feedSortColumnChange",offsetDateChange:"offsetDateChange",selectionChange:"selectionChange"},decls:5,vars:4,consts:[["class","feed-no-data-container",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"observe-last-row"],["crtObserveElementInViewport","",3,"crtObserveElementInViewportStateChange",4,"ngIf"],[3,"styles",4,"ngIf"],[1,"feed-no-data-container"],[3,"config"],[1,"feed-no-data-container-label",3,"caption"],[3,"messageDeleted","messageEdited","selectionChange","item","feedType","schemaName","allowExternalPost","disableSelectionOptions","readingMode"],["crtObserveElementInViewport","",3,"crtObserveElementInViewportStateChange"],[3,"styles"]],template:function(T,R){T&1&&(t.\u0275\u0275template(0,O,4,4,"div",0)(1,N,2,6,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275template(3,Y,1,0,"div",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,se,1,1,"crt-skeleton-loader",4)),T&2&&(t.\u0275\u0275property("ngIf",!R.loading&&(R.feedMessages==null?null:R.feedMessages.length)===0&&R.showBlankSlate),t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",R.feedMessages),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",R.feedMessages==null?null:R.feedMessages.length),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",R.loading))},dependencies:[m.NgForOf,m.NgIf,l.W,h.V,v.w,P.w,D.G,_.TranslatePipe],styles:["[_nghost-%COMP%]{height:100%}.new-feed-messages[_ngcontent-%COMP%]{color:var(--crt-palette-primary-500);background:var(--crt-palette-primary-50);text-align:center;cursor:pointer}.reload-feed-icon[_ngcontent-%COMP%]{height:12px;width:10px;margin:0 5px}.feed-no-data-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}.feed-no-data-container[_ngcontent-%COMP%]   ng-lottie[_ngcontent-%COMP%]{cursor:pointer}"]})}}},5680:(S,F,n)=>{n.d(F,{B:()=>P});var t=n(59131),c=n.n(t),o=n(79772),e=n.n(o),w=n(59969),f=n(28399),y=n.n(f),B=n(29957),V=n.n(B),U=n(2106),z=n(72615),r=n(40297),C=n.n(r),I=n(52989),L=n.n(I);function A(D,_){if(D&1){const E=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(E);const N=t.\u0275\u0275nextContext().$implicit,Y=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Y.onReactionClick(N))})("mouseenter",function(){t.\u0275\u0275restoreView(E);const N=t.\u0275\u0275nextContext().$implicit,Y=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Y.onReactionMouseEnter(N))})("focusin",function(){t.\u0275\u0275restoreView(E);const N=t.\u0275\u0275nextContext().$implicit,Y=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Y.onReactionMouseEnter(N))})("focusout",function(){t.\u0275\u0275restoreView(E);const N=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(N.onReactionMouseLeave())})("keyup.enter",function(){t.\u0275\u0275restoreView(E);const N=t.\u0275\u0275nextContext().$implicit,Y=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Y.onReactionClick(N))}),t.\u0275\u0275element(2,"mat-icon",5),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(D&2){let E;const O=t.\u0275\u0275nextContext().$implicit,N=t.\u0275\u0275nextContext();t.\u0275\u0275classMapInterpolate1("feed-reaction ",O.currentUserReacted?"feed-reaction-selected":"",""),t.\u0275\u0275attributeInterpolate2("data-qa","",N.messageId,"-",O.type,"-feed-reaction"),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind1(1,10,N.getReactionCaptionKey(O)))("aria-pressed",(E=O.currentUserReacted)!==null&&E!==void 0?E:!1),t.\u0275\u0275advance(2),t.\u0275\u0275property("svgIcon",N.getReactionIcon(O)),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,12,N.getCounterText(O))," ")}}function m(D,_){if(D&1&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),D&2){const E=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(E.contactName)}}function d(D,_){if(D&1&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),D&2){const E=t.\u0275\u0275nextContext().count,O=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(O.getExpandedExtraReactionsText(E))}}function l(D,_){if(D&1&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,m,2,1,"span",8)(2,d,2,1,"span",8),t.\u0275\u0275elementEnd()),D&2){const E=_.index,O=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",E<O.expandedReactionsLimit),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",E===O.expandedReactionsLimit)}}function h(D,_){if(D&1&&(t.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"strong"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(5,l,3,2,"div",1),t.\u0275\u0275elementEnd()),D&2){const E=t.\u0275\u0275nextContext().$implicit,O=t.\u0275\u0275nextContext();t.\u0275\u0275attributeInterpolate2("data-qa","",O.messageId,"-",E.type,"-feed-reaction-expandable"),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,5,O.getReactionCaptionKey(E))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",O.getFilteredReactions(E.type))}}function v(D,_){if(D&1&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,A,5,14,"div",2)(2,h,6,7,"div",3),t.\u0275\u0275elementContainerEnd()),D&2){const E=_.$implicit,O=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",O.showCounter(E)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",O.isReactionExpanded(E))}}class P{constructor(_,E,O,N){this._reactionService=_,this._changeDetectorRef=E,this._translateService=O,this._liveAnnouncementService=N,this._debounceTime=300,this._debounceOnReactionMouseEnter=(0,f.debounce)(Y=>this._prepareReactionsExpanding(Y),this._debounceTime,{}),this.expandedReactionsLimit=10,this._subscriptions=[],this._reactions=[],this._expandedReactionsType=[],this.narrowMode=!1}_tooggleLike(_){this._reactionChanging||(this._reactionChanging=!0,_.currentUserReacted?(_.currentUserReacted=!1,_.count--,this._subscriptions.push(this._reactionService.dislikeMessage(this.messageId).subscribe(()=>this._onReactionProcessed())),this._liveAnnouncementService.announce("Feed.Reactions.LikeRemoved")):(_.currentUserReacted=!0,_.count++,this._subscriptions.push(this._reactionService.likeMessage(this.messageId).subscribe(()=>this._onReactionProcessed())),this._liveAnnouncementService.announce("Feed.Reactions.PostLiked")))}_onReactionProcessed(){this._resetFetchedReactions(),this._changeDetectorRef.markForCheck(),this._reactionChanging=!1}_resetFetchedReactions(){this._fetchedReactions=!1,this._expandedReactionsType=[]}_prepareReactionsExpanding(_){if(this._fetchedReactions)return _();this._subscriptions.push(this._reactionService.getMessageReactions(this.messageId).subscribe(E=>{this._fetchedReactions=!0,this._reactions=E,_()}))}showCounter(_){return _.count&&_.count>0||_.type===U.U.Like}getReactionIcon(_){return _.currentUserReacted?"feed-heart-filled":"feed-heart"}getCounterText(_){return _.count>0||this.narrowMode?_.count.toString():this.getReactionCaptionKey(_)}onReactionClick(_){_.type===U.U.Like&&this._tooggleLike(_)}onReactionMouseEnter(_){_.count!==0&&this._debounceOnReactionMouseEnter(()=>{this._expandedReactionsType.push(_.type),this._changeDetectorRef.markForCheck()})}onReactionMouseLeave(){this._debounceOnReactionMouseEnter.cancel(),this._expandedReactionsType=[],this._changeDetectorRef.markForCheck()}getReactionCaptionKey(_){return _.type===U.U.Like?"Feed.Reactions.Like":""}getExpandedExtraReactionsText(_){const E=this._translateService.instant("Feed.Reactions.ExtraReactionsTemplate"),O=_-this.expandedReactionsLimit;return B.String.format(E,O>0?O:0)}getFilteredReactions(_){return this._reactions.filter(E=>E.type===_)}isReactionExpanded(_){return this._expandedReactionsType.includes(_.type)}ngOnDestroy(){this._subscriptions.forEach(_=>_.unsubscribe())}static{this.\u0275fac=function(E){return new(E||P)(t.\u0275\u0275directiveInject(z.d),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(o.TranslateService),t.\u0275\u0275directiveInject(w.DW))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:P,selectors:[["crt-feed-reactions"]],inputs:{reactionsCounters:"reactionsCounters",messageId:"messageId",narrowMode:"narrowMode"},decls:2,vars:1,consts:[[1,"feed-reactions",3,"mouseleave"],[4,"ngFor","ngForOf"],["role","button","tabindex","0",3,"class","click","mouseenter","focusin","focusout","keyup.enter",4,"ngIf"],["class","feed-reaction-expandable",4,"ngIf"],["role","button","tabindex","0",3,"click","mouseenter","focusin","focusout","keyup.enter"],[1,"feed-reaction-icon",3,"svgIcon"],[1,"feed-reaction-expandable"],[1,"feed-reaction-expandable-title"],[4,"ngIf"]],template:function(E,O){E&1&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275listener("mouseleave",function(){return O.onReactionMouseLeave()}),t.\u0275\u0275template(1,v,3,2,"ng-container",1),t.\u0275\u0275elementEnd()),E&2&&(t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",O.reactionsCounters))},dependencies:[r.NgForOf,r.NgIf,I.MatIcon,o.TranslatePipe],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.feed-reactions[_ngcontent-%COMP%]{display:inline-flex;height:100%}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction[_ngcontent-%COMP%]{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;height:100%;align-items:center;display:flex;color:var(--crt-palette-foreground-500);margin-inline-end:5px;cursor:pointer;padding-inline-end:8px;border-radius:4px}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction[_ngcontent-%COMP%]:hover{color:var(--crt-palette-primary-500);stroke:var(--crt-palette-primary-500)}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction-expandable[_ngcontent-%COMP%]{font-family:var(--crt-overline-font-family);font-size:var(--crt-overline-font-size);line-height:var(--crt-overline-line-height);font-weight:var(--crt-overline-font-weight);letter-spacing:var(--crt-overline-letter-spacing);text-transform:var(--crt-overline-text-transform);-webkit-font-smoothing:antialiased;border:1px solid var(--crt-palette-border-500);background:var(--crt-palette-background-500);opacity:1;padding:8px;border-radius:4px;position:absolute;bottom:25px;z-index:2;white-space:nowrap}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction-expandable-title[_ngcontent-%COMP%]{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;margin-bottom:5px}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction-icon[_ngcontent-%COMP%]{width:16px;height:16px;margin-inline-end:4px}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction[_ngcontent-%COMP%]:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}"]})}}},33652:(S,F,n)=>{n.d(F,{D:()=>r});var t=n(6530),c=n(41314),o=n(90983),e=n(59131),w=n.n(e),f=n(19816),y=n(73916),B=n(40297),V=n.n(B);function U(C,I){if(C&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"img",4),e.\u0275\u0275elementContainerEnd()),C&2){const L=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("src",L.getPhotoUrl(),e.\u0275\u0275sanitizeUrl)}}function z(C,I){if(C&1&&(e.\u0275\u0275elementStart(0,"span",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),C&2){const L=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("background",L.getColor()),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(L.getInitials())}}class r{constructor(I,L){this._contactColorService=I,this._initialsService=L}_getImageUrlById(I){return(0,c.Mc)(I)}hasPhoto(){return this.contact?.primaryImageValue&&!(0,t.gZ)(this.contact?.primaryImageValue)}getPhotoUrl(){return this.hasPhoto()?this._getImageUrlById(this.contact?.primaryImageValue):""}getInitials(){return this.contact?this._initialsService.getInitials(this.contact.displayValue):""}getContactLink(){return(0,o.TX)("Contact",this.contact?.value)}getColor(){return this._contactColorService.getNextColor(this.contact?.value)}static{this.\u0275fac=function(L){return new(L||r)(e.\u0275\u0275directiveInject(f.d),e.\u0275\u0275directiveInject(y.j))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["crt-feed-user-img"]],inputs:{contact:"contact"},decls:5,vars:5,consts:[["noPhoto",""],[1,"feed-user-img"],["tabindex","-1",3,"href"],[4,"ngIf","ngIfElse"],["alt","Contact photo",1,"contact-photo",3,"src"],[1,"contact-photo","no-photo"]],template:function(L,A){if(L&1&&(e.\u0275\u0275elementStart(0,"div",1)(1,"a",2),e.\u0275\u0275template(2,U,2,1,"ng-container",3)(3,z,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),L&2){const m=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275attributeInterpolate1("data-qa","",A.contact==null?null:A.contact.value,"-feed-user-img"),e.\u0275\u0275propertyInterpolate("href",A.getContactLink(),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",A.hasPhoto())("ngIfElse",m)}},dependencies:[B.NgIf],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.feed-user-img[_ngcontent-%COMP%]{display:inline-block}.feed-user-img[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.feed-user-img[_ngcontent-%COMP%]   .contact-photo[_ngcontent-%COMP%]{border-radius:50%;width:32px;height:32px}.feed-user-img[_ngcontent-%COMP%]   .contact-photo.no-photo[_ngcontent-%COMP%]{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;text-align:center;display:flex;flex-direction:column;justify-content:center;min-width:32px;min-height:32px;color:var(--crt-palette-background-500)}"]})}}},47062:(S,F,n)=>{n.d(F,{F:()=>W});var t=n(5960),c=n.n(t),o=n(59131),e=n.n(o),w=n(61541),f=n(77592),y=n(34760),B=n(1034),V=n(96677),U=n(75456),z=n(10098),r=n(58001),C=n(68712),I=n(64429),L=n(67159),A=n(29423),m=n(62278),d=n.n(m),l=n(86575),h=n(23854),v=n(40297),P=n.n(v),D=n(52989),_=n.n(D),E=n(58433),O=n(4227),N=n(54653),Y=n(57134),se=n(79772),ne=n.n(se);const ee=["selectionActionsPanel"],a=["feedWrap"],T=["crtFeedPosts"],R=["*"];function j($,K){$&1&&o.\u0275\u0275element(0,"crt-skeleton-loader")}function Q($,K){if($&1){const M=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"crt-feed-composer",15),o.\u0275\u0275listener("selectionChange",function(k){o.\u0275\u0275restoreView(M);const G=o.\u0275\u0275nextContext(4);return o.\u0275\u0275resetView(G.onSelectionChange(k))}),o.\u0275\u0275elementEnd()}if($&2){const M=o.\u0275\u0275nextContext(4);o.\u0275\u0275property("primaryColumnValue",M.primaryColumnValue)("entitySchemaName",M.entitySchemaName)("allowExternalPost",M.allowExternalPost)("disableSelectionOptions",M.disableSelectionOptions)("selection",M.selection)("forExternalDefault",M.getForExternalDefault())}}function oe($,K){if($&1){const M=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",16)(1,"button",17,5),o.\u0275\u0275pipe(3,"translate"),o.\u0275\u0275element(4,"mat-icon",18)(5,"mat-icon",19),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"crt-menu",20,6),o.\u0275\u0275listener("itemSelected",function(k){o.\u0275\u0275restoreView(M);const G=o.\u0275\u0275nextContext(4);return o.\u0275\u0275resetView(G.menuItemSelected(k))}),o.\u0275\u0275elementEnd()()}if($&2){const M=o.\u0275\u0275reference(7),Z=o.\u0275\u0275nextContext(4);o.\u0275\u0275advance(),o.\u0275\u0275property("crtMenuTriggerFor",M),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(3,3,"Feed.SortButtonCaption")),o.\u0275\u0275advance(5),o.\u0275\u0275property("menuItems",Z.feedActionItems)}}function re($,K){if($&1&&(o.\u0275\u0275elementStart(0,"div",12),o.\u0275\u0275template(1,Q,1,6,"crt-feed-composer",13)(2,oe,8,5,"div",14),o.\u0275\u0275elementEnd()),$&2){const M=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",M.isPostComposerVisible),o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",M.isPostsActionsVisibled)}}function ce($,K){if($&1){const M=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",9,3),o.\u0275\u0275template(3,re,3,2,"div",10),o.\u0275\u0275elementStart(4,"crt-feed-posts",11,4),o.\u0275\u0275listener("offsetDateChange",function(k){o.\u0275\u0275restoreView(M);const G=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(G.onOffsetDateChange(k))})("feedSortColumnChange",function(k){o.\u0275\u0275restoreView(M);const G=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(G.onSortColumnChange(k))})("feedMessagesChange",function(k){o.\u0275\u0275restoreView(M);const G=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(G.onFeedMessagesChange(k))})("selectionChange",function(k){o.\u0275\u0275restoreView(M);const G=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(G.onSelectionChange(k))}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()}if($&2){const M=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!M.isUserTypeFeed),o.\u0275\u0275advance(),o.\u0275\u0275property("allowExternalPost",M.allowExternalPost)("schemaName",M.entitySchemaName)("masterRecordId",M.primaryColumnValue)("feedType",M.feedType)("feedSortColumn",M.sortChanged.asObservable())("showBlankSlate",M.showBlankSlate)("feedOffsetDate",M.offsetDate)("feedMessages",M.feedMessages)("feedMessagesPage",M.feedMessagesPage)("disableSelectionOptions",M.disableSelectionOptions)("readingMode",M.readingMode)}}function _e($,K){$&1&&(o.\u0275\u0275elementStart(0,"div",21)(1,"div",22),o.\u0275\u0275element(2,"mat-icon",23)(3,"div",24),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",25)(5,"div",26),o.\u0275\u0275element(6,"mat-icon",23),o.\u0275\u0275elementStart(7,"div",27),o.\u0275\u0275element(8,"div",28)(9,"div",29)(10,"div",29)(11,"div",29),o.\u0275\u0275elementStart(12,"div",30),o.\u0275\u0275element(13,"div",31)(14,"div",32)(15,"div",32)(16,"div",32),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"div",33)(18,"div",26),o.\u0275\u0275element(19,"mat-icon",23),o.\u0275\u0275elementStart(20,"div",27),o.\u0275\u0275element(21,"div",28)(22,"div",29)(23,"div",34),o.\u0275\u0275elementStart(24,"div",30),o.\u0275\u0275element(25,"div",32)(26,"div",32),o.\u0275\u0275elementEnd()()()()()(),o.\u0275\u0275elementStart(27,"div",26),o.\u0275\u0275element(28,"mat-icon",23),o.\u0275\u0275elementStart(29,"div",27),o.\u0275\u0275element(30,"div",35)(31,"div",29),o.\u0275\u0275elementStart(32,"div",30),o.\u0275\u0275element(33,"div",31)(34,"div",32)(35,"div",32)(36,"div",32),o.\u0275\u0275elementEnd()()()()())}function fe($,K){if($&1&&o.\u0275\u0275template(0,ce,6,12,"ng-container",7)(1,_e,37,0,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),$&2){const M=o.\u0275\u0275reference(2),Z=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",Z.canLoadFeed())("ngIfElse",M)}}let W=class Ie extends C.K{get isDesignerMode(){return this._isDesignTime}get feedActionItems(){return[{caption:"Feed.SortByCreatedOn",type:"action",code:"CreatedOn",icon:"sort-feed"},{caption:"Feed.SortByLastAction",type:"action",code:"LastActionOn",icon:"sort-feed"}]}constructor(K,M){super(K),this._isDesignTime=M,this.sortChanged=new m.Subject,this.offsetDateChange=new o.EventEmitter,this.readingMode=I.w.All,this.sortColumnChange=new o.EventEmitter,this.feedMessagesChange=new o.EventEmitter,this.feedMessages=[],this.feedMessagesPage=[],this.showBlankSlate=!0,this.selectionChange=new o.EventEmitter,this._selectionActionsPositionService=K.get(r.O)}get isUserTypeFeed(){return this.feedType===L.Q.User}get isPostComposerVisible(){return!this.isUserTypeFeed&&this.cardState!==w.n.Add}get isPostsActionsVisibled(){return this.crtFeedPosts?.feedMessages?.length>0}menuItemSelected({code:K}){this.sortChanged.next(l.K[K])}canLoadFeed(){return!this.isDesignerMode&&(this.feedType===L.Q.User||this.feedType===L.Q.Record&&!!this.entitySchemaName&&!!this.primaryColumnValue)}onOffsetDateChange(K){this.offsetDateChange.emit(K)}onFeedMessagesChange(K){this.feedMessagesChange.emit(K)}onSortColumnChange(K){this.sortColumnChange.emit(K)}onSelectionChange(){if(!this._selectionActionsPositionService.updatePosition(this.selectionActionsPanel,this.feedWrap?.nativeElement))return;const M=getSelection()?.toString();M!==this.selection&&this.selectionChange.next(M)}getForExternalDefault(){return this.readingMode===I.w.External}static{this.\u0275fac=function(M){return new(M||Ie)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(A.w,8))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:Ie,selectors:[["crt-feed"]],viewQuery:function(M,Z){if(M&1&&(o.\u0275\u0275viewQuery(ee,5,o.ElementRef),o.\u0275\u0275viewQuery(a,5,o.ElementRef),o.\u0275\u0275viewQuery(T,5)),M&2){let k;o.\u0275\u0275queryRefresh(k=o.\u0275\u0275loadQuery())&&(Z.selectionActionsPanel=k.first),o.\u0275\u0275queryRefresh(k=o.\u0275\u0275loadQuery())&&(Z.feedWrap=k.first),o.\u0275\u0275queryRefresh(k=o.\u0275\u0275loadQuery())&&(Z.crtFeedPosts=k.first)}},inputs:{offsetDate:"offsetDate",sortColumn:"sortColumn",readingMode:"readingMode",feedMessages:"feedMessages",feedMessagesPage:"feedMessagesPage",entitySchemaName:"entitySchemaName",dataSourceName:"dataSourceName",primaryColumnValue:"primaryColumnValue",primaryDisplayColumnValue:"primaryDisplayColumnValue",feedType:"feedType",cardState:"cardState",allowExternalPost:"allowExternalPost",showBlankSlate:"showBlankSlate",selection:"selection",disableSelectionOptions:"disableSelectionOptions"},outputs:{offsetDateChange:"offsetDateChange",sortColumnChange:"sortColumnChange",feedMessagesChange:"feedMessagesChange",selectionChange:"selectionChange"},features:[o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:R,decls:6,vars:2,consts:[["selectionActionsPanel",""],["feed_template",""],["feed_plug",""],["feedWrap",""],["crtFeedPosts",""],["trigger","crtMenuTrigger"],["feedActionsMenu",""],[4,"ngIf","ngIfElse"],[1,"rich-text-selection-actions","feed-selection-actions"],[1,"feed"],["class","feed-header",4,"ngIf"],[3,"offsetDateChange","feedSortColumnChange","feedMessagesChange","selectionChange","allowExternalPost","schemaName","masterRecordId","feedType","feedSortColumn","showBlankSlate","feedOffsetDate","feedMessages","feedMessagesPage","disableSelectionOptions","readingMode"],[1,"feed-header"],[3,"primaryColumnValue","entitySchemaName","allowExternalPost","disableSelectionOptions","selection","forExternalDefault","selectionChange",4,"ngIf"],["class","feed-posts-actions",4,"ngIf"],[3,"selectionChange","primaryColumnValue","entitySchemaName","allowExternalPost","disableSelectionOptions","selection","forExternalDefault"],[1,"feed-posts-actions"],["data-qa","feed-sort-button",1,"feed-posts-actions-button",3,"crtMenuTriggerFor"],["svgIcon","sort-feed"],["svgIcon","menu-arrow"],[3,"itemSelected","menuItems"],[1,"feed-plug"],[1,"feed-plug-publisher","d-flex"],["svgIcon","feed-user-photo-mock",1,"feed-plug-user-img"],[1,"feed-plug-input"],[1,"feed-plug-posts"],[1,"feed-plug-posts-item","d-flex"],[1,"feed-plug-posts-item-message"],[1,"feed-plug-posts-item-message-sender","small"],[1,"feed-plug-posts-item-message-text"],[1,"feed-plug-posts-item-message-files","d-flex"],[1,"feed-plug-posts-item-message-files-item","big"],[1,"feed-plug-posts-item-message-files-item","small"],[1,"feed-plug-posts-item-message-comments"],[1,"feed-plug-posts-item-message-text","small"],[1,"feed-plug-posts-item-message-sender","big"]],template:function(M,Z){if(M&1&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,j,1,0,"crt-skeleton-loader",7),o.\u0275\u0275elementStart(1,"div",8,0),o.\u0275\u0275projection(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,fe,3,2,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),M&2){const k=o.\u0275\u0275reference(5);o.\u0275\u0275property("ngIf",Z.loading)("ngIfElse",k)}},dependencies:[h.r,v.NgIf,D.MatIcon,E.W,O.IK,N.O,Y.G,se.TranslatePipe],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}[_nghost-%COMP%]{height:100%}.feed[_ngcontent-%COMP%]{font-family:var(--crt-body-1-font-family);font-size:var(--crt-body-1-font-size);line-height:var(--crt-body-1-line-height);font-weight:var(--crt-body-1-font-weight);letter-spacing:var(--crt-body-1-letter-spacing);text-transform:var(--crt-body-1-text-transform);-webkit-font-smoothing:antialiased;background:var(--crt-palette-interaction-A100);border-radius:8px;padding:8px 5px 5px;overflow:hidden;height:100%;display:flex;flex-direction:column;container-type:inline-size}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]{width:100%;margin-top:5px;display:inline-flex;justify-content:flex-end}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]   button.feed-posts-actions-button[_ngcontent-%COMP%]{border:none;background-color:inherit;cursor:pointer;padding-right:0}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]   button.feed-posts-actions-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:18px;height:16px}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]   button.feed-posts-actions-button[_ngcontent-%COMP%]:hover{color:var(--crt-palette-primary-500)}@container (max-width: 370px){.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]{margin-bottom:17px}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]{display:none}}.feed-plug[_ngcontent-%COMP%]{background:var(--crt-palette-interaction-A100);border-radius:8px;padding:16px;width:100%;height:100%;overflow:hidden}.feed-plug[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{display:flex}.feed-plug-user-img[_ngcontent-%COMP%]{width:32px;height:32px}.feed-plug-input[_ngcontent-%COMP%]{margin-left:16px;width:100%;border:1px solid var(--crt-palette-foreground-50);border-radius:8px;height:32px}.feed-plug-posts-item[_ngcontent-%COMP%]{margin-top:24px}.feed-plug-posts-item-message[_ngcontent-%COMP%]{width:100%;margin-left:16px}.feed-plug-posts-item-message-sender[_ngcontent-%COMP%]{height:12px;border-radius:4px;background-color:var(--crt-palette-interaction-900);margin-bottom:8px}.feed-plug-posts-item-message-sender.big[_ngcontent-%COMP%]{width:60%}.feed-plug-posts-item-message-sender.small[_ngcontent-%COMP%]{width:40%}.feed-plug-posts-item-message-text[_ngcontent-%COMP%]{margin-top:4px;width:100%;height:8px;border-radius:4px;background-color:var(--crt-palette-foreground-50)}.feed-plug-posts-item-message-text.small[_ngcontent-%COMP%]{width:70%}.feed-plug-posts-item-message-files[_ngcontent-%COMP%]{margin-top:8px}.feed-plug-posts-item-message-files-item[_ngcontent-%COMP%]{height:16px;border-radius:4px;background-color:var(--crt-palette-secondary-50);margin-right:8px}.feed-plug-posts-item-message-files-item.big[_ngcontent-%COMP%]{width:22%}.feed-plug-posts-item-message-files-item.small[_ngcontent-%COMP%]{width:10%}.feed-plug-posts-item-message-comments[_ngcontent-%COMP%]{margin-top:24px}.feed-selection-actions[_ngcontent-%COMP%]{position:fixed;display:none;z-index:2010}"]})}};(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",String)],W.prototype,"offsetDate",void 0),(0,t.__decorate)([(0,y.j)(),(0,t.__metadata)("design:type",Object)],W.prototype,"offsetDateChange",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",Number)],W.prototype,"sortColumn",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",Number)],W.prototype,"readingMode",void 0),(0,t.__decorate)([(0,y.j)(),(0,t.__metadata)("design:type",Object)],W.prototype,"sortColumnChange",void 0),(0,t.__decorate)([(0,y.j)(),(0,t.__metadata)("design:type",Object)],W.prototype,"feedMessagesChange",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",Array)],W.prototype,"feedMessages",void 0),(0,t.__decorate)([(0,f.k)({reuseStrategy:{resetValue:!0}}),(0,t.__metadata)("design:type",Array)],W.prototype,"feedMessagesPage",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",String)],W.prototype,"entitySchemaName",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",String)],W.prototype,"dataSourceName",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",String)],W.prototype,"primaryColumnValue",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",String)],W.prototype,"primaryDisplayColumnValue",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",String)],W.prototype,"feedType",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",String)],W.prototype,"cardState",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",Boolean)],W.prototype,"allowExternalPost",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",Object)],W.prototype,"showBlankSlate",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",String)],W.prototype,"selection",void 0),(0,t.__decorate)([(0,y.j)(),(0,t.__metadata)("design:type",Object)],W.prototype,"selectionChange",void 0),(0,t.__decorate)([(0,f.k)(),(0,t.__metadata)("design:type",Boolean)],W.prototype,"disableSelectionOptions",void 0),W=(0,t.__decorate)([(0,B.v)({type:"crt.Feed",contentSlots:["selectionActions"],reuseStrategy:V.B.Reuse}),(0,U.f)({toolbarConfig:{position:90,icon:n(1372),defaultPropertyValues:{feedType:L.Q.Record,primaryColumnValue:"$Id",cardState:"$CardState",allowExternalPost:!1},addCommandTypeName:"crt.AddFeedCommand"},propertiesPanelComponentTypeName:"crt.FeedPropertiesPanel",viewElementGroupType:z.J.Components,typeCaption:"Feed.Caption",placeholderSize:{height:"328px"}}),(0,t.__metadata)("design:paramtypes",[o.Injector,Boolean])],W)},25415:(S,F,n)=>{n.d(F,{P:()=>I});var t=n(73308),c=n(5960),o=n.n(c),e=n(6530),w=n(4164),f=n(64429),y=n(67159),B=n(28399),V=n.n(B),U=n(62278),z=n.n(U),r=n(86575),C=n(64171);let I=class{constructor(A){this._feedMessageService=A,this._messagesPageSize=15,this._feedSortColumn=r.K.CreatedOn,this._feedRedingMode=f.w.All}_getUserMessages(A,m){const d=this._getReadFeedConfig(A,m);return(0,U.lastValueFrom)(this._feedMessageService.getUserFeedMessages(d))}_getEntityMessages(A,m,d,l){if(!A||!m)return;const h=this._getReadFeedConfig(d,l);return(0,U.lastValueFrom)(this._feedMessageService.getEntityFeedMessages(m,A,h))}_getReadFeedConfig(A,m){const d={ReadMessageCount:this._messagesPageSize,SortedBy:this._feedSortColumn,ReadingMode:this._feedRedingMode};return A&&(d.OffsetDate=A),m&&(d.ReadingMode=m),d}convert(A,m,d,l,h,v){var P=this;return(0,t.A)(function*(){const D=yield m[h];P._feedSortColumn=D||P._feedSortColumn;const _=A.find(E=>!!E&&!(0,e.n7)(E));if(d===y.Q.User)return P._getUserMessages(_,v);if(d===y.Q.Record){const E=A.find(O=>(0,e.n7)(O));if(!(0,B.isEmpty)(E)&&!(0,B.isEmpty)(l)&&l!=="#DataSourceEntityName()#")return P._getEntityMessages(E,l,_,v)}return(0,U.lastValueFrom)((0,U.of)([]))})()}};I=(0,c.__decorate)([(0,w.a)({type:"crt.LoadFeedMessages"}),(0,c.__metadata)("design:paramtypes",[C.t])],I)},39596:(S,F,n)=>{n.d(F,{S:()=>le});var t=n(5960),c=n(40297),o=n(52989),e=n(67047),w=n(55642),f=n(79772),y=n(5476),B=n(28627),V=n(1891),U=n(18351),z=n(92527),r=n(47951),C=n(69647),I=n(50663),L=n(48067),A=n(43981),m=n(31149),d=n(44267),l=n(25063),h=n(48629),v=n(24091),P=n(57274),D=n(76509),_=n(94439),E=n(40203),O=n(65269),N=n(15841),Y=n(57463),se=n(96176),ne=n(72882),ee=n(12841),a=n(1624),T=n(43691),R=n(24507),j=n(47062),Q=n(94404),oe=n(50524),re=n(57134),ce=n(33652),_e=n(5680),fe=n(25415),W=n(73308),$=n(74368),K=n(67159),M=n(64429),Z=n(1499),k=n(28399),G=n(59131),he=n(12404);class de{constructor(b){this._selectionActionsMetadataService=b}_getFeedViewConfigs(b){return $.u.getViewConfigInfoByProperty("type","crt.Feed",b.viewConfig).map(x=>x?.viewConfig).filter(Boolean)}_fixFeedByRecordBindings(b,x){x.feedType!==K.Q.Record||this._validateRecordFeedConfig(b,x)||!(0,Z.h)(b)||(x.primaryColumnValue=`$${this._getOrAddRecordIdAttribute(b,x)}`,x.entitySchemaName=this._getEntitySchemaName(b))}_validateRecordFeedConfig(b,x){const X=b.viewModelConfig.attributes,q=x.primaryColumnValue?.split("$")[1],te=X[q];return!(0,k.isEmpty)(x.entitySchemaName)&&!!te}_getOrAddRecordIdAttribute(b,x){return this._findRecordIdAttribute(b,x)||this._createRecordIdAttribute(b,x)}_findRecordIdAttribute(b,x){const q=`${(0,Z.h)(b)}.Id`,te="#PrimaryDataSourceName()#.Id",ie=b.viewModelConfig.attributes,me=Object.keys(ie).find(Ee=>{const ge=(ie[Ee]??{}).modelConfig?.path;return ge===q||ge===te});if(!(0,k.isEmpty)(me))return me;const ae=`${x.name}_RecordId`;return ae in ie?ae:void 0}_createRecordIdAttribute(b,x){const X=(0,Z.h)(b),q=b.viewModelConfig.attributes,te=`${x.name}_RecordId`;return q[te]={modelConfig:{path:`${X}.Id`}},te}_getEntitySchemaName(b){const x=(0,Z.h)(b);return(b.modelConfig?.dataSources||{})[x]?.config?.entitySchemaName}_addMessagesBindings(b,x){if(x.feedMessages)return;const X=b.viewModelConfig.attributes,q=`${x.name}_FeedMessagesPage`,te=this._createEmptyAttribute("OffsetDate",X,x),ie=this._createEmptyAttribute("SortColumn",X,x);x.feedMessages=`$${this._createEmptyAttribute("FeedMessages",X,x)}`,x.offsetDate=`$${te}`,x.sortColumn=`$${ie}`,x.feedMessagesPage=`$${q}`;const me=x.readingMode?x.readingMode:M.w.All,ae=[te];x.feedType===K.Q.Record&&ae.push(x.primaryColumnValue.replace("$","")),X[q]={from:ae,converter:`crt.LoadFeedMessages: '${x.feedType}' : '${x.entitySchemaName}' : '${ie}' : '${me}'`}}_createEmptyAttribute(b,x,X){const q=`${X.name}_${b}`;return x[q]={value:null},q}crtOnMetaDataInit(b){var x=this;return(0,W.A)(function*(){const X=b,q=x._getFeedViewConfigs(X);for(const te of q)x._fixFeedByRecordBindings(X,te),x._addMessagesBindings(X,te),yield x._selectionActionsMetadataService.setRewriteOptions(X,te);return Promise.resolve(b)})()}static{this.\u0275fac=function(x){return new(x||de)(G.\u0275\u0275inject(he.S))}}static{this.\u0275prov=G.\u0275\u0275defineInjectable({token:de,factory:de.\u0275fac})}}var ue=n(64171),Ce=n(72615),ve=n(23854);let le=class ye{constructor(b){this._materialIconsRegistrator=b,this._materialIconsRegistrator.addIcons([{name:"external-user-icon",icon:n(59536)},{name:"feed-add-comment",icon:n(85893)},{name:"feed-comment",icon:n(16063)},{name:"feed-delete",icon:n(81049)},{name:"feed-edit",icon:n(11044)},{name:"feed-heart",icon:n(86876)},{name:"feed-heart-filled",icon:n(33089)},{name:"esn-feed",icon:n(1372)},{name:"feed-user-photo-mock",icon:n(61729)},{name:"sort-feed",icon:n(74072)},{name:"kebab",icon:n(71970)}])}static{this.\u0275fac=function(x){return new(x||ye)(G.\u0275\u0275inject(I.K))}}static{this.\u0275mod=G.\u0275\u0275defineNgModule({type:ye})}static{this.\u0275inj=G.\u0275\u0275defineInjector({providers:[ue.t,Ce.d,ne.Z,{provide:ee.m,useClass:de,multi:!0}],imports:[N.Q,a.X,c.CommonModule,o.MatIconModule,se.c,A.k,y.q,B.f,Y.q,m.q,d.D,e.MatLegacyMenuModule,l.D,h.U,v.S,P.u,V.H,T.X,R.P,U.C,z.Q,D.Y,_.y,E.D,r.x,O.a,C.b,f.TranslateModule]})}};le=(0,t.__decorate)([(0,w.g)({viewElements:[j.F,Q.G],converters:[fe.P]}),(0,t.__metadata)("design:paramtypes",[I.K])],le),function(){(typeof ngJitMode>"u"||ngJitMode)&&G.\u0275\u0275setNgModuleScope(le,{declarations:[j.F,oe.N,Q.G,re.G,ce.D,_e.B],imports:[N.Q,a.X,c.CommonModule,o.MatIconModule,se.c,L.C,A.k,y.q,B.f,Y.q,m.q,d.D,e.MatLegacyMenuModule,l.D,h.U,v.S,P.u,V.H,T.X,R.P,U.C,z.Q,D.Y,_.y,E.D,r.x,O.a,C.b,f.TranslateModule],exports:[j.F,Q.G]})}(),G.\u0275\u0275setComponentScope(oe.N,[ve.r,c.NgForOf,Q.G,ce.D],[c.AsyncPipe])},2106:(S,F,n)=>{n.d(F,{U:()=>t});var t;(function(c){c.Like="like"})(t||(t={}))},86575:(S,F,n)=>{n.d(F,{K:()=>t});var t;(function(c){c[c.CreatedOn=0]="CreatedOn",c[c.LastActionOn=1]="LastActionOn"})(t||(t={}))},64171:(S,F,n)=>{n.d(F,{t:()=>L});var t=n(63721),c=n.n(t),o=n(16397),e=n(64429),w=n(26594),f=n(36486),y=n.n(f),B=n(2106),V=n(59131),U=n.n(V),z=n(81923),r=n(72615),C=n(65751),I=n(98488);class L{get getIsFeedReadingModeEnabled(){return this._featureValues.UseFeedReadingMode}constructor(m,d,l,h,v,P){this._httpClient=m,this._entitySchemaRepository=d,this._reactionService=l,this._queryExecutor=h,this._feedMessageComposerService=v,this._featureValues=P,this._readFeedMethod="/rest/EsnService/ReadFeed",this._readEntityFeedMethod="/rest/EsnService/ReadEntityMessage",this._readCommentsMethod="/rest/EsnService/ReadComments",this._readCommentsWithModeMethod="/rest/EsnService/ReadCommentsWithMode",this._readMessageMethod="/rest/EsnService/ReadMessage",this._readMessageWithModeMethod="/rest/EsnService/ReadMessageWithMode",this._readCommentWithModeMethod="/rest/EsnService/ReadCommentWithMode",this._deleteMessageMethod="/rest/EsnService/DeleteMessage",this._deleteCommentMethod="/rest/EsnService/DeleteComment",this._subscriptions=[]}_getUserReactions(m){const d=m.map(l=>l.Id);return this._reactionService.getUserMessagesReactions(d).pipe((0,f.map)(l=>(l.forEach(h=>{const v=m.find(P=>P.Id===h.socialMessageId);if(v){const P=v.ReactionsCounters.find(D=>D.type===B.U.Like);P.currentUserReacted=!0}}),m)))}_getMessages(m,d){return this._httpClient.post(m,d).pipe((0,f.pluck)("EsnMessages"),(0,f.map)(l=>l??[]),(0,f.map)(l=>l.map(h=>(h.ReactionsCounters=[{type:B.U.Like,count:h.LikeCount}],h))),(0,f.switchMap)(l=>this._getUserReactions(l)))}_modifyMessage(m,d){return this._httpClient.post(m,d).pipe((0,f.map)(l=>l.success))}_getSchemaUId(m){return this._entitySchemaRepository.getSchemaByName(m).pipe((0,f.map)(d=>d.uId))}_prepareOffsetDate(m){m.OffsetDate&&(m.OffsetDate=JSON.stringify((0,o.g)(new Date(m.OffsetDate))))}getUserFeedMessages(m){return this._prepareOffsetDate(m),this._getMessages(this._readFeedMethod,{readOptions:m})}getEntityFeedMessages(m,d,l){return this._prepareOffsetDate(l),this._getSchemaUId(m).pipe((0,f.switchMap)(h=>this._getMessages(this._readEntityFeedMethod,{entityId:d,schemaUId:h,readOptions:l})))}getMessageComments(m,d,l,h=e.w.All){let v=this._readCommentsMethod;const P={entityId:d,schemaUId:m,messageId:l};return this.getIsFeedReadingModeEnabled&&h!==e.w.All&&(P.readingMode=h,v=this._readCommentsWithModeMethod),this._getMessages(v,P).pipe((0,f.map)(D=>(D.forEach(_=>{_.EntitySchemaUId=m,_.EntityId=d}),D)))}getMessage(m,d,l,h=e.w.All){let v=this._readMessageMethod;return this._getSchemaUId(m).pipe((0,f.switchMap)(P=>{const D={entityId:d,schemaUId:P,messageId:l};return this.getIsFeedReadingModeEnabled&&h!==e.w.All&&(D.readingMode=h,v=this._readMessageWithModeMethod),this._getMessages(v,D).pipe((0,f.map)(_=>(_.forEach(E=>{E.EntitySchemaUId=P,E.EntityId=d}),_)))}))}getComment(m,d,l,h=e.w.All){let v=this._readMessageMethod;const P={entityId:d,schemaUId:m,messageId:l};return this.getIsFeedReadingModeEnabled&&h!==e.w.All&&(P.readingMode=h,v=this._readCommentWithModeMethod),this._getMessages(v,P).pipe((0,f.map)(D=>(D.forEach(_=>{_.EntitySchemaUId=m,_.EntityId=d}),D)))}deleteFeedMessage(m){return this._modifyMessage(this._deleteMessageMethod,{schemaUId:m.EntitySchemaUId,entityId:m.EntityId,messageId:m.Id})}deleteMessageComment(m){return this._modifyMessage(this._deleteCommentMethod,{schemaUId:m.EntitySchemaUId,entityId:m.EntityId,commentId:m.Id})}loadAttachments(m){return this._feedMessageComposerService.loadAttachments(m.Id,m.EntitySchemaUId,m.EntityId,m.FileSchemaName,m.FileColumnName)}ngOnDestroy(){this._subscriptions.forEach(m=>m?.unsubscribe())}static{this.\u0275fac=function(d){return new(d||L)(V.\u0275\u0275inject(t.HttpClient),V.\u0275\u0275inject(z.v),V.\u0275\u0275inject(r.d),V.\u0275\u0275inject(C.w),V.\u0275\u0275inject(I.D),V.\u0275\u0275inject(w.G))}}static{this.\u0275prov=V.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac})}}},72615:(S,F,n)=>{n.d(F,{d:()=>U});var t=n(63721),c=n.n(t),o=n(62278),e=n.n(o),w=n(36486),f=n.n(w),y=n(2106),B=n(59131),V=n.n(B);class U{constructor(r){this.httpClient=r,this._readUserLikesMethod="/rest/EsnService/GetMessageLikesForUser",this._readMessageLikesMethod="/rest/EsnService/GetWhoLikedMessage",this._likeMessageMethod="/rest/EsnService/LikeMessage",this._dislikeMessageMethod="/rest/EsnService/UnLikeMessage"}_getLikes(r,C){return this.httpClient.post(r,C).pipe((0,w.map)(I=>{const L=I.likes;return L.forEach(A=>A.type=y.U.Like),L}))}_modifyLike(r,C){return this.httpClient.post(r,{messageId:C}).pipe((0,w.switchMap)(I=>(0,o.of)(I.success)),(0,o.catchError)(()=>(0,o.of)(!1)))}getUserMessagesReactions(r){return r.length===0?(0,o.of)([]):this._getLikes(this._readUserLikesMethod,{messageIds:r})}getMessageReactions(r){return this._getLikes(this._readMessageLikesMethod,{messageId:r})}likeMessage(r){return this._modifyLike(this._likeMessageMethod,r)}dislikeMessage(r){return this._modifyLike(this._dislikeMessageMethod,r)}static{this.\u0275fac=function(C){return new(C||U)(B.\u0275\u0275inject(t.HttpClient))}}static{this.\u0275prov=B.\u0275\u0275defineInjectable({token:U,factory:U.\u0275fac})}}},64429:(S,F,n)=>{n.d(F,{w:()=>t});var t;(function(c){c[c.All=0]="All",c[c.External=1]="External",c[c.Internal=2]="Internal"})(t||(t={}))},67159:(S,F,n)=>{n.d(F,{Q:()=>t});var t;(function(c){c.User="User",c.Record="Record"})(t||(t={}))},71970:S=>{S.exports=`<svg id="Component_2995_69" data-name="Component 2995 \u2013 69" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <rect id="Rectangle_42510" data-name="Rectangle 42510" width="24" height="24" rx="4" fill="rgba(0,0,0,0)" opacity="0"/>
  <g id="Group_14771" data-name="Group 14771" transform="translate(11 6)">
    <rect id="Rectangle_6186" data-name="Rectangle 6186" width="2" height="2" fill="currentColor" stroke="rgba(0,0,0,0)" stroke-width="1"/>
    <rect id="Rectangle_6187" data-name="Rectangle 6187" width="2" height="2" transform="translate(0 5)" fill="currentColor" stroke="rgba(0,0,0,0)" stroke-width="1"/>
    <rect id="Rectangle_6188" data-name="Rectangle 6188" width="2" height="2" transform="translate(0 10)" fill="currentColor" stroke="rgba(0,0,0,0)" stroke-width="1"/>
  </g>
</svg>
`},1372:S=>{S.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64" viewBox="0 0 72 64">
  <g id="Group_14560" data-name="Group 14560" transform="translate(-464 -425)">
    <rect id="Rectangle_24800" data-name="Rectangle 24800" width="72" height="64" rx="6" transform="translate(464 425)" fill="none"/>
    <g id="Group_14731" data-name="Group 14731" transform="translate(-18.251 -1)">
      <g id="Group_14728" data-name="Group 14728" transform="translate(490.547 439)">
        <rect id="Rectangle_6612" data-name="Rectangle 6612" width="36" height="5" rx="2.5" transform="translate(5.704)" fill="#d1d1d1"/>
        <rect id="Rectangle_38970" data-name="Rectangle 38970" width="50" height="5" rx="2.5" transform="translate(5.704 8)" fill="#d1d1d1"/>
        <rect id="Rectangle_41224" data-name="Rectangle 41224" width="3" height="20" transform="translate(-0.296)" fill="#22ac14"/>
        <rect id="Rectangle_41225" data-name="Rectangle 41225" width="17" height="4" rx="2" transform="translate(5.704 16)" fill="#0091ea" opacity="0.5"/>
      </g>
      <g id="Group_14728-2" data-name="Group 14728" transform="translate(490.547 465)">
        <rect id="Rectangle_6612-2" data-name="Rectangle 6612" width="36" height="5" rx="2.5" transform="translate(5.704)" fill="#d1d1d1"/>
        <rect id="Rectangle_41224-2" data-name="Rectangle 41224" width="3" height="12" transform="translate(-0.296)" fill="#22ac14"/>
        <rect id="Rectangle_41225-2" data-name="Rectangle 41225" width="17" height="4" rx="2" transform="translate(5.704 8)" fill="#0091ea" opacity="0.5"/>
      </g>
    </g>
  </g>
</svg>
`},59536:S=>{S.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.95278 7.23096C4.93773 7.38804 4.80738 7.51038 4.64958 7.51038H2.32548C2.15017 7.51038 2.01154 7.36033 2.03552 7.18667C2.35022 4.90772 3.98462 3.04105 6.15721 2.35497C6.4163 2.27315 6.60985 2.56791 6.46531 2.79796C5.62387 4.13714 5.1039 5.65365 4.95278 7.23096Z" fill="#22AC14"/>
<path d="M4.95278 7.23096C4.93773 7.38804 4.80738 7.51038 4.64958 7.51038H2.32548C2.15017 7.51038 2.01154 7.36033 2.03552 7.18667C2.35022 4.90772 3.98462 3.04105 6.15721 2.35497C6.4163 2.27315 6.60985 2.56791 6.46531 2.79796C5.62387 4.13714 5.1039 5.65365 4.95278 7.23096Z" fill="black" fill-opacity="0.5"/>
<path d="M6.23175 7.51038C6.05724 7.51038 5.91917 7.36205 5.93794 7.18855C6.12106 5.49585 6.75639 3.65663 7.77596 2.28596C7.88843 2.13476 8.11157 2.13476 8.22404 2.28596C9.24361 3.65663 9.87894 5.49585 10.0621 7.18855C10.0808 7.36205 9.94276 7.51038 9.76824 7.51038H6.23175Z" fill="#22AC14"/>
<path d="M6.23175 7.51038C6.05724 7.51038 5.91917 7.36205 5.93794 7.18855C6.12106 5.49585 6.75639 3.65663 7.77596 2.28596C7.88843 2.13476 8.11157 2.13476 8.22404 2.28596C9.24361 3.65663 9.87894 5.49585 10.0621 7.18855C10.0808 7.36205 9.94276 7.51038 9.76824 7.51038H6.23175Z" fill="black" fill-opacity="0.5"/>
<path d="M13.9645 7.18667C13.9885 7.36033 13.8498 7.51038 13.6745 7.51038H11.3504C11.1926 7.51038 11.0623 7.38804 11.0472 7.23096C10.8961 5.65365 10.3761 4.13714 9.53469 2.79796C9.39015 2.5679 9.5837 2.27315 9.84279 2.35497C12.0154 3.04105 13.6498 4.90772 13.9645 7.18667Z" fill="#22AC14"/>
<path d="M13.9645 7.18667C13.9885 7.36033 13.8498 7.51038 13.6745 7.51038H11.3504C11.1926 7.51038 11.0623 7.38804 11.0472 7.23096C10.8961 5.65365 10.3761 4.13714 9.53469 2.79796C9.39015 2.5679 9.5837 2.27315 9.84279 2.35497C12.0154 3.04105 13.6498 4.90772 13.9645 7.18667Z" fill="black" fill-opacity="0.5"/>
<path d="M9.84279 13.6254C9.5837 13.7072 9.39015 13.4125 9.53469 13.1824C10.3761 11.8432 10.8961 10.3267 11.0472 8.74942C11.0623 8.59234 11.1926 8.47 11.3504 8.47H13.6745C13.8498 8.47 13.9885 8.62005 13.9645 8.79371C13.6498 11.0727 12.0154 12.9393 9.84279 13.6254Z" fill="#22AC14"/>
<path d="M9.84279 13.6254C9.5837 13.7072 9.39015 13.4125 9.53469 13.1824C10.3761 11.8432 10.8961 10.3267 11.0472 8.74942C11.0623 8.59234 11.1926 8.47 11.3504 8.47H13.6745C13.8498 8.47 13.9885 8.62005 13.9645 8.79371C13.6498 11.0727 12.0154 12.9393 9.84279 13.6254Z" fill="black" fill-opacity="0.5"/>
<path d="M9.76824 8.47C9.94276 8.47 10.0808 8.61832 10.0621 8.79182C9.87898 10.4865 9.2436 12.3412 8.22393 13.714C8.11157 13.8652 7.88843 13.8652 7.77607 13.714C6.7564 12.3412 6.12102 10.4865 5.93792 8.79182C5.91917 8.61832 6.05724 8.47 6.23175 8.47H9.76824Z" fill="#22AC14"/>
<path d="M9.76824 8.47C9.94276 8.47 10.0808 8.61832 10.0621 8.79182C9.87898 10.4865 9.2436 12.3412 8.22393 13.714C8.11157 13.8652 7.88843 13.8652 7.77607 13.714C6.7564 12.3412 6.12102 10.4865 5.93792 8.79182C5.91917 8.61832 6.05724 8.47 6.23175 8.47H9.76824Z" fill="black" fill-opacity="0.5"/>
<path d="M2.03552 8.79371C2.01154 8.62005 2.15017 8.47 2.32548 8.47H4.64958C4.80738 8.47 4.93773 8.59234 4.95278 8.74942C5.1039 10.3267 5.62387 11.8432 6.4653 13.1824C6.60985 13.4125 6.4163 13.7072 6.15721 13.6254C3.98462 12.9393 2.35022 11.0727 2.03552 8.79371Z" fill="#22AC14"/>
<path d="M2.03552 8.79371C2.01154 8.62005 2.15017 8.47 2.32548 8.47H4.64958C4.80738 8.47 4.93773 8.59234 4.95278 8.74942C5.1039 10.3267 5.62387 11.8432 6.4653 13.1824C6.60985 13.4125 6.4163 13.7072 6.15721 13.6254C3.98462 12.9393 2.35022 11.0727 2.03552 8.79371Z" fill="black" fill-opacity="0.5"/>
</svg>
`},85893:S=>{S.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.90992 2.91063C8.90992 2.4077 8.50222 2 7.99929 2C7.49636 2 7.08865 2.4077 7.08865 2.91063V7.09079H2.91063C2.4077 7.09079 2 7.49849 2 8.00142C2 8.50435 2.4077 8.91205 2.91063 8.91205H7.08865V13.0894C7.08865 13.5923 7.49636 14 7.99929 14C8.50222 14 8.90992 13.5923 8.90992 13.0894V8.91205H13.0894C13.5923 8.91205 14 8.50435 14 8.00142C14 7.49849 13.5923 7.09079 13.0894 7.09079H8.90992V2.91063Z" fill="currentColor"/>
</svg>
`},16063:S=>{S.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2 3.89844C2 3.07001 2.67157 2.39844 3.5 2.39844H12.5C13.3284 2.39844 14 3.07001 14 3.89844V9.99656C14 10.825 13.3284 11.4966 12.5 11.4966H8.9074H4.84368H3.5C2.67157 11.4966 2 10.825 2 9.99656V3.89844Z" fill="currentColor"/>
<path d="M4.84368 11.4966V13.427C4.84368 13.8337 5.30331 14.0702 5.63425 13.8339L8.9074 11.4966H4.84368Z" fill="currentColor"/>
</svg>
`},81049:S=>{S.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12.5704 5.59961V13.7C12.5704 14.0448 12.4335 14.3754 12.1899 14.6192C11.9463 14.863 11.616 15 11.2715 15H4.77706C4.43257 15 4.1022 14.863 3.85861 14.6192C3.61502 14.3754 3.47818 14.0448 3.47818 13.7V5.59961H3C2.44772 5.59961 2 5.15189 2 4.59961C2 4.04732 2.44772 3.59961 3 3.59961H5.4265V3.3C5.4265 2.95522 5.56335 2.62456 5.80693 2.38076C6.05052 2.13696 6.3809 2 6.72538 2H9.32315C9.66763 2 9.99801 2.13696 10.2416 2.38076C10.4852 2.62456 10.622 2.95522 10.622 3.3V3.59961H13C13.5523 3.59961 14 4.04732 14 4.59961C14 5.15189 13.5523 5.59961 13 5.59961H12.5704ZM6.72655 7.36328C6.99556 7.36328 7.21363 7.58154 7.21363 7.85078V11.7508C7.21363 12.02 6.99556 12.2383 6.72655 12.2383C6.45755 12.2383 6.23947 12.02 6.23947 11.7508V7.85078C6.23947 7.58154 6.45755 7.36328 6.72655 7.36328ZM9.32432 7.36328C9.59332 7.36328 9.8114 7.58154 9.8114 7.85078V11.7508C9.8114 12.02 9.59332 12.2383 9.32432 12.2383C9.05531 12.2383 8.83724 12.02 8.83724 11.7508V7.85078C8.83724 7.58154 9.05531 7.36328 9.32432 7.36328Z" fill="currentColor"/>
</svg>
`},11044:S=>{S.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.8532 2.11607C11.7151 1.97799 11.4943 1.95446 11.3563 2.09255L10.3717 3.07715C10.1764 3.27241 10.1764 3.589 10.3717 3.78426L12.2161 5.6287C12.4114 5.82396 12.7279 5.82396 12.9232 5.6287L13.9078 4.6441C14.0459 4.50601 14.0224 4.28526 13.8843 4.14718L11.8532 2.11607Z" fill="currentColor"/>
<path d="M13.9078 2.09255C13.9371 2.12182 13.9129 2.14602 13.8836 2.11675C13.8543 2.08748 13.8785 2.06328 13.9078 2.09255Z" fill="currentColor"/>
<path d="M8.81564 4.63316C9.0109 4.4379 9.32748 4.4379 9.52274 4.63317L11.3672 6.47761C11.5625 6.67287 11.5625 6.98945 11.3672 7.18471L5.39022 13.1617C5.32869 13.2232 5.25217 13.2676 5.16822 13.2905L2.63211 13.9822C2.25886 14.084 1.91637 13.7415 2.01817 13.3682L2.70984 10.8321C2.73273 10.7482 2.77714 10.6717 2.83867 10.6101L8.81564 4.63316Z" fill="currentColor"/>
</svg>
`},33089:S=>{S.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.42067 4.94605C6.00336 4.73894 5.52194 4.67299 5.05833 4.7594C4.59472 4.84582 4.17755 5.07927 3.87781 5.42004C3.57806 5.76081 3.41426 6.18784 3.41426 6.62848C3.41426 8.00236 4.52318 9.36165 5.82661 10.455C6.45693 10.9837 7.09048 11.415 7.56794 11.7146C7.73396 11.8188 7.88029 11.9066 8 11.9764C8.11971 11.9066 8.26604 11.8188 8.43206 11.7146C8.90952 11.415 9.54307 10.9837 10.1734 10.455C11.4768 9.36165 12.5857 8.00236 12.5857 6.62848C12.5857 6.18784 12.4219 5.76081 12.1222 5.42004C11.8224 5.07927 11.4053 4.84582 10.9417 4.7594C10.4781 4.67299 9.99664 4.73894 9.57933 4.94605C9.16201 5.15316 8.83458 5.48862 8.65273 5.89537C8.54294 6.14096 8.28547 6.30093 8 6.30093C7.71453 6.30093 7.45706 6.14096 7.34727 5.89537C7.16542 5.48862 6.83799 5.15316 6.42067 4.94605ZM8 12.7453C7.6545 13.3204 7.65432 13.3203 7.65412 13.3202L7.65228 13.3192L7.64813 13.317L7.6342 13.3096C7.62244 13.3034 7.60578 13.2945 7.58456 13.2829C7.54213 13.2599 7.48139 13.2264 7.40496 13.1831C7.25218 13.0964 7.0362 12.97 6.77804 12.808C6.26308 12.4848 5.57342 12.0159 4.88052 11.4347C3.53751 10.3082 2 8.60902 2 6.62848C2 5.88313 2.27708 5.1608 2.78411 4.58439C3.29113 4.00798 3.99677 3.61309 4.78097 3.46691C5.56518 3.32074 6.3795 3.4323 7.08539 3.78263C7.4302 3.95375 7.73873 4.17668 8 4.44016C8.26127 4.17668 8.5698 3.95375 8.91461 3.78263C9.6205 3.4323 10.4348 3.32074 11.219 3.46691C12.0032 3.61309 12.7089 4.00798 13.2159 4.58439C13.7229 5.1608 14 5.88313 14 6.62848C14 8.60902 12.4625 10.3082 11.1195 11.4347C10.4266 12.0159 9.73691 12.4848 9.22196 12.808C8.9638 12.97 8.74783 13.0964 8.59504 13.1831C8.51861 13.2264 8.45787 13.2599 8.41544 13.2829C8.39422 13.2945 8.37756 13.3034 8.3658 13.3096L8.35187 13.317L8.34772 13.3192L8.34637 13.3199C8.34618 13.32 8.34551 13.3204 8 12.7453ZM8 12.7453L8.34551 13.3204C8.13085 13.4324 7.86878 13.4322 7.65412 13.3202L8 12.7453Z" fill="currentColor"/>
<path d="M5.05833 4.7594C5.52194 4.67299 6.00336 4.73894 6.42067 4.94605C6.83799 5.15316 7.16542 5.48862 7.34727 5.89537C7.45706 6.14096 7.71453 6.30093 8 6.30093C8.28547 6.30093 8.54294 6.14096 8.65273 5.89537C8.83458 5.48862 9.16201 5.15316 9.57933 4.94605C9.99664 4.73894 10.4781 4.67299 10.9417 4.7594C11.4053 4.84582 11.8224 5.07927 12.1222 5.42004C12.4219 5.76081 12.5857 6.18784 12.5857 6.62848C12.5857 8.00236 11.4768 9.36165 10.1734 10.455C9.54307 10.9837 8.90952 11.415 8.43206 11.7146C8.26604 11.8188 8.11971 11.9066 8 11.9764C7.88029 11.9066 7.73396 11.8188 7.56794 11.7146C7.09048 11.415 6.45693 10.9837 5.82661 10.455C4.52318 9.36165 3.41426 8.00236 3.41426 6.62848C3.41426 6.18784 3.57806 5.76081 3.87781 5.42004C4.17755 5.07927 4.59472 4.84582 5.05833 4.7594Z" fill="currentColor"/>
</svg>
`},86876:S=>{S.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.42067 4.94605C6.00336 4.73894 5.52194 4.67299 5.05833 4.7594C4.59472 4.84582 4.17755 5.07927 3.87781 5.42004C3.57806 5.76081 3.41426 6.18784 3.41426 6.62848C3.41426 8.00236 4.52318 9.36165 5.82661 10.455C6.45693 10.9837 7.09048 11.415 7.56794 11.7146C7.73396 11.8188 7.88029 11.9066 8 11.9764C8.11971 11.9066 8.26604 11.8188 8.43206 11.7146C8.90952 11.415 9.54307 10.9837 10.1734 10.455C11.4768 9.36165 12.5857 8.00236 12.5857 6.62848C12.5857 6.18784 12.4219 5.76081 12.1222 5.42004C11.8224 5.07927 11.4053 4.84582 10.9417 4.7594C10.4781 4.67299 9.99664 4.73894 9.57933 4.94605C9.16201 5.15316 8.83458 5.48862 8.65273 5.89537C8.54294 6.14096 8.28547 6.30093 8 6.30093C7.71453 6.30093 7.45706 6.14096 7.34727 5.89537C7.16542 5.48862 6.83799 5.15316 6.42067 4.94605ZM8 12.7453C7.6545 13.3204 7.65432 13.3203 7.65412 13.3202L7.65228 13.3192L7.64813 13.317L7.6342 13.3096C7.62244 13.3034 7.60578 13.2945 7.58456 13.2829C7.54213 13.2599 7.48139 13.2264 7.40496 13.1831C7.25218 13.0964 7.0362 12.97 6.77804 12.808C6.26308 12.4848 5.57342 12.0159 4.88052 11.4347C3.53751 10.3082 2 8.60902 2 6.62848C2 5.88313 2.27708 5.1608 2.78411 4.58439C3.29113 4.00798 3.99677 3.61309 4.78097 3.46691C5.56518 3.32074 6.3795 3.4323 7.08539 3.78263C7.4302 3.95375 7.73873 4.17668 8 4.44016C8.26127 4.17668 8.5698 3.95375 8.91461 3.78263C9.6205 3.4323 10.4348 3.32074 11.219 3.46691C12.0032 3.61309 12.7089 4.00798 13.2159 4.58439C13.7229 5.1608 14 5.88313 14 6.62848C14 8.60902 12.4625 10.3082 11.1195 11.4347C10.4266 12.0159 9.73691 12.4848 9.22196 12.808C8.9638 12.97 8.74783 13.0964 8.59504 13.1831C8.51861 13.2264 8.45787 13.2599 8.41544 13.2829C8.39422 13.2945 8.37756 13.3034 8.3658 13.3096L8.35187 13.317L8.34772 13.3192L8.34637 13.3199C8.34618 13.32 8.34551 13.3204 8 12.7453ZM8 12.7453L8.34551 13.3204C8.13085 13.4324 7.86878 13.4322 7.65412 13.3202L8 12.7453Z" fill="currentColor"/>
</svg>
`},61729:S=>{S.exports=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.4.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Component_632_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
	 y="0px" viewBox="0 0 48 48" style="enable-background:new 0 0 48 48;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
	.st1{fill:#CACACA;}
</style>
<g>
	<circle class="st0" cx="24" cy="24" r="24"/>
	<path class="st1" d="M42.1,39.7L34,36.1l-0.5-1.6c-0.2-0.6-0.4-1.1-0.9-1.2c-0.2-0.1-0.4-0.3-0.4-0.6l-0.3-3.2
		c0-0.3,0.1-0.5,0.3-0.7c0.9-1,1.4-2.3,1.5-3.6c0.1-0.7,0.5-1.3,0.6-2l0.7-3.8c0.1-0.5,0-0.9-0.5-1.1c-0.2,0-0.3-0.3-0.3-0.7
		c0,0,0.7-5,0.5-6.7c-0.3-2.3-2.1-7-6.9-6.7C15.1,0.4,16.1,6.6,11.7,8.5c1.2,0.9,2.1,0.8,2.8,0.5c-0.2,0.2-1.8,0.3-2.5,3.3
		c0.9-1.2,1.4-1.2,2-1.5c-1.5,0.8-0.1,5.7-0.1,6.2v0.6c0,0.3-0.1,0.6-0.3,0.7C13,18.6,13,18.9,13,19.4l0.7,3.8
		c0.2,0.7,0.6,1.3,0.6,2c0.2,1.3,0.7,2.6,1.5,3.6c0.2,0.2,0.3,0.4,0.3,0.7l-0.3,3.2c0,0.2-0.2,0.5-0.4,0.6c-0.5,0.1-0.8,0.7-0.9,1.2
		l-0.5,1.6l-8.2,3.6c4.4,5,10.9,8.2,18.1,8.2S37.8,44.8,42.1,39.7z"/>
</g>
</svg>
`},74072:S=>{S.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 2.01074H4V11.0107H6L3.5 14.0107L1 11.0107H3V2.01074Z" fill="currentColor"/>
<path d="M11 11.0107H7V12.0107H11V11.0107Z" fill="currentColor"/>
<path d="M13 7.01074H7V8.01074H13V7.01074Z" fill="currentColor"/>
<path d="M15 3.01074H7V4.01074H15V3.01074Z" fill="currentColor"/>
</svg>
`}}]);
