(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[1046],{43272:(b,x,a)=>{a.d(x,{A:()=>_});var s=a(18587),e=a(49973),T=a(58504),d=a(74709),H=a(43785),w=a(62278),R=a.n(w),E=a(36486),g=a.n(E);class _{constructor(h,l,y){this.queryExecutor=h,this._translateService=l,this.entityConverter=y,this.absentDataErrorKey="BaseSection.AbsentDataErrorMessage",this.primaryColumnName="Id"}_convertToErrorInfo(h){return{errorCode:null,message:h.message,stackTrace:h.stack}}_addColumnsToEsq(h){this.entityConverter.getEntityColumns({}).forEach(y=>{h.addSchemaColumn(y.path)})}_createDeleteQuery(){return new s.x(this.entitySchemaName)}getBaseErrorResponse(h){return(0,w.of)({success:!1,errorInfo:this._convertToErrorInfo(h),result:null})}handleResponse(h){return h.pipe((0,E.map)(()=>({success:!0,errorInfo:null,result:[]})),(0,E.catchError)(l=>(0,w.of)({success:!1,errorInfo:this._convertToErrorInfo(l),result:[]})))}getItemByIdEsq(h){const l=new e.s(this.entitySchemaName);return this._addColumnsToEsq(l),l.filters.addSchemaColumnFilterWithParameter(T.H.Equal,this.primaryColumnName,h),l}createGetAllItemsEsq(){const h=new e.s(this.entitySchemaName);return this._addColumnsToEsq(h),h}getUpdateQuery(h){const l=new d.N(this.entitySchemaName);return this.entityConverter.getEntityColumns(h).forEach(M=>{this.primaryColumnName===M.path?l.filters.addSchemaColumnFilterWithParameter(T.H.Equal,this.primaryColumnName,M.value):l.addColumn(M.path,M.value,M.type)}),l}getInsertQuery(h){const l=new H.L(this.entitySchemaName);return this.entityConverter.getEntityColumns(h).forEach(M=>{this.primaryColumnName===M.path&&!M.value||l.addColumn(M.path,M.value,M.type)}),l}getDeleteQuery(h){return this.getDeleteQueryWithPrimaryColumnFilter(h.id)}getDeleteQueryWithPrimaryColumnFilter(h){const l=this._createDeleteQuery();return l.filters.addSchemaColumnFilterWithParameter(T.H.Equal,this.primaryColumnName,h),l}loadAdditionalInfo(h){return(0,w.of)(h)}getItems(){const h=this.createGetAllItemsEsq();return this.queryExecutor.executeSelectQuery(h).pipe((0,E.mergeMap)(l=>this.loadAdditionalInfo(l)),(0,E.map)(l=>({success:!0,errorInfo:null,result:l.map(y=>this.entityConverter.getEntity(y))})),(0,E.catchError)(l=>this.getBaseErrorResponse(l)))}getItem(h){const l=this.getItemByIdEsq(h);return this.queryExecutor.executeSelectQuery(l).pipe((0,E.tap)(y=>{if(!(y&&y[0])){const M=this._translateService.instant(this.absentDataErrorKey);throw new Error(M)}}),(0,E.mergeMap)(y=>this.loadAdditionalInfo(y)),(0,E.map)(y=>({success:!0,errorInfo:null,result:[this.entityConverter.getEntity(y[0])]})),(0,E.catchError)(y=>this.getBaseErrorResponse(y)))}insertItem(h){const l=this.getInsertQuery(h),y=this.queryExecutor.executeInsertQuery(l);return this.handleResponse(y)}updateItem(h){const l=this.getUpdateQuery(h),y=this.queryExecutor.executeUpdateQuery(l);return this.handleResponse(y)}deleteItem(h){const l=this.getDeleteQuery(h),y=this.queryExecutor.executeDeleteQuery(l);return this.handleResponse(y)}deleteById(h){const l=this.getDeleteQueryWithPrimaryColumnFilter(h),y=this.queryExecutor.executeDeleteQuery(l);return this.handleResponse(y)}}},96158:(b,x,a)=>{a.d(x,{g:()=>s});var s;(function(e){e.TriggerMention="triggerMention",e.Focus="focus"})(s||(s={}))},37206:(b,x,a)=>{a.d(x,{D:()=>w,w:()=>R});var s=a(73308),e=a(81517),T=a(41287),d=a(62278),H=a.n(d);class w extends e.S{constructor(){super(...arguments),this.isFirstLoad=!1}}class R extends T.l{constructor(){super(...arguments),this._chatsLoadOffset$=new d.Subject}_handleChatsListOffsetChange(g){this._chatsLoadOffset$.pipe((0,d.debounceTime)(500),(0,d.distinctUntilChanged)((_,f)=>_.offset===f.offset),(0,d.tap)(()=>g.$context.IsActiveChatsLoading=!0),(0,d.switchMap)(_=>this.getChatPreviews(_.offset,_.rowsToLoad).pipe((0,d.filter)(f=>_.offset===0||f&&f.length>0),(0,d.map)(f=>f.map(h=>this.mapChatPreview(h))),(0,d.switchMap)(f=>(0,d.from)(g.$context.ActiveChats).pipe((0,d.take)(1),(0,d.map)(h=>!h||h.length===0?f:[...h,...f]))),(0,d.map)(f=>({page:_.currentPage,mappedSessions:f})),(0,d.finalize)(()=>{g.$context.IsActiveChatsLoading=!1})))).subscribe(_=>{g.$context.ActiveChats=Array.from(new Map(_.mappedSessions.map(f=>[f.id,f])).values()),g.$context.ChatsListPage=_.page+1})}handle(g){var _=this;return(0,s.A)(function*(){yield _.next?.handle(g),g.isFirstLoad&&(_._handleChatsListOffsetChange(g),g.$context.ChatsListPage=0);const f=yield g.$context.ChatsListPage,h=f*g.rowsToLoadCount;_._chatsLoadOffset$.next({offset:h,rowsToLoad:g.rowsToLoadCount,currentPage:f})})()}}},81046:(b,x,a)=>{a.r(x),a.d(x,{BaseChatListLoadHandler:()=>Ye.w,BaseChatListLoadRequest:()=>Ye.D,CHAT_PROFILE_KEY:()=>Te.j,CONVERSATION_RESET_EVENT:()=>B.R,ChatDraftService:()=>Je.X,ChatMessageActionHandler:()=>pe,ChatMessageActionRequest:()=>ke,ChatMessageTypeRegisterServiceMock:()=>qe,ChatPreview:()=>Xe,ConversationEvent:()=>B.u,CrtChatDisclaimerComponent:()=>K,CrtChatItemComponent:()=>N,CrtChatListComponent:()=>k,CrtChatMessagesComponent:()=>g,CrtChatPanelModule:()=>se,CrtChatTypingComponent:()=>j,CrtConversationComponent:()=>I,CrtMessageEditorComponent:()=>z,CrtMessageEditorInputComponent:()=>A,CrtMessageEditorReplyComponent:()=>q,LoadChatProfileHandler:()=>ue,LoadChatProfileRequest:()=>Ve,LoadConversationHandler:()=>me,LoadConversationModeEnum:()=>te,LoadConversationRequest:()=>Fe,MessageEditorInputActionEnum:()=>de.g,MessageEditorInputChangeHandler:()=>he,MessageEditorInputChangeRequest:()=>je,MessageEditorPreprocessor:()=>ne,MessageEditorSendHandler:()=>Se,MessageEditorSendRequest:()=>Be,SaveChatProfileHandler:()=>ge,SaveChatProfileRequest:()=>He,TriggerMentionRequest:()=>Pe,providersMock:()=>kn});var s=a(5960),e=a(59131),T=a(11629),d=a(77592);const H=["messages"],w=[[["",8,"messages-header"]]],R=[".messages-header"];function E(r,t){}class g{get _lastAuthor(){return this._renderedMessages.length===0?this._lastMessageAuthor:this._renderedMessages[this._renderedMessages.length-1]?.author?.name??null}set messages(t){if(!t){this.reset();return}const n=this._processMessages(t);this._updateMessages(n)}constructor(t){this._renderer=t,this._renderedMessages=[],this._lastMessageAuthor=null,this._messagesCounter=0,this._lastMessageDirections=null,this._isRendering=!1,this._messageElementsMap=new Map,this.messagePositionAttributeName="chat-message-position"}_getParentContainer(){return this.messagesContainer.nativeElement.parentElement}_updateMessages(t){if(this._isRendering)return;if(this._isRendering=!0,t.length===0){this.reset(),this._isRendering=!1;return}const n=new Set(this._renderedMessages.map(u=>u.id)),o=new Set(t.map(u=>u.id)),i=this._renderedMessages.filter(u=>!o.has(u.id)),c=t.filter(u=>n.has(u.id)&&JSON.stringify(this._renderedMessages.find(O=>O.id===u.id))!==JSON.stringify(u));i.forEach(u=>{this._removeMessage(u.id)}),c.forEach(u=>{this._updateMessage(u)}),t.forEach((u,O)=>{const P=this._messageElementsMap.get(u.id);if(P){const D=this._getParentContainer();Array.from(D.children).indexOf(P)!==O&&(this._renderer.removeChild(D,P),this._insertMessageAtPosition(P,O,D))}else this._addMessage(u,t)}),this._renderedMessages=[...t],this._isRendering=!1}_removeMessage(t){const n=this._messageElementsMap.get(t);n&&(this._renderer.removeChild(this._getParentContainer(),n),this._messageElementsMap.delete(t))}_updateMessage(t){const n=this._messageElementsMap.get(t.id);n&&this._renderer.setProperty(n,"message",t)}_addMessage(t,n){this._messagesCounter++;const o=T.L.getSelector(t.type),i=this._renderer.createElement(o);i.classList.add("chat-message"),this._lastMessageDirections!==t.direction&&(i.classList.add("message-group-starter"),this._lastMessageDirections=t.direction),this._renderer.setProperty(i,"message",t),this._renderer.setAttribute(i,this.messagePositionAttributeName,`${this._messagesCounter}`);const c=this._getParentContainer(),u=n.findIndex(O=>O.id===t.id);this._insertMessageAtPosition(i,u,c),this._messageElementsMap.set(t.id,i)}_insertMessageAtPosition(t,n,o){const i=Array.from(o.children);n<i.length?this._renderer.insertBefore(o,t,i[n]):this._renderer.appendChild(o,t)}_processMessages(t){let n=this._lastAuthor;return t.map(o=>o.author?.name!==n?(n=o.author?.name??null,this._lastMessageAuthor=n,o):{...o,author:null})}rerenderMessages(t){if(!t||this._isRendering||this._getParentContainer()?.childElementCount>0)return;this._isRendering=!0,this.reset();const n=this._processMessages(t);n.forEach(o=>{this._addMessage(o,n)}),this._renderedMessages=[...n],this._isRendering=!1}reset(){this._messagesCounter=0,this._renderedMessages=[],this._messageElementsMap.clear();const t=this._getParentContainer();Array.from(t?.children||[]).forEach(o=>{this._renderer.removeChild(t,o)})}static{this.\u0275fac=function(n){return new(n||g)(e.\u0275\u0275directiveInject(e.Renderer2))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["crt-chat-messages"]],viewQuery:function(n,o){if(n&1&&e.\u0275\u0275viewQuery(H,7,e.ElementRef),n&2){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.messagesContainer=i.first)}},inputs:{messages:"messages"},ngContentSelectors:R,decls:6,vars:0,consts:[["messages",""],[1,"wrapper"],[1,"header-container"],[1,"messages-container"]],template:function(n,o){n&1&&(e.\u0275\u0275projectionDef(w),e.\u0275\u0275elementStart(0,"div",1)(1,"div",2),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275template(4,E,0,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()())}})}}(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array),(0,s.__metadata)("design:paramtypes",[Array])],g.prototype,"messages",null);var _=a(1034),f=a(96677),h=a(23872),l=a(40297),y=a(79111),M=a(92340),Me=a(86432);function Ee(r,t){if(r&1&&e.\u0275\u0275element(0,"crt-image-input",10),r&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",n.author.photo)("placeholder",n.author.name)}}function xe(r,t){if(r&1&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275template(1,Ee,1,2,"crt-image-input",8),e.\u0275\u0275element(2,"crt-label",9),e.\u0275\u0275elementEnd()),r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.shouldShowImage),e.\u0275\u0275advance(),e.\u0275\u0275property("caption",n.author.name)}}let j=class Ne{constructor(){this.ignoredAuthors=["Creatio.ai"]}get shouldShowImage(){return!!(this.author&&!this.ignoredAuthors.includes(this.author.name))}_initAnimation(){this.typingAnimation={animationData:()=>a.e(7228).then(a.t.bind(a,37228,19)),autoplay:!0,loop:!0}}ngOnInit(){this._initAnimation()}static{this.\u0275fac=function(n){return new(n||Ne)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ne,selectors:[["crt-chat-typing"]],inputs:{author:"author",message:"message",loading:"loading"},decls:7,vars:3,consts:[[1,"typing"],["class","author",4,"ngIf"],[1,"typing-message"],[1,"animation"],["width","16px","height","16px",3,"config"],[1,"text"],["labelColor","var(--crt-palette-label-500)","labelType","caption","labelFontSize","10px",1,"typing-text",3,"caption"],[1,"author"],["readonly","true","class","author-image","placeholderMode","abbreviation","borderRadius","large","positioning","cover","size","extra-small",3,"value","placeholder",4,"ngIf"],["labelColor","var(--crt-palette-label-500)","labelType","caption","labelFontSize","12px",1,"author-text",3,"caption"],["readonly","true","placeholderMode","abbreviation","borderRadius","large","positioning","cover","size","extra-small",1,"author-image",3,"value","placeholder"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,xe,3,2,"div",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3),e.\u0275\u0275element(4,"crt-lottie",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275element(6,"crt-label",6),e.\u0275\u0275elementEnd()()()),n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.author),e.\u0275\u0275advance(3),e.\u0275\u0275property("config",o.typingAnimation),e.\u0275\u0275advance(2),e.\u0275\u0275property("caption",o.message))},dependencies:[l.NgIf,y.V,M.g,Me.w],styles:[".author[_ngcontent-%COMP%], .typing-message[_ngcontent-%COMP%]{display:flex;gap:8px;margin:10px 0}"]})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",h.B)],j.prototype,"author",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",String)],j.prototype,"message",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],j.prototype,"loading",void 0),j=(0,s.__decorate)([(0,_.v)({type:"crt.ChatTyping",reuseStrategy:f.B.Reuse})],j);var S=a(34760),V=a(75456),ze=a(50999),p=a(10098),m=a(8144),v=a(48594),L=a(90204),B=a(43778),$=a(52989),ie=a(62115),Ge=a(58433);const lt=()=>({width:"80%",height:"32px","border-radius":"8px"}),dt=()=>[1,2,3,4],pt=(r,t)=>({left:r,right:t}),mt=()=>({width:"60%",height:"16px","border-radius":"16px"}),ht=()=>({width:"80%",height:"104px","border-radius":"16px"});function ut(r,t){if(r&1&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275element(1,"crt-skeleton-loader",1)(2,"crt-skeleton-loader",7),e.\u0275\u0275elementEnd()),r&2){const n=t.index;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,pt,(n+1)%2===0,(n+1)%2!==0)),e.\u0275\u0275advance(),e.\u0275\u0275property("styles",e.\u0275\u0275pureFunction0(6,mt)),e.\u0275\u0275advance(),e.\u0275\u0275property("styles",e.\u0275\u0275pureFunction0(7,ht))}}class oe{constructor(){}static{this.\u0275fac=function(n){return new(n||oe)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:oe,selectors:[["crt-conversation-skeleton"]],decls:6,vars:4,consts:[[1,"conversation-skeleton-container"],["appearance","line","count","1",1,"caption",3,"styles"],[1,"divider"],[1,"messages"],["class","item-skeleton",3,"ngClass",4,"ngFor","ngForOf"],[1,"input-container"],[1,"item-skeleton",3,"ngClass"],["appearance","line","count","1",1,"content",3,"styles"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"crt-skeleton-loader",1)(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275template(4,ut,3,8,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"div",5),e.\u0275\u0275elementEnd()),n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275property("styles",e.\u0275\u0275pureFunction0(2,lt)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(3,dt)))},dependencies:[l.NgClass,l.NgForOf,Ge.W],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;justify-content:center}.conversation-skeleton-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;max-width:800px;height:100%}.conversation-skeleton-container[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:16px 0 24px;width:100%}.conversation-skeleton-container[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:16px}.conversation-skeleton-container[_ngcontent-%COMP%]   .item-skeleton[_ngcontent-%COMP%]{margin:16px 8px 0}.conversation-skeleton-container[_ngcontent-%COMP%]   .item-skeleton.right[_ngcontent-%COMP%]{text-align:right}.conversation-skeleton-container[_ngcontent-%COMP%]   .item-skeleton.left[_ngcontent-%COMP%]{text-align:left}.conversation-skeleton-container[_ngcontent-%COMP%]   .item-skeleton[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-bottom:8px}.conversation-skeleton-container[_ngcontent-%COMP%]   .item-skeleton[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-bottom:16px}.conversation-skeleton-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{padding:12px 8px;flex-shrink:0;border-radius:8px;height:80px}"]})}}var Q=a(79772);const gt=["typing"],_t=["contentWrap"],Ct=[[["","information",""]],[["","placeholder",""]],[["","tools",""]],[["","actions",""]],[["","typing",""]]],ft=["[information]","[placeholder]","[tools]","[actions]","[typing]"];function vt(r,t){r&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",12),e.\u0275\u0275projection(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"div",13),e.\u0275\u0275elementContainerEnd())}function yt(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-button",14),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onLoadPreviousMessagesClicked())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}r&2&&(e.\u0275\u0275property("size","medium"),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,2,"Conversation.LoadPreviousChat")))}function Mt(r,t){r&1&&(e.\u0275\u0275elementStart(0,"div",15,2),e.\u0275\u0275projection(2,4),e.\u0275\u0275elementEnd())}function Et(r,t){if(r&1&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),r&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(n.unreadMessages>9?"9+":n.unreadMessages)}}function xt(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.scrollToLastMessage())}),e.\u0275\u0275template(1,Et,2,1,"span",17),e.\u0275\u0275elementStart(2,"div",18),e.\u0275\u0275element(3,"mat-icon",19),e.\u0275\u0275elementEnd()()}if(r&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.unreadMessages>0)}}function bt(r,t){if(r&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,vt,4,0,"ng-container",4),e.\u0275\u0275elementStart(2,"div",5),e.\u0275\u0275projection(3),e.\u0275\u0275elementStart(4,"div",6,1),e.\u0275\u0275template(6,yt,3,4,"crt-button",7),e.\u0275\u0275elementStart(7,"crt-chat-messages",8),e.\u0275\u0275projection(8,1,[1,"messages-header"]),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Mt,3,0,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,xt,4,1,"div",10),e.\u0275\u0275elementStart(11,"div",11),e.\u0275\u0275projection(12,2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!n.isEmbeddedMode),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.hasPreviousMessages),e.\u0275\u0275advance(),e.\u0275\u0275property("messages",n.messages),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isTyping),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.isScrolledUp)}}function It(r,t){r&1&&e.\u0275\u0275element(0,"crt-conversation-skeleton")}let I=class Ue extends m.Mm{get _messagesContainer(){return this._chatMessagesComponent?.messagesContainer?.nativeElement?.parentElement}set conversationEvent(t){t?.forEach(n=>{n.name===B.R&&(this._chatMessagesComponent.reset(),this.isScrolledUp=!1,this.unreadMessages=0)}),t?.length&&this.conversationEventChange.emit([])}constructor(t){super(t),this.injector=t,this._scrollOnOpen=!0,this.unreadMessages=0,this.isScrolledUp=!1,this.actions=[],this.information=[],this.tools=[],this.placeholder=[],this.disableAutoScroll=!1,this.typing=[],this.messages=[],this.hasPreviousMessages=!1,this.isTyping=!1,this.isEmbeddedMode=!1,this.conversationEventChange=new e.EventEmitter,this.paginationChange=new e.EventEmitter,this.loadPreviousMessages=new e.EventEmitter,this._observeLastVisibleMessageElement=()=>{const n=this._messagesContainer.querySelectorAll(`[${this._chatMessagesComponent.messagePositionAttributeName}]`),o=n.length,i=this._getLastVisibleMessageElement(n),c=i?parseInt(i.getAttribute(this._chatMessagesComponent.messagePositionAttributeName)):0;this.isScrolledUp=c<o,this.unreadMessages=Math.min(o-c,this.unreadMessages||0),this.changeDetectorRef.detectChanges()}}_scrollToBottom(t=!1){!this.isScrolledUp&&(!this.disableAutoScroll||t)&&setTimeout(()=>{(this._typingContainer?.nativeElement||this._messagesContainer?.lastChild)?.scrollIntoView?.({block:"start"}),this.isScrolledUp=!1},0)}_resetScroll(){this.isScrolledUp=!1,this._scrollOnOpen=!0,this._observer?.disconnect()}_startObserve(t,n){t&&(this._stopObserve(t),this._observer=new IntersectionObserver(o=>n(o.filter(i=>i.target===t),t)),this._observer.observe(t))}_stopObserve(t){this._observer&&this._observer.unobserve(t)}_observeMessages(){if(!this._messagesContainer)return;new MutationObserver(n=>{const o=n.filter(i=>i.type==="childList"&&i.addedNodes.length>0).pop();if(o){const i=o.addedNodes[o.addedNodes.length-1];i.nodeType===Node.ELEMENT_NODE&&this._processLastElement(i)}}).observe(this._messagesContainer,{childList:!0,subtree:!1})}_processLastElement(t){t?.message?.direction===v.Tt.Outcoming?(this.isScrolledUp=!1,this._scrollToBottom()):this.isScrolledUp&&(this.unreadMessages=(this.unreadMessages||0)+1,this.changeDetectorRef.detectChanges()),this.isScrolledUp||(this._observer?.disconnect(),this._startObserve(t,n=>{n.forEach(o=>{this.isScrolledUp=!o.isIntersecting&&this.messages?.length>0,this.changeDetectorRef.detectChanges()})}))}_getLastVisibleMessageElement(t){const n=this._contentWrap.nativeElement;let o=null;return t.forEach(i=>{if(i instanceof HTMLElement){const c=i.getBoundingClientRect(),u=n.getBoundingClientRect();c.top<u.bottom&&c.bottom>u.top&&(o=i)}}),o}ngAfterViewInit(){super.ngAfterViewInit(),this._observeMessages(),this._contentWrap?.nativeElement?.addEventListener?.("scroll",this._observeLastVisibleMessageElement)}ngAfterViewChecked(){this.elementRef.nativeElement?.checkVisibility?.()?this._scrollOnOpen&&(this._scrollToBottom(),this._scrollOnOpen=!1):this._resetScroll(),this._chatMessagesComponent?.rerenderMessages(this.messages)}ngOnChanges(t){"messages"in t&&t.messages?.previousValue?.length===0&&(this.unreadMessages=0,this.isScrolledUp=!1),this.isScrolledUp||this._scrollToBottom()}ngOnDestroy(){super.ngOnDestroy(),this._contentWrap?.nativeElement?.removeEventListener?.("scroll",this._observeLastVisibleMessageElement)}scrollToLastMessage(){this.isScrolledUp=!1,this._scrollToBottom(!0)}onLoadPreviousMessagesClicked(){this.loadPreviousMessages.emit()}static{this.\u0275fac=function(n){return new(n||Ue)(e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ue,selectors:[["crt-conversation"]],viewQuery:function(n,o){if(n&1&&(e.\u0275\u0275viewQuery(g,5),e.\u0275\u0275viewQuery(gt,5,e.ElementRef),e.\u0275\u0275viewQuery(_t,5,e.ElementRef)),n&2){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o._chatMessagesComponent=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o._typingContainer=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o._contentWrap=i.first)}},inputs:{actions:"actions",information:"information",tools:"tools",placeholder:"placeholder",disableAutoScroll:"disableAutoScroll",typing:"typing",conversationEvent:"conversationEvent",messages:"messages",hasPreviousMessages:"hasPreviousMessages",isTyping:"isTyping",isEmbeddedMode:"isEmbeddedMode"},outputs:{conversationEventChange:"conversationEventChange",paginationChange:"paginationChange",loadPreviousMessages:"loadPreviousMessages"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:ft,decls:3,vars:2,consts:[["skeleton",""],["contentWrap",""],["typing",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"conversation-container"],[1,"chat-panel-content-wrap"],["class","load-previous-messages","color","outline",3,"size","clicked",4,"ngIf"],[3,"messages"],["class","typing",4,"ngIf"],["class","scroll-to-bottom",3,"click",4,"ngIf"],[1,"tools"],[1,"actions-container"],[1,"divider"],["color","outline",1,"load-previous-messages",3,"clicked","size"],[1,"typing"],[1,"scroll-to-bottom",3,"click"],["class","unread-messages",4,"ngIf"],[1,"arrow-wrap"],["svgIcon","arrow-down-heavy"],[1,"unread-messages"]],template:function(n,o){if(n&1&&(e.\u0275\u0275projectionDef(Ct),e.\u0275\u0275template(0,bt,13,5,"ng-container",3)(1,It,1,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),n&2){const i=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!o.loading)("ngIfElse",i)}},dependencies:[$.MatIcon,l.NgIf,ie.B,g,oe,Q.TranslatePipe],styles:[".chat-panel-content-wrap[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;box-sizing:border-box;overflow-x:hidden}.chat-panel-content-wrap[_ngcontent-%COMP%]   crt-button.load-previous-messages[_ngcontent-%COMP%]{display:block;margin:8px auto 16px}.conversation-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow:auto;width:100%;max-width:800px;align-self:center}.conversation-container[_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]{position:sticky;margin-left:auto;margin-right:auto;transform:translate(-50%);bottom:4px;display:inline-flex;flex-direction:column;align-items:center;border-radius:16px}.conversation-container[_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]   .unread-messages[_ngcontent-%COMP%]{position:fixed;min-width:8px;height:16px;top:-8px;left:-4px;border-radius:8px;padding:0 4px;text-align:center;direction:ltr}.conversation-container[_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]   .arrow-wrap[_ngcontent-%COMP%]{width:32px;height:32px;cursor:pointer;display:flex;align-items:center;justify-content:center}.conversation-container[_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]   .arrow-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:16px;height:16px}.tools[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding-top:12px;padding-bottom:10px}[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;margin:24px 0 16px;width:100%}[dir=rtl][_ngcontent-%COMP%]   .scroll-to-bottom[_ngcontent-%COMP%]   .unread-messages[_ngcontent-%COMP%]{left:unset;right:-4px}.actions-container[_ngcontent-%COMP%]{width:100%}"]})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array)],I.prototype,"actions",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array)],I.prototype,"information",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array)],I.prototype,"tools",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array)],I.prototype,"placeholder",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Object)],I.prototype,"disableAutoScroll",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array)],I.prototype,"typing",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array),(0,s.__metadata)("design:paramtypes",[Array])],I.prototype,"conversationEvent",null),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array)],I.prototype,"messages",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Object)],I.prototype,"hasPreviousMessages",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Object)],I.prototype,"isTyping",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Object)],I.prototype,"isEmbeddedMode",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],I.prototype,"conversationEventChange",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],I.prototype,"paginationChange",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],I.prototype,"loadPreviousMessages",void 0),I=(0,s.__decorate)([(0,_.v)({type:"crt.Conversation",contentSlots:["actions","information","typing","tools","placeholder"]}),(0,V.f)({toolbarConfig:{requiredFeatures:{ShowDesignerDemoItems:!0},position:110,groupType:ze.h.Components,icon:a(70807),defaultPropertyValues:{actions:[],information:[],messages:[],tools:[{name:"MessageEditor_"+L.N,type:"crt.MessageEditor",items:[{name:"MessageEditorBody_"+L.N,type:"crt.MessageEditorBody",inputs:[{name:"MessageEditorInput_"+L.N,type:"crt.MessageEditorInput"}]}]}],placeholder:[],typing:[]},addCommandTypeName:"crt.AddConversationCommand"},designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.ConversationPropertiesPanel",viewElementGroupType:p.J.LayoutElements,typeCaption:"Conversation.Caption",placeholderSize:{height:"1000px"}}),(0,s.__metadata)("design:paramtypes",[e.Injector])],I);var ae=a(68712);let q=class _e extends ae.K{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(_e)))(o||_e)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:_e,selectors:[["crt-message-editor-reply"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,o){}})}};q=(0,s.__decorate)([(0,_.v)({type:"crt.MessageEditorReply"})],q);const Pt=["items"];function St(r,t){r&1&&e.\u0275\u0275elementContainer(0)}function Ot(r,t){if(r&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,St,1,0,"ng-container",3),e.\u0275\u0275elementEnd()),r&2){const n=t.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",n)}}function Tt(r,t){if(r&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ot,2,1,"div",2),e.\u0275\u0275elementContainerEnd()),r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",n.itemsTemplates)}}let z=class Ce extends ae.K{set items(t){this._items=t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(Ce)))(o||Ce)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ce,selectors:[["crt-message-editor"]],contentQueries:function(n,o,i){if(n&1&&e.\u0275\u0275contentQuery(i,Pt,4,e.TemplateRef),n&2){let c;e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(o.itemsTemplates=c)}},inputs:{items:"items"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"message-editor"],[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"crt-message-editor-reply"),e.\u0275\u0275template(2,Tt,2,1,"ng-container",1),e.\u0275\u0275elementEnd()),n&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.itemsTemplates==null?null:o.itemsTemplates.length))},dependencies:[l.NgForOf,l.NgIf,l.NgTemplateOutlet,q],styles:["[_nghost-%COMP%]{width:100%}"]})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array),(0,s.__metadata)("design:paramtypes",[Array])],z.prototype,"items",null),z=(0,s.__decorate)([(0,_.v)({type:"crt.MessageEditor",reuseStrategy:f.B.Reuse,contentSlots:[{name:"items",lazy:!0,input:!0}]}),(0,V.f)({propertiesPanelComponentTypeName:"crt.MessageEditorPropertiesPanel",viewElementGroupType:p.J.Components,typeCaption:"MessageEditor.Caption"})],z);var be=a(56711),C=a(62278),re=a(59969),Ie=a(90895);const wt=["popupContainer"],At=r=>({"active-item":r});function Dt(r,t){if(r&1&&(e.\u0275\u0275elementStart(0,"span",8),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),r&2){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275propertyInterpolate("title",n.description),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(n.description)}}function Rt(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(n).$implicit,c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.selectMention(i))}),e.\u0275\u0275element(1,"crt-image-input",4),e.\u0275\u0275elementStart(2,"div",5)(3,"span",6),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Dt,2,2,"span",7),e.\u0275\u0275elementEnd()()}if(r&2){const n=t.$implicit,o=t.index,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,At,o===i.activeIndex)),e.\u0275\u0275advance(),e.\u0275\u0275property("value",n.photo||null)("placeholder",n.displayValue),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.displayValue),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.description)}}class ce{constructor(){this._changeDetector=(0,e.inject)(e.ChangeDetectorRef),this._liveAnnouncementService=(0,e.inject)(re.DW),this._isVisible=!1,this.mentions=[],this.activeIndex=-1,this.mentionSelected=new e.EventEmitter,this.scrolledToBottom=new e.EventEmitter,this._scrollHandler=t=>{const n=t.target;n.scrollTop+n.clientHeight>=n.scrollHeight-20&&this.scrolledToBottom.emit()}}selectMention(t){this.mentionSelected.emit(t),this.hide()}show(t){this._isVisible=!0;const n=10,o=this.popupContainerRef?.nativeElement;if(o){const c=window.innerHeight-t.top;o.classList.remove("popup-hidden"),Object.assign(o.style,{position:"absolute",width:`${t.width}px`,left:`${t.left}px`,bottom:`${c+n}px`,top:"auto"}),setTimeout(()=>{o.getBoundingClientRect().top<0&&Object.assign(o.style,{bottom:"auto",top:`${t.top}px`,maxHeight:`${t.top-n}px`})},0)}this._changeDetector.detectChanges()}hide(){this._isVisible=!1,this.popupContainerRef?.nativeElement?.classList.add("popup-hidden")}isVisible(){return this._isVisible}getItems(){return Array.from(this.popupContainerRef?.nativeElement?.children||[])}highlightItem(t){if(this.getItems().forEach((o,i)=>{o.classList.toggle("active-item",i===t)}),t>=0&&t<this.mentions.length){const o=this.mentions[t],i=`${o.displayValue} ${o.description||""}`.trim();this._liveAnnouncementService.announce(i,"polite")}}selectItem(t){t>=0&&t<this.mentions.length&&this.selectMention(this.mentions[t])}scrollToItem(t){this.popupContainerRef?.nativeElement&&t>=0&&this.getItems()[t]?.scrollIntoView({behavior:"auto",block:"nearest"})}ngAfterViewInit(){this.popupContainerRef?.nativeElement?.addEventListener("scroll",this._scrollHandler)}ngOnDestroy(){this.popupContainerRef?.nativeElement?.removeEventListener("scroll",this._scrollHandler)}static{this.\u0275fac=function(n){return new(n||ce)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ce,selectors:[["crt-mention-popup"]],viewQuery:function(n,o){if(n&1&&e.\u0275\u0275viewQuery(wt,5),n&2){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.popupContainerRef=i.first)}},inputs:{mentions:"mentions",activeIndex:"activeIndex"},outputs:{mentionSelected:"mentionSelected",scrolledToBottom:"scrolledToBottom"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:3,vars:3,consts:[["popupContainer",""],[1,"container"],["class","item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"item",3,"click","ngClass"],["readonly","true","placeholderMode","abbreviation","borderRadius","large","positioning","cover","size","small","aria-hidden","true",1,"image",3,"value","placeholder"],[1,"text"],[1,"name"],["class","description",3,"title",4,"ngIf"],[1,"description",3,"title"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",1,0),e.\u0275\u0275template(2,Rt,6,7,"div",2),e.\u0275\u0275elementEnd()),n&2&&(e.\u0275\u0275classProp("popup-hidden",!(o.mentions!=null&&o.mentions.length)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.mentions))},dependencies:[l.CommonModule,l.NgClass,l.NgForOf,l.NgIf,Ie.J,M.g],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{position:absolute;border-radius:4px;max-width:500px;max-height:276px;overflow-y:auto;z-index:1000;padding:8px 0 8px 8px}[_nghost-%COMP%]   .container.popup-hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 16px;cursor:pointer;border-radius:4px;gap:8px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;width:calc(100% - 32px);max-width:100%;flex-direction:column;gap:2px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"]})}}class ee{get mentionSymbol(){return this._mentionSymbol}constructor(t,n,o){this._injector=t,this._el=n,this._viewContainerRef=o,this._subscriptions=new C.Subscription,this._activeIndex=-1,this._page=0,this._pageSize=15,this._currentSearch="",this._mentionSymbol="@",this._mentionClassName="mention",this._lastRange=null,this._searchSubject=new C.Subject,this.mentionSelected=new e.EventEmitter}onInput(t){const n=t.target,o=window.getSelection();if(!o||o.rangeCount===0){this._popupComponent.hide();return}const i=o.getRangeAt(0),c=i.startOffset;if(!(n.textContent||n.innerHTML)){this._popupComponent.hide();return}const O=i.startContainer.textContent.substring(0,c),P=O.lastIndexOf(this._mentionSymbol);if(this._lastRange=i.cloneRange(),P!==-1){const D=O.substring(P+1);this._page=0,this._fetchMentions(D)}else this._popupComponent.hide()}_fetchMentions(t,n=!1){this._currentSearch=t,this._searchSubject.next({search:t,append:n})}_executeSearch(t,n){const o=this._page*this._pageSize;this.mentionService.getContacts(t,o,this._pageSize).pipe((0,C.take)(1)).subscribe(i=>{this._populatePopup(i,n)})}_createPopup(){this._componentRef=this._viewContainerRef.createComponent(ce,{injector:this._injector});const t=this._componentRef.location.nativeElement;document.body.appendChild(t),this._popupComponent=this._componentRef.instance,this._popupComponent.mentionSelected.subscribe(n=>this._selectMention(n)),this._popupComponent.scrolledToBottom.subscribe(()=>{this._page++,this._fetchMentions(this._currentSearch,!0)})}_populatePopup(t,n){if(t.length===0&&!n){this._popupComponent.hide();return}n||t.length===0?this._popupComponent.mentions=[...this._popupComponent.mentions,...t]:(this._popupComponent.mentions=t,this._page=0),this._popupComponent.activeIndex=this._activeIndex,this._popupComponent.show(this._el.nativeElement.getBoundingClientRect())}_selectMention(t){const n=this._el.nativeElement,o=window.getSelection(),i=this._lastRange||o.getRangeAt(0);if(i){const u=i.startContainer.textContent.substring(0,i.startOffset).lastIndexOf(this._mentionSymbol);if(u!==-1){const O=i.startContainer,P=O.textContent.substring(0,u);O.textContent=P,i.setStart(O,P.length),i.collapse(!0);const D=document.createElement("span");D.dataset.mention=t.value,Object.assign(D,{className:this._mentionClassName,contentEditable:"false",textContent:t.displayValue}),i.insertNode(D),n.childElementCount===1&&i.insertNode(document.createTextNode("\u200B")),this._forcePlaceCursorAtEnd(D)}}this.mentionSelected.emit(t),this._popupComponent.hide(),n.focus()}_handleKeyboard(t){if(!this._popupComponent.isVisible())return;const n=this._popupComponent.getItems();if(n.length!==0)switch(t.key){case"ArrowDown":t.preventDefault(),this._activeIndex=(this._activeIndex+1)%n.length,this._popupComponent.highlightItem(this._activeIndex),this._activeIndex>=n.length-3&&(this._page++,this._fetchMentions(this._currentSearch,!0)),this._popupComponent.scrollToItem(this._activeIndex);break;case"ArrowUp":t.preventDefault(),this._activeIndex=(this._activeIndex-1+n.length)%n.length,this._popupComponent.highlightItem(this._activeIndex),this._popupComponent.scrollToItem(this._activeIndex);break;case"Enter":t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this._activeIndex>=0&&this._activeIndex<n.length&&this._popupComponent.selectItem(this._activeIndex);break;case"Remove":case"Delete":this._handleRemove(t),t.preventDefault();break;case"Escape":t.preventDefault(),this._popupComponent.hide();break;case"Tab":this._popupComponent.hide();break}}_handleRemove(t){const o=window.getSelection().getRangeAt(0);if(o.collapsed&&o.startContainer.nodeType===3){const i=o.startContainer,c=t.key==="Backspace"?i.previousSibling:i.nextSibling;c instanceof HTMLElement&&c.classList.contains(this._mentionClassName)&&c.remove()}}_forcePlaceCursorAtEnd(t){const n=t.parentNode,o=document.createTextNode("\xA0");t.nextSibling?n.insertBefore(o,t.nextSibling):n.appendChild(o);const i=document.createRange();i.setStart(o,1),i.collapse(!0);const c=window.getSelection();c.removeAllRanges(),c.addRange(i)}_subscribeClick(){this._subscriptions.add((0,C.fromEvent)(document,"click",{capture:!0}).subscribe(t=>{if(this._popupComponent?.isVisible()){const n=t.target,o=this._popupComponent.popupContainerRef?.nativeElement,i=this._el.nativeElement;o&&!o.contains(n)&&n!==i&&!i.contains(n)&&this._popupComponent.hide()}}))}_subscribeKeydown(){this._subscriptions.add((0,C.fromEvent)(this._el.nativeElement,"keydown",{capture:!0}).subscribe(t=>this._handleKeyboard(t)))}ngOnInit(){this._createPopup(),this._subscriptions.add(this._searchSubject.pipe((0,C.debounceTime)(10)).subscribe(({search:t,append:n})=>{this._executeSearch(t,n)})),this._subscribeClick(),this._subscribeKeydown()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._componentRef?.destroy()}static{this.\u0275fac=function(n){return new(n||ee)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.ViewContainerRef))}}static{this.\u0275dir=e.\u0275\u0275defineDirective({type:ee,selectors:[["","crtMention",""]],hostBindings:function(n,o){n&1&&e.\u0275\u0275listener("input",function(c){return o.onInput(c)})},inputs:{mentionService:"mentionService"},outputs:{mentionSelected:"mentionSelected"},standalone:!0})}}var le=a(28399),de=a(96158),Lt=a(19344),Bt=a(54327);const kt=["crtInput"],Ft=["editableDiv"],jt=["plainInput"],Vt=r=>({"message-editor-input-focused":r});function Ht(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-input",5,1),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275listener("focusout",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onBlur())})("crtKeyboardHotkeyPressed",function(i){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onHotKeyPressed(i))}),e.\u0275\u0275elementEnd()}if(r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,5,"MessageEditor.InputPlaceholder")),e.\u0275\u0275property("control",n.messageFormControl)("labelPosition","hidden")("multiline",!0)("crtKeyboardHotkeys",n.keyboardHotkeysMap)}}function Nt(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6,2),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("input",function(i){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onContentChanged(i))})("focusout",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onBlur())})("mentionSelected",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onMentionSelected())})("crtKeyboardHotkeyPressed",function(i){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onHotKeyPressed(i))}),e.\u0275\u0275elementEnd()}if(r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("mentionService",n.mentionService)("crtKeyboardHotkeys",n.keyboardHotkeysMap),e.\u0275\u0275attribute("data-placeholder",e.\u0275\u0275pipeBind1(2,3,"MessageEditor.InputPlaceholder"))}}let A=class fe extends ae.K{constructor(){super(...arguments),this._publishMessageHotKeys=["Enter"],this._publishKeyboardAction="publishMessage",this.keyboardHotkeysMap={keydown:{[this._publishKeyboardAction]:{sequence:this._publishMessageHotKeys}}},this.messageFormControl=new be.FormControl(""),this.inputMode="text",this.getMentionService=new e.EventEmitter,this.sendHotkeyPressed=new e.EventEmitter,this.chatInputChange=new e.EventEmitter,this.isFocusedChange=new e.EventEmitter,this.sendMessage=new e.EventEmitter}set action(t){switch(t){case de.g.TriggerMention:this._triggerMention();break;case de.g.Focus:this.onMessageEditorAreaClicked();break}}set chatInput(t){this.inputMode==="text"?t!==this.messageFormControl?.value&&this.messageFormControl?.setValue(t):this.inputMode==="html"&&t!==this.editableDiv?.nativeElement.innerHTML&&this.editableDiv?.nativeElement&&(this.editableDiv.nativeElement.innerHTML=t)}_setIsFocused(t){this.isFocused=t,this.isFocusedChange.emit(t)}_getMentionService(t){this.mentionService=t}_triggerMention(){if(this.inputMode!=="html"){console.warn('"Mention" action is only supported for html input mode');return}const t=new Event("input",{bubbles:!0,cancelable:!0}),n=this.mentionDirective.mentionSymbol,o=this.editableDiv.nativeElement;o.innerHTML==="<br>"?o.innerHTML=n:o.innerHTML.endsWith(n)?o.innerHTML=o.innerHTML.slice(0,-n.length):o.innerHTML+=n;const c=o.lastChild||o,u=document.createRange();u.setStart(c,c.textContent.length),u.collapse(!0);const O=window.getSelection();O.removeAllRanges(),O.addRange(u),o.focus(),o.dispatchEvent(t)}onBlur(){this._setIsFocused(!1)}ngOnInit(){this.getMentionService.emit(this._getMentionService.bind(this)),this.messageFormControl?.valueChanges.subscribe(t=>{this.onInputContentChanged(t)})}onContentChanged(t){const n=t.target.innerHTML;this.chatInput=n,this.chatInputChange.emit(n)}onMessageEditorAreaClicked(){this.isFocused||(this._setIsFocused(!0),this.inputMode==="text"?this.crtInput?.focus():this.editableDiv.nativeElement.focus())}onInputContentChanged(t){t!==this.chatInput&&(this.chatInput=t,this.chatInputChange.emit(t))}onHotKeyPressed({action:t,event:n}){if(n.shiftKey===!1&&t===this._publishKeyboardAction){if(n.preventDefault(),this.inputMode==="text")(0,le.isEmpty)(this.messageFormControl?.value)||this.sendMessage.emit();else if(this.inputMode==="html"){const o=this.editableDiv.nativeElement.innerHTML.trim();o&&(this.sendMessage.emit(o),this.editableDiv.nativeElement.innerHTML="")}}}onMentionSelected(){const t=this.editableDiv.nativeElement.innerHTML;this.chatInput=t,this.chatInputChange.emit(t),this.onMessageEditorAreaClicked()}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(fe)))(o||fe)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:fe,selectors:[["crt-message-editor-input"]],viewQuery:function(n,o){if(n&1&&(e.\u0275\u0275viewQuery(ee,5),e.\u0275\u0275viewQuery(kt,5),e.\u0275\u0275viewQuery(Ft,5),e.\u0275\u0275viewQuery(jt,5)),n&2){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.mentionDirective=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.crtInput=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.editableDiv=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.plainInput=i.first)}},inputs:{inputMode:"inputMode",action:"action",chatInput:"chatInput",isFocused:"isFocused",mentionService:"mentionService"},outputs:{getMentionService:"getMentionService",sendHotkeyPressed:"sendHotkeyPressed",chatInputChange:"chatInputChange",isFocusedChange:"isFocusedChange",sendMessage:"sendMessage"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:5,consts:[["divMode",""],["plainInput","","crtInput",""],["editableDiv",""],[1,"message-editor-input",3,"click","ngClass"],[3,"control","labelPosition","multiline","placeholder","crtKeyboardHotkeys","focusout","crtKeyboardHotkeyPressed",4,"ngIf","ngIfElse"],[3,"focusout","crtKeyboardHotkeyPressed","control","labelPosition","multiline","placeholder","crtKeyboardHotkeys"],["contenteditable","true","tabindex","0","crtMention","",1,"editable-div",3,"input","focusout","mentionSelected","crtKeyboardHotkeyPressed","mentionService","crtKeyboardHotkeys"]],template:function(n,o){if(n&1){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(o.onMessageEditorAreaClicked())}),e.\u0275\u0275template(1,Ht,4,7,"crt-input",4)(2,Nt,3,5,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(n&2){const i=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,Vt,o.isFocused===!0)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.inputMode==="text")("ngIfElse",i)}},dependencies:[l.NgClass,l.NgIf,Lt.j,Bt.h,ee,Q.TranslatePipe],styles:[".message-editor-input[_ngcontent-%COMP%]{display:flex;min-height:80px;max-height:147px;border:1px solid var(--crt-palette-border-900);border-radius:8px;padding-bottom:32px}.message-editor-input.message-editor-input-focused[_ngcontent-%COMP%], .message-editor-input[_ngcontent-%COMP%]:hover{border:1px solid var(--crt-palette-primary-800)}.message-editor-input[_ngcontent-%COMP%]   crt-input[_ngcontent-%COMP%], .message-editor-input[_ngcontent-%COMP%]   .editable-div[_ngcontent-%COMP%]{flex:1;overflow-y:scroll}.message-editor-input[_ngcontent-%COMP%]   .editable-div[_ngcontent-%COMP%]{outline:none;padding:12px}"],changeDetection:0})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",String)],A.prototype,"inputMode",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",e.EventEmitter)],A.prototype,"getMentionService",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[String])],A.prototype,"action",null),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[String])],A.prototype,"chatInput",null),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],A.prototype,"sendHotkeyPressed",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",e.EventEmitter)],A.prototype,"chatInputChange",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",e.EventEmitter)],A.prototype,"isFocusedChange",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],A.prototype,"sendMessage",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],A.prototype,"isFocused",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Object)],A.prototype,"mentionService",void 0),A=(0,s.__decorate)([(0,_.v)({type:"crt.MessageEditorInput"})],A);var G=a(81517),X=a(2828);let Pe=class extends G.S{};Pe=(0,s.__decorate)([(0,X.$)({type:"crt.TriggerMentionRequest"})],Pe);var Ut=a(71252);let K=class Ke extends m.Mm{set caption(t){this._consentText=t}get caption(){return this._sanitizer.bypassSecurityTrustHtml(this._consentText)}constructor(t){super(t),this.acceptClicked=new e.EventEmitter,this._sanitizer=t.get(Ut.DomSanitizer)}agreeClicked(){this.acceptClicked.emit()}static{this.\u0275fac=function(n){return new(n||Ke)(e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ke,selectors:[["crt-chat-disclaimer"]],inputs:{consentCode:"consentCode",caption:"caption"},outputs:{acceptClicked:"acceptClicked"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:4,consts:[[1,"outer-border"],[1,"disclaimer-message",3,"innerHTML"],["color","primary","size","large","data-qa","button-disclaimer-agree",1,"agree-button",3,"clicked"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"span",1),e.\u0275\u0275elementStart(2,"crt-button",2),e.\u0275\u0275listener("clicked",function(){return o.agreeClicked()}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()),n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",o.caption,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"CopilotDisclaimer.AgreeButton")," "))},dependencies:[ie.B,Q.TranslatePipe],styles:['.outer-border[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:12px 16px;background:linear-gradient(90deg,#fafbfe,#fcfafe);border-radius:15px;border-width:1px;z-index:1}.outer-border[_ngcontent-%COMP%]   .agree-button[_ngcontent-%COMP%]{padding-top:8px;float:inline-end}.outer-border[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;z-index:-1;background:linear-gradient(90deg,#c4bdff,#ecb5ff);border-radius:16px}.outer-border[_ngcontent-%COMP%]:after{background:linear-gradient(90deg,#fafbfe,#fcfafe);content:"";position:absolute;inset:1px;border-radius:15px;z-index:-1}.disclaimer-message[_ngcontent-%COMP%]{display:block}']})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",String)],K.prototype,"consentCode",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],K.prototype,"acceptClicked",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[String])],K.prototype,"caption",null),K=(0,s.__decorate)([(0,_.v)({type:"crt.ChatDisclaimer",reuseStrategy:f.B.Reuse}),(0,s.__metadata)("design:paramtypes",[e.Injector])],K);var Kt=a(41571);class Xe{}var Wt=a(84137),Qt=a(38884);const $t=()=>({dataType:9});function zt(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.chatClick())})("keydown.enter",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.chatClick())}),e.\u0275\u0275elementStart(1,"div",2),e.\u0275\u0275element(2,"crt-image-input",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",4)(4,"div",5),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"dateTimeFormat"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",7),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()()}if(r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275classMap(n.classes),e.\u0275\u0275advance(2),e.\u0275\u0275classMap(n.imageClass),e.\u0275\u0275property("value",n.chat.author.photo)("placeholder",n.chat.author.name)("customBorderWidth","1px")("crtTooltip",n.chat.author.name),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",n.chat.caption),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(n.chat.caption),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(8,13,n.chat.date,e.\u0275\u0275pureFunction0(16,$t))),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",n.chat.preview),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(n.chat.preview)}}let N=class We{get classes(){return this.isSelected&&this.isCombinedMode?"chat-item chat-item-selected":"chat-item"}get imageClass(){return this.chat?.author.name==="Creatio.ai"?"chat-author-default":"chat-author"}get isCombined(){return this.isCombinedMode}constructor(){this.chatClicked=new e.EventEmitter}_disableAvatarTabFocus(){document.querySelectorAll(".avatar *").forEach(n=>{n.setAttribute("tabindex","-1")})}chatClick(){this.chatClicked.emit(this.chat)}ngAfterViewInit(){this._disableAvatarTabFocus()}static{this.\u0275fac=function(n){return new(n||We)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:We,selectors:[["crt-chat-item"]],hostVars:2,hostBindings:function(n,o){n&2&&e.\u0275\u0275classProp("combined-item-mode",o.isCombined)},inputs:{chat:"chat",isCombinedMode:"isCombinedMode",isSelected:"isSelected"},outputs:{chatClicked:"chatClicked"},decls:1,vars:1,consts:[["tabindex","-1",3,"class","click","keydown.enter",4,"ngIf"],["tabindex","-1",3,"click","keydown.enter"],[1,"avatar"],["readonly","true","placeholderMode","abbreviation","borderRadius","large","positioning","cover","size","small",3,"value","placeholder","customBorderWidth","crtTooltip"],[1,"preview-container"],[1,"caption"],[1,"date"],[1,"preview"]],template:function(n,o){n&1&&e.\u0275\u0275template(0,zt,11,17,"div",0),n&2&&e.\u0275\u0275property("ngIf",o.chat)},dependencies:[l.NgIf,M.g,Wt.d,Qt.V],styles:[".chat-item[_ngcontent-%COMP%]{display:flex;padding:16px 16px 16px 8px;align-items:flex-start;align-self:stretch;min-width:0}.chat-item[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{margin:0 4px;display:flex;align-items:flex-end;padding-bottom:2px}.chat-item[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{display:grid;margin-left:8px;padding-top:2px;flex-direction:column;align-items:flex-start;gap:6px;flex:1 0 0;min-width:0;grid-template-columns:1fr auto;grid-template-rows:auto auto}.chat-item[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{align-items:center;gap:10px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;min-width:0;grid-column:1;grid-row:1}.chat-item[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-left:8px;white-space:nowrap;grid-column:2;grid-row:1}.chat-item[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;word-break:break-word;grid-column:1/3;grid-row:2}.chat-item-selected[_ngcontent-%COMP%]{border-top-left-radius:8px;border-bottom-left-radius:8px}[_nghost-%COMP%]:not(.combined-item-mode)   .chat-item[_ngcontent-%COMP%]:hover{cursor:pointer;border-radius:8px}.combined-item-mode[_nghost-%COMP%]   .chat-item[_ngcontent-%COMP%]:hover{cursor:pointer;border-top-left-radius:8px;border-bottom-left-radius:8px}"]})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Xe)],N.prototype,"chat",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],N.prototype,"isCombinedMode",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],N.prototype,"isSelected",void 0),N=(0,s.__decorate)([(0,_.v)({type:"crt.ChatItem"}),(0,s.__metadata)("design:paramtypes",[])],N);const Gt=["chatListContainer"],Xt=["chatItemRef"];function Jt(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-chat-item",7,3),e.\u0275\u0275listener("chatClicked",function(i){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.onChatClicked(i))}),e.\u0275\u0275elementEnd()}if(r&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("chat",n)("isCombinedMode",o.isCombinedMode)("isSelected",n.id===o.selectedChatId)}}function Zt(r,t){if(r&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"crt-skeleton-loader",8),e.\u0275\u0275elementContainerEnd()),r&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("styles",n.skeletonConfig)}}function Yt(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9,3)(2,"div",10),e.\u0275\u0275listener("crtObserveElementInViewportStateChange",function(i){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.onLastItemStateChange(i))}),e.\u0275\u0275elementEnd()()}}function qt(r,t){if(r&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Jt,2,3,"crt-chat-item",6)(2,Zt,2,1,"ng-container",5)(3,Yt,3,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),r&2){const n=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.chats),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.loading)("ngIfElse",n)}}function en(r,t){if(r&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11)(1,"div",12),e.\u0275\u0275element(2,"crt-lottie",13)(3,"crt-label",14),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementStart(5,"crt-button",15),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onCreateChatClicked())}),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd()()()}if(r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("config",n.noDataAnimationOptions),e.\u0275\u0275advance(),e.\u0275\u0275property("caption",e.\u0275\u0275pipeBind1(4,4,"ChatList.NoDataMessage")),e.\u0275\u0275advance(2),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(6,6,"ChatList.CreateChatButton")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,8,"ChatList.CreateChatButton")," ")}}let k=class ve extends m.Mm{constructor(){super(...arguments),this._rowsToLoadCount=15,this._focusedIndex=-1,this._destroy$=new C.Subject,this.skeletonConfig={display:"inline-flex",height:"80px",width:"100%","margin-bottom":"16px"},this.noDataAnimationOptions={animationData:()=>a.e(9295).then(a.t.bind(a,39295,19)),autoplay:!0,loop:!1},this.chatClicked=new e.EventEmitter,this.createChatClicked=new e.EventEmitter,this.loadData=new e.EventEmitter}get addCombinedModeClass(){return this.isCombinedMode}_containerFocusedHandler(t){if(this._focusedIndex=0,t.key!=="Enter")return;const n=this.chatItemElements?.first?.nativeElement;n&&(t.preventDefault(),n.focus())}_focusOnContainer(){if(this.loading)return;this._focusedIndex=0;const t=this.chatListContainerRef?.nativeElement;t&&t.focus()}_itemFocusedHandler(t,n,o){const i=o?this._focusedIndex+1:this._focusedIndex-1;if(o?i>n:i<n){this._focusOnContainer();return}this._focusedIndex=o?Math.min(i,n):Math.max(i,n),t.preventDefault()}_itemsFocusedHandler(t){const n=this.chatItemElements.toArray();if(n.length){if(t.key==="Enter"){const o=document.activeElement,i=n.findIndex(c=>c.nativeElement===o);i!==-1&&(this._focusedIndex=-1,this.onChatClicked(this.chats[i]))}if(t.key==="Escape"){this._focusOnContainer();return}t.key==="ArrowDown"||t.key==="Tab"&&!t.shiftKey?(this._itemFocusedHandler(t,n.length-1,!0),n[this._focusedIndex].nativeElement.focus()):(t.key==="ArrowUp"||t.key==="Tab"&&t.shiftKey)&&(this._itemFocusedHandler(t,0,!1),n[this._focusedIndex].nativeElement.focus())}}ngAfterViewInit(){this.chatItemElements.changes.pipe((0,C.takeUntil)(this._destroy$)).subscribe(()=>{setTimeout(()=>{const t=this.chatItemElements.toArray();t[this._focusedIndex]&&t[this._focusedIndex].nativeElement.focus()})})}onChatClicked(t){this.chatClicked.emit(t)}onCreateChatClicked(){this.createChatClicked.emit()}onLastItemStateChange(t){t.visible!==!1&&(this.loading||this.chats.length<this._rowsToLoadCount||this.loadData.emit(this._rowsToLoadCount))}onKeydown(t){return document.activeElement===this.chatListContainerRef.nativeElement?this._containerFocusedHandler(t):this._itemsFocusedHandler(t)}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(ve)))(o||ve)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ve,selectors:[["crt-chat-list"]],viewQuery:function(n,o){if(n&1&&(e.\u0275\u0275viewQuery(Gt,7),e.\u0275\u0275viewQuery(Xt,5,e.ElementRef)),n&2){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.chatListContainerRef=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.chatItemElements=i)}},hostVars:2,hostBindings:function(n,o){n&2&&e.\u0275\u0275classProp("combined-mode",o.addCombinedModeClass)},inputs:{chats:"chats",selectedChatId:"selectedChatId",isCombinedMode:"isCombinedMode"},outputs:{chatClicked:"chatClicked",createChatClicked:"createChatClicked",loadData:"loadData"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:2,consts:[["chatListContainer",""],["blankslate",""],["lastRow",""],["chatItemRef",""],["tabindex","0",1,"chat-list-container",3,"keydown"],[4,"ngIf","ngIfElse"],["tabindex","-1",3,"chat","isCombinedMode","isSelected","chatClicked",4,"ngFor","ngForOf"],["tabindex","-1",3,"chatClicked","chat","isCombinedMode","isSelected"],["appearance","line","count","4",3,"styles"],["tabindex","-1",1,"observe-last-row"],["crtObserveElementInViewport","",3,"crtObserveElementInViewportStateChange"],[1,"no-data-container"],[1,"no-data-content"],[3,"config"],["labelTextAlign","center",1,"no-data-label",3,"caption"],["size","large","icon","edit-button-icon","iconPosition","left-icon",1,"create-chat-button",3,"clicked","title"]],template:function(n,o){if(n&1){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4,0),e.\u0275\u0275listener("keydown",function(u){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(o.onKeydown(u))}),e.\u0275\u0275template(2,qt,5,3,"ng-container",5)(3,en,9,10,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(n&2){const i=e.\u0275\u0275reference(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.loading||o.chats&&o.chats.length>0)("ngIfElse",i)}},dependencies:[l.NgForOf,l.NgIf,ie.B,y.V,Me.w,Ge.W,Kt.w,N,Q.TranslatePipe],styles:[".chat-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;height:100%;margin:2px 2px 0 0;width:100%;max-width:794px;overflow-y:auto}.chat-list-container[_ngcontent-%COMP%]   #chat-list-no-data-animation[_ngcontent-%COMP%]{cursor:pointer}.chat-list-container[_ngcontent-%COMP%]   .no-data-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.chat-list-container[_ngcontent-%COMP%]   .no-data-container[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:absolute;flex-direction:column;top:50%;left:50%;transform:translate(-50%,-50%)}.chat-list-container[_ngcontent-%COMP%]   .no-data-container[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   .create-chat-button[_ngcontent-%COMP%]{margin-top:16px}[_nghost-%COMP%]:not(.combined-mode){width:100%;margin-right:0}.combined-mode[_nghost-%COMP%]{width:354px;margin-right:16px}.combined-mode[_nghost-%COMP%]   .chat-list-container[_ngcontent-%COMP%]{min-width:354px!important}.observe-last-row[_ngcontent-%COMP%]{height:1px;position:sticky;left:0;right:0}.observe-last-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:1px}"]})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array)],k.prototype,"chats",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",String)],k.prototype,"selectedChatId",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],k.prototype,"isCombinedMode",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],k.prototype,"chatClicked",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],k.prototype,"createChatClicked",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],k.prototype,"loadData",void 0),k=(0,s.__decorate)([(0,_.v)({type:"crt.ChatList",contentSlots:["chats"],reuseStrategy:f.B.Reuse})],k);var W=a(73308),J=a(41287),Z=a(844);let Se=class extends J.l{handle(t){var n=this;return(0,W.A)(function*(){yield n.next?.handle(t)})()}};Se=(0,s.__decorate)([(0,Z.l)({type:"crt.MessageEditorSendHandler",requestType:"crt.MessageEditorSendRequest"})],Se);var tn=a(86464),nn=a(8017),on=a(48534);let pe=class extends J.l{constructor(t){super(),this._sanitizeHtmlPipe=t.get(nn.b),this._copilotToEditorCommunicationService=t.get(on.i)}handle(t){var n=this;return(0,W.A)(function*(){const o=n._sanitizeHtmlPipe.transform(t.message.text,{mode:"textOnly",dataType:tn.r.MAXSIZE_TEXT});n._copilotToEditorCommunicationService.notify({editorAction:t.action,selection:o}),yield n.next?.handle(t)})()}};pe=(0,s.__decorate)([(0,Z.l)({type:"crt.ChatMessageActionHandler",requestType:"crt.ChatMessageActionRequest"}),(0,s.__metadata)("design:paramtypes",[e.Injector])],pe);var Oe=a(6530),Y=a(22701);class sn{static get(t){switch(t){case v.Go.Image:return Y.X.Image;case v.Go.File:return Y.X.File;case v.Go.System:return Y.X.System;case v.Go.Text:default:return Y.X.Text}}}var an=a(56704),rn=a(84323),cn=a(23092),te;(function(r){r.Replace="replace",r.Append="append"})(te||(te={}));let me=class extends J.l{constructor(t,n,o){super(),this._userInfo=t,this._omniChatService=n,this._translateService=o}_getUserLocalDate(t){return(0,rn.v8)(t,this._userInfo.timeZoneOffsetHours),t}_getConvertedMessages(t){return t.map(n=>({attachments:n.attachments,macrosTemplate:n.macrosTemplate,id:n.id,author:n.author,date:this._getUserLocalDate(n.time),direction:n.direction,isBotMessage:n.isBotMessage,text:n.text,type:sn.get(n.type)}))}_getChatMessages(t){var n=this;return(0,W.A)(function*(){return n._getConvertedMessages(yield(0,C.lastValueFrom)(n._omniChatService.getConversation(t)))})()}_addChatStartedMessage(t){const n=t.find(i=>i.type!==Y.X.System),o={id:(0,Oe.qv)(),type:Y.X.System,date:n.date,macrosTemplate:{template:this._translateService.instant("ChatMessage.System.ChatStartedMessage"),tokens:[{key:"chatStartedAt",type:"datetime",value:n.date.toString()},{key:"chatStartedBy",type:"lookup",value:{entitySchemaName:"Contact",primaryColumnValue:n.author.id,caption:n.author.name}},{key:"icon",type:"icon",value:"flag-icon"}]}};return t.unshift(o),o.id}_addDateChangedDividers(t,n){if(t.length===0)return;const o=JSON.stringify({type:Y.X.System,date:null,macrosTemplate:{template:"{dateHeader}",tokens:[{key:"icon",type:"icon",value:"date-time"}]}});let i=this._getDatePart(t[t.length-1].date);for(let c=t.length-1;c>=0;c--)if((c===0||this._getDatePart(t[c].date)!==i)&&t[c].id!==n){const u=JSON.parse(o);u.date=new Date(i),u.macrosTemplate.tokens.push({key:"dateHeader",type:"date",value:i}),t.splice(c===0?0:c+1,0,u),i=this._getDatePart(t[c].date)}}_getDatePart(t){return t.toISOString().split("T")[0]}handle(t){var n=this;return(0,W.A)(function*(){yield n.next?.handle(t);const o=t.$context;if(!o[`${t.chatMessagesAttributeName}`])return;const i=t.chatId,c=t.loadMode;let u,O,P,D;switch(c){case te.Append:P=yield o[`${t.previousChatIdAttributeName}`],u=yield n._getChatMessages(P),D=n._addChatStartedMessage(u),n._addDateChangedDividers(u,D),O=yield o[`${t.chatMessagesAttributeName}`],o.ConversationEvent=[{name:B.R}],o[`${t.chatMessagesAttributeName}`]=u.concat(O),P=yield(0,C.lastValueFrom)(n._omniChatService.getPreviousChatId(P)),o[`${t.previousChatIdAttributeName}`]=P===Oe.To?null:P;return;case te.Replace:default:u=yield n._getChatMessages(i),o.ChatId=i,o.ConversationEvent=[{name:B.R}],D=n._addChatStartedMessage(u),n._addDateChangedDividers(u,D),o[`${t.chatMessagesAttributeName}`]=u,t.previousChatIdAttributeName&&(P=yield(0,C.lastValueFrom)(n._omniChatService.getPreviousChatId(i)),o[`${t.previousChatIdAttributeName}`]=P===Oe.To?null:P);return}})()}};me=(0,s.__decorate)([(0,Z.l)({type:"crt.LoadConversationHandler",requestType:"crt.LoadConversationRequest"}),(0,s.__metadata)("design:paramtypes",[cn.oq,an.I,Q.TranslateService])],me);var Je=a(13555);let he=class extends J.l{constructor(t){super(),this._chatDraftService=t.get(Je.X)}handle(t){var n=this;return(0,W.A)(function*(){yield n.next?.handle(t),t.$context[t.attributesMapping.chatInput]=t.newValue,n._chatDraftService.setDraft(yield t.$context[t.attributesMapping.chatId],t.newValue)})()}};he=(0,s.__decorate)([(0,Z.l)({type:"crt.MessageEditorInputChangeHandler",requestType:"crt.MessageEditorInputChangeRequest"}),(0,s.__metadata)("design:paramtypes",[e.Injector])],he);var Ze=a(18357),Te=a(13161);let ue=class extends J.l{constructor(t){super(),this._profileService=t.get(Ze.c)}handle(t){var n=this;return(0,W.A)(function*(){return yield n.next?.handle(t),(0,C.lastValueFrom)(n._profileService.getProfile(Te.j).pipe((0,C.share)()))})()}};ue=(0,s.__decorate)([(0,Z.l)({type:"crt.LoadChatProfileHandler",requestType:"crt.LoadChatProfileRequest"}),(0,s.__metadata)("design:paramtypes",[e.Injector])],ue);let ge=class extends J.l{constructor(t){super(),this._profileService=t.get(Ze.c)}handle(t){var n=this;return(0,W.A)(function*(){const{$context:o}=t,i={lastChatId:yield o.CurrentCopilotSessionId,isCombinedMode:yield o.IsCombinedMode,isChatsListVisible:yield o.ChatsListVisible,combinedModeEnabled:yield o.CombinedModeEnabled};yield(0,C.lastValueFrom)(n._profileService.saveProfile(Te.j,i).pipe((0,C.share)())),yield n.next?.handle(t)})()}};ge=(0,s.__decorate)([(0,Z.l)({type:"crt.SaveChatProfileHandler",requestType:"crt.SaveChatProfileRequest"}),(0,s.__metadata)("design:paramtypes",[e.Injector])],ge);var Ye=a(37206),ln=a(41833),dn=a(99543);class qe{static{this._selectorCounter=0}static getProvider(){return{provide:ln.s,useFactory:(t,n)=>{for(const o of t){let{selector:i}=(0,e.reflectComponentType)(o.componentType);i=i+this._selectorCounter++,n.defineComponent(i,o.componentType),T.L.register(o.messageType,i)}},deps:[dn.U,re.SH]}}}var pn=a(11475),we=a(24091),Ae=a(31149),De=a(57274),Re=a(72195),mn=a(59962),hn=a(26852),un=a(26594),gn=a(86323),_n=a(4583),Cn=a(89285),et=a(82805),fn=a(56005);class vn{constructor(t={},n={}){this.attributes=t,this._injectionContextValue="not set",this._crtControls=new Map,this.formApiModel=new be.FormGroup({}),this._destroy$=new C.Subject,this.events$=new C.Subject,this.dataSchemas={},this._businessRulesActivated$=new C.BehaviorSubject(!1);for(const o of Object.keys(t)){Object.defineProperty(this,o,{get:()=>Promise.resolve(this.attributes[o]),set:c=>this.attributes[o]=c,configurable:!0});const i=et.C.create({name:o,value:this.attributes[o],propertiesConfig:[],featureValues:{}});this._crtControls.set(o,i)}this.Resources={Strings:{}},Object.assign(this,n)}get PrimaryModelMode(){return Cn.b.Create}get IsChanged(){return Promise.resolve(!1)}get HasUnsavedData(){return Promise.resolve(!1)}get[fn.w](){return{}}isValid(){return Promise.resolve(!0)}deactivateBusinessRules(){}activateBusinessRules(){return(0,C.of)()}validate(){return Promise.resolve({})}init(t){return(0,C.of)()}setValue(t,n){return(0,C.of)()}set(t,n,o){return(0,C.of)()}setSorting(){return(0,C.of)(null)}create(t,n){return(0,C.of)(null)}executeRequest(t){return Promise.resolve()}loadLookupList(t,n,o){return null}load(...t){return(0,C.of)()}copy(t,n,o){return(0,C.of)()}loadDefaultValues(){return(0,C.of)()}save(t,n,o){return(0,C.of)()}delete(t,n,o){return(0,C.of)()}getAttributeControl(t){const n=this.attributes[t];return new be.FormControl(n)}getBoundDataSourceName(t){return""}getBoundDataSource(t){}getBoundDataSchema(t){}getViewModelAttributePath(t,n){return""}getViewModelAttributePaths(t,n){return null}destroy(){return this._destroy$.next(),this._destroy$.complete(),(0,C.of)(void 0)}getBoundDataSchemaByAttributePath(t){}getBoundDataSchemaAttributeByAttributePath(t){return null}getBoundDataSourceNameByAttributePath(t){return""}getPrimaryModelName(){return Promise.resolve("")}getPrimaryDataSchema(){return Promise.resolve(null)}getAttributeNameByViewItemName(t){return""}getControl(t){return this._crtControls.has(t)?this._crtControls.get(t):et.C.create({name:t,value:null,propertiesConfig:[],featureValues:{}})}getAttributePropertyValue(...t){let n,o;if(t.length===2)n=t[0],o=t[1];else if(t.length===1){const c=t[0].split(":");n=c[0],o=c[1]}else throw new Error("ArgumentException");return this.getControl(n)?.getPropertyValue(o)}setAttributePropertyValue(...t){let n,o,i;if(t.length===3)n=t[0],o=t[1],i=t[2];else if(t.length===2){const u=t[0].split(":");n=u[0],o=u[1],i=t[1]}else throw new Error("ArgumentException");const c=this.getControl(n);c&&c.setPropertyValue(o,i)}resetAttributePropertyValue(...t){let n,o;if(t.length===1)[n,o]=t[0].split(":");else if(t.length===2)n=t[0],o=t[1];else throw new Error("ArgumentException");this.getControl(n).getPropertyByName(o)?.resetValue()}getInvariabilityPropertyName(t){return null}setModelValues(t,n){return null}getIsDirty(t){return this.getControl(t).isDirty}getModelByName(t){return null}getModelMode(t){return null}getPrimaryModelMode(){return null}_getModelModeChanges(t){return null}_getPrimaryModelModeChanges(){return null}_hotSwap(t){return(0,C.of)(void 0)}get _injectionContext(){return this._injectionContextValue==="not set"?{id:"id",inject:()=>null,addLazyModule:()=>null,connectHostLazyModules:()=>{},getLazyModules:()=>[],destroy:()=>{}}:this._injectionContextValue}set _injectionContext(t){this._injectionContextValue=t}markModelFor(t,n){return null}markPrimaryModelFor(t){return null}_onAsyncTaskStarted(t){}_onAsyncTaskFinished(t){}_getIsAffectedByBusinessRules(t){return Promise.resolve(!1)}_getDependOnModelsNames(t){return[]}}var yn=a(55642),tt=a(18351),nt=a(47951),ot=a(5476),st=a(56484),it=a(1891),at=a(50663),rt=a(43691),Mn=a(12841),ct=a(51521),En=a(20555);const xn=["*"];let F=class Qe extends m.Mm{constructor(t){super(t),this._modeWidthLimit=794,this._subscriptions=new C.Subscription,this.combinedModeEnabledChange=new e.EventEmitter,this.combinedModeButtonVisibleChange=new e.EventEmitter,this.changeCombinedMode=new e.EventEmitter,this.openChatSession=new e.EventEmitter,this._customEventService=t.get(re.Dj)}_toggleCombinedModeButtonVisibility(t){this.combinedModeButtonVisible!==t&&(this.combinedModeButtonVisible=t,this.combinedModeButtonVisibleChange.emit(t))}_resetCombinedModeButtonEnabled(t){t||(this.combinedModeEnabled=!0,this.combinedModeEnabledChange.emit(!0))}updateResponsiveStyles(){const o=this.elementRef.nativeElement?.parentElement?.getBoundingClientRect().width>this._modeWidthLimit;this._toggleCombinedModeButtonVisibility(o),this._resetCombinedModeButtonEnabled(o),!(o===this.isCombinedMode||!this.combinedModeEnabled)&&this.changeCombinedMode.emit(o)}ngOnInit(){this._subscriptions.add(this._customEventService.subscribe(En.k).subscribe(t=>this.openChatSession.emit(t)))}ngOnDestroy(){this._subscriptions.unsubscribe()}static{this.\u0275fac=function(n){return new(n||Qe)(e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Qe,selectors:[["crt-chat"]],inputs:{combinedModeEnabled:"combinedModeEnabled",isCombinedMode:"isCombinedMode",combinedModeButtonVisible:"combinedModeButtonVisible"},outputs:{combinedModeEnabledChange:"combinedModeEnabledChange",combinedModeButtonVisibleChange:"combinedModeButtonVisibleChange",changeCombinedMode:"changeCombinedMode",openChatSession:"openChatSession"},features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:xn,decls:2,vars:0,consts:[[1,"items"]],template:function(n,o){n&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{display:block;height:100%}.items[_ngcontent-%COMP%]{height:100%}"]})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],F.prototype,"combinedModeEnabled",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],F.prototype,"combinedModeEnabledChange",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],F.prototype,"isCombinedMode",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],F.prototype,"combinedModeButtonVisible",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],F.prototype,"combinedModeButtonVisibleChange",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",e.EventEmitter)],F.prototype,"changeCombinedMode",void 0),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",e.EventEmitter)],F.prototype,"openChatSession",void 0),F=(0,s.__decorate)([(0,_.v)({type:"crt.Chat",contentSlots:["items"]}),(0,V.f)({toolbarConfig:{requiredFeatures:{ShowDesignerDemoItems:!0},position:261,groupType:ze.h.Components,icon:a(15208),hint:"Components.Chat.Hint",defaultPropertyValues:{masterSchemaId:"$Id",items:[]},defaultLocalizableStrings:{caption:"Components.Chat.Caption",label:"Components.Chat.Caption"}},propertiesPanelComponentTypeName:"crt.ChatPropertiesPanel",viewElementGroupType:p.J.Components,typeCaption:"Components.Chat.Caption",designControlConfig:{allowDesignContent:!0},designViewItemCommands:{create:"crt.CreateChatCommand"}}),(0,s.__metadata)("design:paramtypes",[e.Injector])],F);var bn=a(65001),In=a(95211);const Pn=["toolbarItems"],Sn=["inputs"],On=r=>({"message-editor-body-button-focussed":r});function Tn(r,t){r&1&&e.\u0275\u0275elementContainer(0)}function wn(r,t){if(r&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Tn,1,0,"ng-container",8),e.\u0275\u0275elementEnd()),r&2){const n=t.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",n)}}function An(r,t){if(r&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",6),e.\u0275\u0275template(2,wn,2,1,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.inputsTemplates)}}function Dn(r,t){r&1&&e.\u0275\u0275elementContainer(0)}function Rn(r,t){if(r&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Dn,1,0,"ng-container",8),e.\u0275\u0275elementEnd()),r&2){const n=t.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",n)}}function Ln(r,t){if(r&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275template(2,Rn,2,1,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),r&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.toolbarItemsTemplates)}}let U=class ye extends ae.K{constructor(){super(...arguments),this.sizeEnum=bn.Z,this.iconPositionEnum=In.q,this.sendMessage=new e.EventEmitter}set toolbarItems(t){this._toolbarItems=t}set inputs(t){this._inputs=t}onSendClicked(){this.isInputContentEmpty()||this.sendMessage.emit(this.chatInput)}isInputContentEmpty(){return(0,le.isEmpty)(this.chatInput)}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(ye)))(o||ye)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ye,selectors:[["crt-message-editor-body"]],contentQueries:function(n,o,i){if(n&1&&(e.\u0275\u0275contentQuery(i,Pn,4,e.TemplateRef),e.\u0275\u0275contentQuery(i,Sn,4,e.TemplateRef)),n&2){let c;e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(o.toolbarItemsTemplates=c),e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(o.inputsTemplates=c)}},inputs:{toolbarItems:"toolbarItems",inputs:"inputs",isFocused:"isFocused",chatInput:"chatInput"},outputs:{sendMessage:"sendMessage"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:12,consts:[[1,"message-editor-body"],[4,"ngIf"],[1,"message-editor-body-toolbar"],[1,"message-editor-body-toolbar-dropzone"],[1,"message-editor-body-toolbar-send"],[3,"clicked","ngClass","iconPosition","size","icon","disabled","title"],[1,"message-editor-input-container"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],[1,"message-editor-toolbar-container"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,An,3,1,"ng-container",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3),e.\u0275\u0275template(4,Ln,3,1,"ng-container",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4)(6,"crt-button",5),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275listener("clicked",function(){return o.onSendClicked()}),e.\u0275\u0275elementEnd()()()()),n&2&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.inputsTemplates==null?null:o.inputsTemplates.length),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.toolbarItemsTemplates==null?null:o.toolbarItemsTemplates.length),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(7,8,"MessageEditor.SendButtonHint")),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,On,o.isFocused===!0))("iconPosition",o.iconPositionEnum.OnlyIcon)("size",o.sizeEnum.Small)("icon","send-icon")("disabled",o.isInputContentEmpty()))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,ie.B,Q.TranslatePipe],styles:["[_nghost-%COMP%]{position:relative;width:100%}[_nghost-%COMP%]   .message-editor-body[_ngcontent-%COMP%]   .message-editor-body-toolbar[_ngcontent-%COMP%]{display:flex;margin-top:-32px;padding:7px 8px 3px 5px}[_nghost-%COMP%]   .message-editor-body[_ngcontent-%COMP%]   .message-editor-body-toolbar[_ngcontent-%COMP%]   .message-editor-body-toolbar-dropzone[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .message-editor-body[_ngcontent-%COMP%]   .message-editor-body-toolbar[_ngcontent-%COMP%]   .message-editor-body-toolbar-dropzone[_ngcontent-%COMP%]   .message-editor-toolbar-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .message-editor-body[_ngcontent-%COMP%]   .message-editor-body-toolbar[_ngcontent-%COMP%]   .message-editor-body-toolbar-send[_ngcontent-%COMP%]{text-align:right}"]})}};(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array),(0,s.__metadata)("design:paramtypes",[Array])],U.prototype,"toolbarItems",null),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Array),(0,s.__metadata)("design:paramtypes",[Array])],U.prototype,"inputs",null),(0,s.__decorate)([(0,S.j)(),(0,s.__metadata)("design:type",Object)],U.prototype,"sendMessage",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",Boolean)],U.prototype,"isFocused",void 0),(0,s.__decorate)([(0,d.k)(),(0,s.__metadata)("design:type",String)],U.prototype,"chatInput",void 0),U=(0,s.__decorate)([(0,_.v)({type:"crt.MessageEditorBody",contentSlots:[{name:"inputs",lazy:!0,input:!0},{name:"toolbarItems",lazy:!0,input:!0}]})],U);let Le=class extends J.l{constructor(){super(...arguments),this._actionCode=de.g.TriggerMention}handle(t){var n=this;return(0,W.A)(function*(){yield n.next?.handle(t),t.$context[t.actionTarget]=n._actionCode,setTimeout(()=>t.$context[t.actionTarget]="",0)})()}};Le=(0,s.__decorate)([(0,Z.l)({type:"crt.TriggerMentionRequestHandler",requestType:"crt.TriggerMentionRequest"})],Le);var Bn=a(74368);class ne{_getViewConfigs(t,n){return Bn.u.getViewConfigInfoByProperty("type",n,t).map(o=>o?.viewConfig).filter(Boolean)}_updateBindings(t,n){this._setChatInputAttribute(t,n),this._setSendMessageRequest(t),this._setBindingsMappingAttribure(t,n)}_setChatInputAttribute(t,n){if(!(0,le.isEmpty)(t.chatInput))return;const o=`ChatInput_${t.name}`;n[o]={value:null},t.chatInput=`$${o}`}_setSendMessageRequest(t){if(!(0,le.isEmpty)(t.sendMessage))return;const n=this._getBindingsMappingAttribureName(t);t.sendMessage={request:"crt.MessageEditorSendRequest",params:{attributesMapping:`$${n}`}}}_setBindingsMappingAttribure(t,n){const o=this._getBindingsMappingAttribureName(t),i=n[o]?.value||{};i.ChatInput=t.chatInput.split("$").pop(),n[o]={value:i},t.bindingsMappingAttribure=o}_getBindingsMappingAttribureName(t){return t.bindingsMappingAttribure||`BindingsMapping_${t.name}`}crtOnMetaDataInit(t){var n=this;return(0,W.A)(function*(){const o=t,i=n._getViewConfigs(o.viewConfig,"crt.MessageEditor"),c=o.viewModelConfig.attributes;for(const u of i)n._updateBindings(u,c);return Promise.resolve(t)})()}static{this.\u0275fac=function(n){return new(n||ne)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:ne,factory:ne.\u0275fac})}}let se=class $e{constructor(t){this._materialIconsRegistrator=t,this._materialIconsRegistrator.addIcons([{name:"message-editor-send-icon",icon:a(21888)},{name:"arrow-down-heavy",icon:a(73869)},{name:"empty-chat-contact-designer-skeleton-icon",icon:a(78517)}])}static{this.\u0275fac=function(n){return new(n||$e)(e.\u0275\u0275inject(at.K))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:$e})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:Mn.m,useClass:ne,multi:!0}],imports:[$.MatIconModule,l.CommonModule,De.u,tt.C,Ae.q,we.S,Q.TranslateModule,rt.X,Ie.J,ct.MarkdownModule.forRoot(),nt.x,Re.A,ot.q,st.S,it.H]})}};se=(0,s.__decorate)([(0,yn.g)({viewElements:[I,j,z,U,A,K,F,k,N],requestHandlers:[pe,me,he,Le,ue,ge]}),(0,s.__metadata)("design:paramtypes",[at.K])],se),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(se,{declarations:[g,I,j,z,U,A,q,K,F,oe,k,N],imports:[$.MatIconModule,l.CommonModule,De.u,tt.C,Ae.q,we.S,Q.TranslateModule,rt.X,Ie.J,ct.MarkdownModule,nt.x,Re.A,ot.q,ee,st.S,it.H],exports:[g,I,j,z,U,A,q,K,F,k,N]})}();const kn=[{provide:mn.e,useValue:[se,we.S,Ae.q,pn.V,De.u]},{provide:un.G,useValue:{}},{provide:hn.I,useValue:{viewModel$:(0,C.of)(new vn)}},{provide:gn.V,useValue:_n.V.instance},{provide:re.ZP,useFactory:()=>globalThis},qe.getProvider(),(0,e.importProvidersFrom)(Re.A)];let Be=class extends G.S{};Be=(0,s.__decorate)([(0,X.$)({type:"crt.MessageEditorSendRequest"})],Be);let ke=class extends G.S{};ke=(0,s.__decorate)([(0,X.$)({type:"crt.ChatMessageActionRequest"})],ke);let Fe=class extends G.S{constructor(){super(...arguments),this.loadMode=te.Replace}};Fe=(0,s.__decorate)([(0,X.$)({type:"crt.LoadConversationRequest"})],Fe);let je=class extends G.S{};je=(0,s.__decorate)([(0,X.$)({type:"crt.MessageEditorInputChangeRequest"})],je);let Ve=class extends G.S{};Ve=(0,s.__decorate)([(0,X.$)({type:"crt.LoadChatProfileRequest"})],Ve);let He=class extends G.S{};He=(0,s.__decorate)([(0,X.$)({type:"crt.SaveChatProfileRequest"})],He)},13161:(b,x,a)=>{a.d(x,{j:()=>s});const s="ChatPanel"},43778:(b,x,a)=>{a.d(x,{R:()=>e,u:()=>s});class s{}const e="reset"},13555:(b,x,a)=>{a.d(x,{X:()=>R});var s=a(62278),e=a.n(s),T=a(36486),d=a.n(T),H=a(59131),w=a.n(H);class R{constructor(){this._saveMessageDebounceTimeout=500,this._storageKeyPrefix="chat-draft",this._draftUpdatesMap=new Map}_getOrCreateSubject(g){if(!this._draftUpdatesMap.has(g)){const _=new s.Subject;_.pipe((0,T.debounceTime)(this._saveMessageDebounceTimeout)).subscribe(f=>{const h=this._getStorageKey(g);f===null?sessionStorage.removeItem(h):sessionStorage.setItem(h,f)}),this._draftUpdatesMap.set(g,_)}return this._draftUpdatesMap.get(g)}_getStorageKey(g){return`${this._storageKeyPrefix}-${g||"new"}`}setDraft(g,_){this._getOrCreateSubject(g).next(_)}getDraft(g){const _=this._getStorageKey(g);return sessionStorage.getItem(_)||""}clearDraft(g){this._getOrCreateSubject(g).next(null)}ngOnDestroy(){this._draftUpdatesMap.forEach(g=>{g.complete()}),this._draftUpdatesMap.clear()}static{this.\u0275fac=function(_){return new(_||R)}}static{this.\u0275prov=H.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}},56704:(b,x,a)=>{a.d(x,{I:()=>V});var s=a(63721),e=a.n(s),T=a(49973),d=a(58504),H=a(41108),w=a(56267),R=a(79772),E=a.n(R),g=a(43272),_=a(23872),f=a(62278),h=a.n(f),l=a(36486),y=a.n(l),M=a(59131),Me=a.n(M),Ee=a(50485),xe=a(65751),j=a(14876),S=a(23092);class V extends g.A{static get rowsCount(){return 30}constructor(p,m,v,L,B,$){super(m,v,L),this.rightsService=p,this.httpClient=B,this.userInfo=$,this._serviceUrl="/rest/OmnichannelChatService/",this._canManageChatsOperationCode="CanManageChats",this._cacheChatActions={},this.entitySchemaName="OmniChat"}_postWithChatId(p,m){const v=this._serviceUrl+m;return this.httpClient.post(v,{chatId:p})}_getMessages(p,m){const v=this._serviceUrl+m;return this.httpClient.post(v,{chatId:p}).pipe((0,l.map)(this._mapChatMessage()))}_getAllConversationMessages(p,m,v){const L=new s.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),B=this._serviceUrl+"GetAllConversation";return this.httpClient.post(B,{contactId:p,channelId:m,rowCount:V.rowsCount,rowOffset:v},{headers:L}).pipe((0,l.map)(this._mapChatMessage()))}_mapChatMessage(){return p=>(p.forEach(m=>{m.time=new Date(m.time),m.author=new _.B(m.author.id,m.author.name,m.author.photoId),m.macrosTemplate&&this._handleMessageMacros(m)}),p)}_handleMessageMacros(p){let m;try{m=JSON.parse(p.macrosTemplate.tokens)}catch(v){console.error("Failed to parse tokens:",v)}p.macrosTemplate.tokens=m}acceptChat(p){return this._postWithChatId(p,"AcceptChat")}getAllConversationByChat(p,m=0){const v=new s.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),L=this._serviceUrl+"GetAllConversationByChat";return this.httpClient.post(L,{chatId:p,rowCount:V.rowsCount,rowOffset:m},{headers:v}).pipe((0,l.map)(this._mapChatMessage()))}getAllConversation(p,m,v=0){return this._getAllConversationMessages(p,m,v)}getConversation(p){const m=new s.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),v=this._serviceUrl+"GetConversation";return this.httpClient.post(v,{chatId:p},{headers:m}).pipe((0,l.map)(this._mapChatMessage()))}markAsRead(p){const m=this._serviceUrl+"MarkChatAsRead";this.httpClient.post(m,{chatId:p}).subscribe()}getMessageTemplate(p){const m=this._serviceUrl+"GetUnifiedMessageTemplate";return this.httpClient.post(m,{chatId:p})}getPreviousChatId(p){const m=this._serviceUrl+"GetPreviousChatId";return this.httpClient.post(m,{chatId:p})}sendMessage(p){const m="/rest/OmnichannelOutcomeMessagingService/SendMessage",v={message:p};return this.httpClient.post(m,v)}sendMessageWithAttachments(p,m){const v="/rest/OmnichannelOutcomeMessagingService/SendMessageWithAttachments",L=new FormData;return L.append("message",JSON.stringify(p)),Array.from(m).forEach((B,$)=>{L.append("file"+$,B,B.name)}),this.httpClient.post(v,L)}completeChat(p){return this._postWithChatId(p,"CloseActiveChat")}getOperatorChats(){const p=this._serviceUrl+"GetChats";return this.httpClient.post(p,{operatorId:this.userInfo.id}).pipe((0,l.map)(m=>({success:!0,errorInfo:null,result:m.Chats.map(v=>this.entityConverter.getEntity(v))})),(0,l.catchError)(m=>this.getBaseErrorResponse(m)))}getChatHistory(p){return this._getMessages(p,"GetHistory")}getChatActions(p){if(this._cacheChatActions[p])return(0,f.of)(this._cacheChatActions[p]);const m=this._serviceUrl+"GetChatActions";return this.httpClient.post(m,{chatId:p}).pipe((0,l.tap)(v=>this._cacheChatActions[p]=v))}isOperatorCanManageChats(){return this.rightsService.getCanExecuteOperation(this._canManageChatsOperationCode).pipe((0,l.map)(p=>p))}isOperatorActive(){const p=new T.s("OperatorSession");return p.rowCount=1,p.addSchemaColumn("OperatorState.OperatorAvailable","IsActive"),p.filters.addSchemaColumnFilterWithParameter(d.H.Is_null,"SessionEndDate",null),p.filters.addSchemaColumnFilterWithParameter(d.H.Equal,"SysUser",this.userInfo.id),this.queryExecutor.executeSelectQuery(p).pipe((0,l.map)(m=>m&&m[0].IsActive||!1),(0,l.catchError)(()=>(0,f.of)(!1)))}isOperatorHasActiveChannel(){const p=new T.s("Channel");p.rowCount=1;const m=new H.X;return m.logicalOperation=w.H.Or,m.addSchemaColumnFilterWithParameter(d.H.Equal,"ChatQueue.[ChatQueueOperator:ChatQueue:Id].[SysAdminUnitInRole:SysAdminUnit:Operator].SysAdminUnit",this.userInfo.id),m.addSchemaColumnFilterWithParameter(d.H.Equal,"ChatQueue.[ChatQueueOperator:ChatQueue:Id].[SysAdminUnitInRole:SysAdminUnitRoleId:Operator].SysAdminUnit",this.userInfo.id),p.filters.add(m),p.filters.addSchemaColumnFilterWithParameter(d.H.Equal,"IsActive",!0),this.queryExecutor.executeSelectQuery(p).pipe((0,l.map)(v=>v&&v.length>0||!1),(0,l.catchError)(()=>(0,f.of)(!1)))}hasUncompletedChats(p){const m=this._serviceUrl+"GetHasUncompletedChats";return this.httpClient.post(m,{channelId:p})}static{this.\u0275fac=function(m){return new(m||V)(M.\u0275\u0275inject(Ee.f),M.\u0275\u0275inject(xe.w),M.\u0275\u0275inject(R.TranslateService),M.\u0275\u0275inject(j.K),M.\u0275\u0275inject(s.HttpClient),M.\u0275\u0275inject(S.oq))}}static{this.\u0275prov=M.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"})}}},20555:(b,x,a)=>{a.d(x,{b:()=>e,k:()=>s});const s="OpenChatSessionEvent",e="Copilot"},85040:(b,x,a)=>{a.d(x,{u:()=>s});var s;(function(e){e.SetHighlighting="setHighlighting",e.RemoveHighlighting="removeHighlighting"})(s||(s={}))},48534:(b,x,a)=>{a.d(x,{i:()=>w});var s=a(62278),e=a.n(s),T=a(85040),d=a(59131),H=a.n(d);class w{constructor(){this._currentSubscriptionIdentifier=null,this._currentSubscription=null,this._replaceSelectionSubject=new s.Subject}_unsubscribeLastEditor(){if(this._currentSubscription){const E={editorAction:T.u.RemoveHighlighting};this._replaceSelectionSubject?.next(E),this._currentSubscriptionIdentifier=null,this._currentSubscription.unsubscribe()}}subscribeToNotifications(E,g){this._currentSubscriptionIdentifier!==E&&(this._unsubscribeLastEditor(),this._currentSubscriptionIdentifier=E,this._currentSubscription=this._replaceSelectionSubject.subscribe(g))}notify(E){this._replaceSelectionSubject?.next(E)}static{this.\u0275fac=function(g){return new(g||w)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:w,factory:w.\u0275fac,providedIn:"root"})}}},15208:b=>{b.exports=`<svg width="72" height="64" viewBox="0 0 72 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Components | Chat - 72x64 | bright">
<g id="Icon">
<rect x="16.5" y="7.5" width="39" height="49" rx="2.5" stroke="#70ACEE"/>
<g id="Frame 19809">
<rect id="Rectangle 45209" x="21" y="11" width="16" height="2" rx="1" fill="#7FC7F4"/>
<g id="Frame 19808">
<g id="Frame 19814">
<circle id="Ellipse 3260" cx="23" cy="17" r="2" fill="#D1D1D1"/>
<g id="Frame 17499">
<rect x="21" y="20" width="24" height="9" rx="2" fill="#D1D1D1"/>
<g id="Frame 19807">
<line id="Line 2314" x1="24" y1="23.5" x2="30" y2="23.5" stroke="white"/>
<line id="Line 2315" x1="24" y1="25.5" x2="42" y2="25.5" stroke="white"/>
</g>
</g>
</g>
<g id="Frame 19815">
<circle id="Ellipse 3260_2" cx="49" cy="30" r="2" fill="#80C8F5"/>
<g id="Frame 17500">
<rect x="27" y="33" width="24" height="9" rx="2" fill="#80C8F5"/>
<g id="Frame 19807_2">
<line id="Line 2314_2" x1="30" y1="36.5" x2="48" y2="36.5" stroke="white"/>
<line id="Line 2315_2" x1="44" y1="38.5" x2="48" y2="38.5" stroke="white"/>
</g>
</g>
</g>
<g id="Frame 19816">
<circle id="Ellipse 3260_3" cx="23" cy="43" r="2" fill="#D1D1D1"/>
<g id="Frame 17499_2">
<rect x="21" y="46" width="24" height="7" rx="2" fill="#D1D1D1"/>
<g id="Frame 19807_3">
<line id="Line 2314_3" x1="24" y1="49.5" x2="42" y2="49.5" stroke="white"/>
</g>
</g>
</g>
</g>
</g>
</g>
</g>
</svg>
`},70807:b=>{b.exports=`<svg width="72" height="64" viewBox="0 0 72 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M58 15H28C26.3431 15 25 16.3431 25 18C25 19.6569 26.3431 21 28 21H58C59.6569 21 61 19.6569 61 18C61 16.3431 59.6569 15 58 15Z" fill="#40ACF0"/>
<path d="M58 36H40C38.3431 36 37 37.3431 37 39C37 40.6569 38.3431 42 40 42H58C59.6569 42 61 40.6569 61 39C61 37.3431 59.6569 36 58 36Z" fill="#D1D1D1"/>
<path d="M58 26H40C38.3431 26 37 27.3431 37 29C37 30.6569 38.3431 32 40 32H58C59.6569 32 61 30.6569 61 29C61 27.3431 59.6569 26 58 26Z" fill="#D1D1D1"/>
<path d="M58 46H40C38.3431 46 37 47.3431 37 49C37 50.6569 38.3431 52 40 52H58C59.6569 52 61 50.6569 61 49C61 47.3431 59.6569 46 58 46Z" fill="#D1D1D1"/>
<circle cx="29" cy="39" r="4" fill="#004FD6"/>
<circle cx="29" cy="29" r="4" fill="#004FD6"/>
<circle cx="29" cy="49" r="4" fill="#004FD6"/>
<path d="M15 26C18.3137 26 21 23.3137 21 20C21 16.6863 18.3137 14 15 14C11.6863 14 9 16.6863 9 20C9 23.3137 11.6863 26 15 26Z" stroke="#FF4013" stroke-width="2" stroke-miterlimit="10"/>
<path d="M15 17.1152V20.3722L16.682 22.3302" stroke="#FF4013" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round"/>
</svg>
`},78517:b=>{b.exports='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path d="M42.2,39.7l-8.1-3.6-.5-1.6c-.2-.6-.4-1.1-.9-1.2a.68.68,0,0,1-.4-.6L32,29.5a.91.91,0,0,1,.3-.7,6.1,6.1,0,0,0,1.5-3.6c.1-.7.5-1.3.6-2l.7-3.8a.85.85,0,0,0-.5-1.1c-.2,0-.3-.3-.3-.7a44.6,44.6,0,0,0,.5-6.7c-.3-2.3-2.1-7-6.9-6.7C15.2.4,16.2,6.6,11.8,8.5a2.6,2.6,0,0,0,2.8.5c-.2.2-1.8.3-2.5,3.3a3.76,3.76,0,0,1,2-1.5c-1.5.8-.1,5.7-.1,6.2v.6a.78.78,0,0,1-.3.7c-.6.3-.6.6-.6,1.1l.7,3.8a7.62,7.62,0,0,1,.6,2,7.7,7.7,0,0,0,1.5,3.6.91.91,0,0,1,.3.7l-.3,3.2a.82.82,0,0,1-.4.6c-.5.1-.8.7-.9,1.2l-.5,1.6L5.9,39.7A24.11,24.11,0,0,0,24,47.9,23.83,23.83,0,0,0,42.2,39.7Z" fill="#cacaca"/><g opacity="0.05"><path d="M24,2A22,22,0,1,1,2,24,22,22,0,0,1,24,2m0-2A24,24,0,1,0,48,24,24,24,0,0,0,24,0Z" fill="#181818"/></g></svg>'},21888:b=>{b.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.5538 7.23804L4.32784 2.12044C4.17412 2.03159 3.99711 1.99031 3.81954 2.00192C3.64197 2.01352 3.47196 2.07747 3.33133 2.18556C3.18772 2.29787 3.08345 2.45217 3.03332 2.62654C2.98319 2.80092 2.98976 2.98652 3.05209 3.15698L4.59066 7.41713C4.60623 7.4596 4.63447 7.49638 4.67164 7.52255C4.70881 7.54873 4.75313 7.56306 4.79872 7.56365H8.75192C8.86558 7.56187 8.9757 7.60289 9.06004 7.67843C9.14438 7.75397 9.19668 7.85841 9.20637 7.97067C9.21011 8.02993 9.20155 8.08932 9.18122 8.14516C9.16089 8.20101 9.12922 8.25213 9.08817 8.29536C9.04712 8.3386 8.99755 8.37303 8.94254 8.39652C8.88753 8.42002 8.82824 8.43208 8.76834 8.43196H4.79872C4.75313 8.43256 4.70881 8.44689 4.67164 8.47307C4.63447 8.49924 4.60623 8.53601 4.59066 8.57849L3.05209 12.8386C3.00593 12.9699 2.99202 13.1101 3.01151 13.2478C3.03101 13.3854 3.08336 13.5165 3.16421 13.63C3.24505 13.7436 3.35206 13.8364 3.47636 13.9007C3.60065 13.9651 3.73864 13.9991 3.87887 14C4.02808 13.9993 4.17481 13.962 4.30594 13.8915L13.5538 8.75758C13.6893 8.68132 13.8019 8.57083 13.8803 8.43737C13.9587 8.30391 14 8.15224 14 7.99781C14 7.84338 13.9587 7.69171 13.8803 7.55825C13.8019 7.42479 13.6893 7.3143 13.5538 7.23804Z" fill="currentColor"/>
</svg>
`},73869:b=>{b.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M8.58802 13.7571C8.43705 13.9072 8.22896 14 7.99921 14C7.75841 14 7.54141 13.8981 7.38902 13.735L3.25662 9.7663C2.92401 9.44687 2.91333 8.91829 3.23276 8.58568C3.55219 8.25307 4.08078 8.24239 4.41339 8.56182L7.16421 11.2037L7.16421 2.835C7.16421 2.37384 7.53805 2 7.99921 2C8.46037 2 8.83421 2.37384 8.83421 2.835L8.83421 11.2052L11.5866 8.56182C11.9192 8.24239 12.4478 8.25307 12.7672 8.58568C13.0867 8.91829 13.076 9.44687 12.7434 9.7663L8.58802 13.7571Z" fill="currentColor"/>
</svg>
`}}]);
